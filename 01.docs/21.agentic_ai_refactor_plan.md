# 21. Agentic AI 리팩터 완료 기록 (Baseline + Changelog)

> 목적: Agentic AI 멀티 에이전트 리팩터의 **완료된 결과(기준선/실제 구현/변경 사항)** 를 한 문서로 보관합니다.
>
> 향후 계획/로드맵은 [01.docs/21.1.agentic_ai_roadmap.md](21.1.agentic_ai_roadmap.md)를 단일 소스로 사용합니다.
>
> 공용 프레임워크/도메인 문서는 각각 10.x / 11.x에서 최신 기준선을 유지합니다.

---

## 0. 기준선 요약 (2026-01-03)

- Supervisor는 AgentCatalog를 통해 워커를 동적으로 로드합니다.
- AgentCatalog는 `app.agents.features.*.worker:get_worker_specs()`를 스캔하여 feature-pack 워커를 discover 합니다.
- 활성 워커(기본): `SearchAgent` / `PresentationAgent` / `PriorArtAgent`
- 프롬프트는 중앙 디렉토리가 아니라, feature-pack 내부 `prompts/`로 로컬화되어 있습니다.
- 과거의 중앙 `app/tools/` 디렉토리는 제거되었고, 도구는 feature-pack 소유권 기준으로 이관되었습니다.

코드 기준 진입점:
- Supervisor: `backend/app/agents/supervisor_agent.py`
- Catalog: `backend/app/agents/catalog.py`
- legacy defaults: `backend/app/agents/core/workers.py`
- Contracts: `backend/app/core/contracts.py`
- Prompt loader: `backend/app/utils/prompt_loader.py`

테스트 게이트 스크립트:
- `shell-script/test-backend-unit.sh`
- `shell-script/test-backend-functional.sh`
- `shell-script/test-backend-integration.sh`

---

## 1. 완료된 리팩터 범위

### 1.1 Feature-pack 기반 구조 정착

- `backend/app/agents/features/` 아래에 기능 단위(feature-pack)로 에이전트를 정리
- Supervisor 라우팅은 AgentCatalog의 `get_workers()` 반환값만 사용
- 워커 디스커버리는 feature-pack의 `worker.py`(get_worker_specs) 기반

### 1.2 프롬프트 로컬화

- 중앙 `backend/prompts/`를 제거하고, feature-pack 내부 `prompts/`를 표준으로 사용
- `backend/app/utils/prompt_loader.py`가 feature-pack prompt 디렉토리를 기준으로 로드

### 1.3 중앙 tools 디렉토리 제거 및 소유권 이관

- 중앙 `backend/app/tools/` 디렉토리를 제거
- 공용 계약은 `backend/app/core/contracts.py`로 일원화
- 검색/비전/웹 검색 도구는 search_rag feature-pack으로 이관
- 특허 관련 도구/클라이언트는 patent feature-pack으로 이관

### 1.4 Prior Art 통합

- `PriorArtAgent`는 `backend/app/agents/features/patent/prior_art_agent/`에 통합
- 과거 호환 shim(`app.agents.features.prior_art`)은 제거됨

---

## 2. 남은 계획(향후)

향후 계획(예: Text-to-SQL, Team-of-Teams, 추가 특허 데이터 소스 확장)은
[01.docs/21.1.agentic_ai_roadmap.md](21.1.agentic_ai_roadmap.md)에서 관리합니다.

---

## 3. 참고(상세는 단일 소스 문서로)

- 공용 아키텍처(인덱스): [01.docs/10.agentic_architecture.md](10.agentic_architecture.md)
- Enterprise Intelligence(인덱스): [01.docs/11.enterprise_intelligence_architecture.md](11.enterprise_intelligence_architecture.md)
- 향후 로드맵(계획 단일 소스): [01.docs/21.1.agentic_ai_roadmap.md](21.1.agentic_ai_roadmap.md)
- 특허 feature-pack 상세: [backend/app/agents/features/patent/README.md](../backend/app/agents/features/patent/README.md)

