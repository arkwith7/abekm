# 05. ABEKM ë™ì  ì„¤ê³„ ëª…ì„¸ì„œ

## 1. ê°œìš”

### 1.1 ë¬¸ì„œ ëª©ì 

ë³¸ ë¬¸ì„œëŠ” ABEKM(AI Based Enterprise Knowledge Management)ì˜ ë™ì  ì„¤ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. 2025ë…„ 10ì›” í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì‹¤ì œ ë°±ì—”ë“œ APIì™€ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê° ê¸°ëŠ¥ë³„ ì²˜ë¦¬ ì ˆì°¨ì™€ ê°ì²´ ê°„ ìƒí˜¸ì‘ìš©ì„ ìƒì„¸íˆ ê¸°ìˆ í•©ë‹ˆë‹¤.

### 1.2 ì„¤ê³„ ë²”ìœ„

ë³¸ ë¬¸ì„œëŠ” ë‹¤ìŒì˜ ì‹¤ì œ êµ¬í˜„ëœ ê¸°ëŠ¥ì„ ë‹¤ë£¹ë‹ˆë‹¤:

**ì‚¬ìš©ì ê¸°ëŠ¥:**
- ğŸ“¤ ë¬¸ì„œ ì—…ë¡œë“œ ë° ì²˜ë¦¬ (`/api/v1/documents/upload`)
- ğŸ” í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (`/api/v1/search/hybrid`)
- ğŸ–¼ï¸ ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ (`/api/v1/multimodal_search/multimodal`, `/clip`)
- ğŸ’¬ RAG ê¸°ë°˜ ì±„íŒ… (`/api/v1/chat/stream`)
- ğŸ“Š í”„ë ˆì  í…Œì´ì…˜ ìƒì„± (`/api/v1/presentation/`)

**ê´€ë¦¬ì ê¸°ëŠ¥:**
- ğŸ—‚ï¸ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ (`/api/v1/containers/`)
- ğŸ” ê¶Œí•œ ê´€ë¦¬ (`/api/v1/permissions/`)
- ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬ (`/api/v1/users/`)

**ì‹œìŠ¤í…œ ê¸°ëŠ¥:**
- ğŸ”‘ ì¸ì¦/ì¸ê°€ (JWT + SAP RFC)
- ğŸ“ íŒŒì¼ ë·°ì–´ (`/api/v1/files/view`, `/office-to-pdf`)

### 1.3 ê¸°ìˆ  ìŠ¤íƒ

**ë°±ì—”ë“œ:**
- FastAPI (ë¹„ë™ê¸° REST API)
- PostgreSQL 15 + pgvector (ë¬¸ì„œ/ë²¡í„° ì €ì¥)
- Redis (ì„¸ì…˜/ìºì‹œ)
- SQLAlchemy (ORM)
- AWS Bedrock / Azure OpenAI (LLM/ì„ë² ë”©)
- LibreOffice (ë¬¸ì„œ ë³€í™˜)

**í”„ë¡ íŠ¸ì—”ë“œ:**
- React + TypeScript
- React Query (ì„œë²„ ìƒíƒœ ê´€ë¦¬)
- Context API (ê¸€ë¡œë²Œ ìƒíƒœ)
- Axios (HTTP í´ë¼ì´ì–¸íŠ¸)
- EventSource (SSE ìŠ¤íŠ¸ë¦¬ë°)

## 2. ì‚¬ìš©ì ê¸°ëŠ¥ ìœ ì¦ˆì¼€ì´ìŠ¤

### 2.1 UC001: ë¬¸ì„œ ì—…ë¡œë“œ ë° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

#### 2.1.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                                     |
| ---------- | ------------------------------------------------------ |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ë©€í‹°ëª¨ë‹¬ ë¬¸ì„œ ì—…ë¡œë“œ ë° í†µí•© ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸                                           |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì                                                 |
| **API ì—”ë“œí¬ì¸íŠ¸**     | `POST /api/v1/documents/upload`                                                 |
| **ëª©ì **     | ë‹¤ì–‘í•œ í˜•ì‹ì˜ ë¬¸ì„œë¥¼ ì—…ë¡œë“œí•˜ê³  í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, í‘œë¥¼ ì¶”ì¶œí•˜ì—¬ ë²¡í„°í™” ë° ê²€ìƒ‰ ê°€ëŠ¥ ìƒíƒœë¡œ ë³€í™˜ |
| **ì „ì œì¡°ê±´**   | - ì‚¬ìš©ì JWT ì¸ì¦ ì™„ë£Œ<br/>- ëŒ€ìƒ ì»¨í…Œì´ë„ˆ ì—…ë¡œë“œ ê¶Œí•œ ë³´ìœ <br/>- íŒŒì¼ í¬ê¸° 50MB ì´í•˜<br/>- ì§€ì› í˜•ì‹: PDF, DOCX, PPTX, XLSX, HWP, TXT                 |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ë¬¸ì„œê°€ ì»¨í…Œì´ë„ˆì— ì—…ë¡œë“œë˜ê³  IntegratedDocumentPipelineì„ í†µí•´ ì²˜ë¦¬ë˜ì–´ ê²€ìƒ‰ ê°€ëŠ¥ ìƒíƒœê°€ ë¨       |

#### 2.1.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - íŒŒì¼ ì„ íƒ ë° ì—…ë¡œë“œ ì¤€ë¹„**

```
[ì‚¬ìš©ì] â†’ [UploadPage ì»´í¬ë„ŒíŠ¸] â†’ [useDocumentUpload Hook]
â”‚
â”œâ”€ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°: frontend/src/pages/user/my-knowledge/UploadPage.tsx
â”œâ”€ ìƒíƒœ ê´€ë¦¬: useStateë¥¼ í†µí•œ íŒŒì¼, ì»¨í…Œì´ë„ˆ, ë©”íƒ€ë°ì´í„° ê´€ë¦¬
â”œâ”€ íŒŒì¼ ê²€ì¦: 
â”‚  â”œâ”€ í™•ì¥ì ì²´í¬ (.pdf, .docx, .pptx, .xlsx, .hwp, .txt)
â”‚  â”œâ”€ í¬ê¸° ì œí•œ (50MB)
â”‚  â””â”€ MIME íƒ€ì… ê²€ì¦
â””â”€ ì»¨í…Œì´ë„ˆ ì„ íƒ:
   â”œâ”€ GET /api/v1/documents/containers í˜¸ì¶œ
   â”œâ”€ ì‚¬ìš©ì ê¶Œí•œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ëª©ë¡ ì¡°íšŒ
   â””â”€ ê³„ì¸µ êµ¬ì¡° í‘œì‹œ (ROOT â†’ DIVISION â†’ DEPARTMENT â†’ TEAM)
```

**2ë‹¨ê³„: ë°±ì—”ë“œ - íŒŒì¼ ì—…ë¡œë“œ API ì²˜ë¦¬**

```
[documentService.ts] â†’ POST /api/v1/documents/upload
â”‚
[FastAPI Router: documents.py] 
â”œâ”€ get_current_user(): JWT í† í° ê²€ì¦ ë° ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
â”œâ”€ ìš”ì²­ íŒŒë¼ë¯¸í„°:
â”‚  â”œâ”€ file: UploadFile (multipart/form-data)
â”‚  â”œâ”€ container_id: str
â”‚  â”œâ”€ document_title: Optional[str]
â”‚  â”œâ”€ description: Optional[str]
â”‚  â””â”€ is_academic: bool = False
â”‚
â”œâ”€ ContainerService.validate_user_access():
â”‚  â”œâ”€ ì»¨í…Œì´ë„ˆ ì¡´ì¬ í™•ì¸
â”‚  â”œâ”€ ì‚¬ìš©ì ê¶Œí•œ ê²€ì¦ (READ_WRITE ì´ìƒ)
â”‚  â””â”€ ACCESS_LEVEL ì²´í¬ (PUBLIC, RESTRICTED, TEAM_ONLY, PRIVATE)
â”‚
â””â”€ PermissionService.check_permission():
   â””â”€ ìµœì¢… ê¶Œí•œ í™•ì¸ (ì—…ë¡œë“œ ê°€ëŠ¥ ì—¬ë¶€)
```

**3ë‹¨ê³„: íŒŒì¼ ì €ì¥ ë° ë©”íƒ€ë°ì´í„° ìƒì„±**

```
[DocumentUploadAPI] â†’ [DocumentService] â†’ [Database]
â”‚
â”œâ”€ íŒŒì¼ ì €ì¥ ë¡œì§:
â”‚  â”œâ”€ ì €ì¥ ê²½ë¡œ ê²°ì •: {UPLOAD_DIR}/{container_id}/{uuid}_{filename}
â”‚  â”œâ”€ íŒŒì¼ ìŠ¤íŠ¸ë¦¬ë° ì €ì¥ (shutil.copyfileobj)
â”‚  â”œâ”€ SHA-256 í•´ì‹œ ê³„ì‚° (ì¤‘ë³µ ê°ì§€)
â”‚  â””â”€ íŒŒì¼ í¬ê¸°, MIME íƒ€ì… ì¶”ì¶œ
â”‚
â”œâ”€ TbFileBssInfo ë ˆì½”ë“œ ìƒì„±:
â”‚  â”œâ”€ file_bss_info_sno (PK, auto-increment)
â”‚  â”œâ”€ file_nm (ì›ë³¸ íŒŒì¼ëª…)
â”‚  â”œâ”€ file_path (ì €ì¥ ê²½ë¡œ)
â”‚  â”œâ”€ file_size, file_hash, file_extension
â”‚  â”œâ”€ container_id, uploaded_by
â”‚  â””â”€ processing_status = 'pending'
â”‚
â””â”€ TbFileDtlInfo ë ˆì½”ë“œ ìƒì„±:
   â”œâ”€ file_dtl_info_sno (PK)
   â”œâ”€ file_bss_info_sno (FK)
   â”œâ”€ document_title, description
   â”œâ”€ created_date, updated_date
   â””â”€ ì´ˆê¸° í’ˆì§ˆ ì ìˆ˜ ì„¤ì •
```

**4ë‹¨ê³„: í†µí•© ë¬¸ì„œ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰**

```
[DocumentService] â†’ [IntegratedDocumentPipelineService]
â”‚
â”œâ”€ ì„œë¹„ìŠ¤ ìœ„ì¹˜: backend/app/services/document/pipeline/
â”‚  â””â”€ integrated_document_pipeline_service.py
â”‚
â””â”€ process_document() ë©”ì„œë“œ ì‹¤í–‰:
   â”‚
   â”œâ”€ **Phase 1: ë¬¸ì„œ ì „ì²˜ë¦¬ (DocumentPreprocessingService)**
   â”‚  â”œâ”€ LibreOffice ë³€í™˜ (HWP, DOCX, PPTX â†’ PDF)
   â”‚  â”œâ”€ PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ (pdfplumber)
   â”‚  â”œâ”€ ì´ë¯¸ì§€ ì¶”ì¶œ ë° ì„ì‹œ ì €ì¥
   â”‚  â”œâ”€ í‘œ ê°ì§€ ë° êµ¬ì¡° ë¶„ì„
   â”‚  â””â”€ ê²°ê³¼: PreprocessedDocument ê°ì²´
   â”‚
   â”œâ”€ **Phase 2: ì²­í‚¹ ì „ëµ ê²°ì •**
   â”‚  â”œâ”€ ë¬¸ì„œ íƒ€ì… ë¶„ì„ (í•™ìˆ ë…¼ë¬¸ vs ì¼ë°˜ë¬¸ì„œ)
   â”‚  â”œâ”€ í•™ìˆ ë…¼ë¬¸ ê°ì§€:
   â”‚  â”‚  â”œâ”€ Azure DI Section Detection
   â”‚  â”‚  â”œâ”€ Abstract, Introduction, Method ë“± ì„¹ì…˜ ì¶”ì¶œ
   â”‚  â”‚  â””â”€ ê³„ì¸µì  ì²­í‚¹ ì „ëµ ì ìš©
   â”‚  â”‚
   â”‚  â””â”€ ì¼ë°˜ë¬¸ì„œ:
   â”‚     â”œâ”€ ì ì‘í˜• ì²­í‚¹ (AdaptiveChunkingService)
   â”‚     â”œâ”€ ìŠ¬ë¼ì´ë”© ìœˆë„ìš° (500í† í°, 100í† í° ì˜¤ë²„ë©)
   â”‚     â””â”€ ì˜ë¯¸ ë‹¨ìœ„ ë¶„í•  (ë¬¸ì¥ ê²½ê³„ ì¡´ì¤‘)
   â”‚
   â”œâ”€ **Phase 3: NLP ì²˜ë¦¬ ë° í‚¤ì›Œë“œ ì¶”ì¶œ**
   â”‚  â”œâ”€ KoreanNLPService:
   â”‚  â”‚  â”œâ”€ kiwipiepy í˜•íƒœì†Œ ë¶„ì„
   â”‚  â”‚  â”œâ”€ ëª…ì‚¬, ë™ì‚¬, í˜•ìš©ì‚¬ ì¶”ì¶œ
   â”‚  â”‚  â””â”€ ì‚¬ìš©ì ì‚¬ì „ ì ìš© (ê³ ìœ ëª…ì‚¬, ì „ë¬¸ìš©ì–´)
   â”‚  â”‚
   â”‚  â”œâ”€ EnglishNLPService:
   â”‚  â”‚  â”œâ”€ NLTK í† í°í™” ë° POS íƒœê¹…
   â”‚  â”‚  â”œâ”€ ë¶ˆìš©ì–´ ì œê±°
   â”‚  â”‚  â””â”€ í‚¤ì›Œë“œ ì¶”ì¶œ
   â”‚  â”‚
   â”‚  â””â”€ ì¶”ì¶œ ê²°ê³¼:
   â”‚     â”œâ”€ keywords: List[str]
   â”‚     â”œâ”€ proper_nouns: List[str] (ê³ ìœ ëª…ì‚¬)
   â”‚     â””â”€ corp_names: List[str] (ê¸°ì—…ëª…, ê¸°ê´€ëª…)
   â”‚
   â”œâ”€ **Phase 4: ì„ë² ë”© ìƒì„±**
   â”‚  â”œâ”€ EmbeddingService í˜¸ì¶œ
   â”‚  â”œâ”€ í”„ë¡œë°”ì´ë” ì„ íƒ:
   â”‚  â”‚  â”œâ”€ 1ìˆœìœ„: AWS Bedrock (amazon.titan-embed-text-v2)
   â”‚  â”‚  â”œâ”€ 2ìˆœìœ„: Azure OpenAI (text-embedding-3-small)
   â”‚  â”‚  â””â”€ Failover ë©”ì»¤ë‹ˆì¦˜
   â”‚  â”‚
   â”‚  â”œâ”€ ë°°ì¹˜ ì²˜ë¦¬ (ìµœëŒ€ 100 ì²­í¬/ë°°ì¹˜)
   â”‚  â”œâ”€ í…ìŠ¤íŠ¸ ì„ë² ë”©: 1024ì°¨ì› ë²¡í„°
   â”‚  â””â”€ ì´ë¯¸ì§€ ì„ë² ë”© (CLIP): 512ì°¨ì› ë²¡í„°
   â”‚
   â”œâ”€ **Phase 5: ë²¡í„°ìŠ¤í† ì–´ ì €ì¥**
   â”‚  â”œâ”€ doc_extracted_chunks í…Œì´ë¸”:
   â”‚  â”‚  â”œâ”€ chunk_id (UUID)
   â”‚  â”‚  â”œâ”€ file_bss_info_sno (FK)
   â”‚  â”‚  â”œâ”€ chunk_index, chunk_text
   â”‚  â”‚  â”œâ”€ chunk_embedding (vector(1024))
   â”‚  â”‚  â”œâ”€ keywords, proper_nouns, corp_names
   â”‚  â”‚  â””â”€ prev_chunk_id, next_chunk_id (ì—°ê²° ë¦¬ìŠ¤íŠ¸)
   â”‚  â”‚
   â”‚  â””â”€ doc_extracted_object í…Œì´ë¸” (ë©€í‹°ëª¨ë‹¬):
   â”‚     â”œâ”€ object_id (UUID)
   â”‚     â”œâ”€ object_type ('image', 'table', 'chart')
   â”‚     â”œâ”€ image_path, image_hash
   â”‚     â”œâ”€ image_embedding (vector(512))
   â”‚     â”œâ”€ ocr_text, caption
   â”‚     â””â”€ bounding_box, page_number
   â”‚
   â””â”€ **Phase 6: ì¸ë±ì‹± ë° ê²€ìƒ‰ ìµœì í™”**
      â”œâ”€ PostgreSQL ì¸ë±ìŠ¤ ìë™ ìƒì„±:
      â”‚  â”œâ”€ GIN ì¸ë±ìŠ¤ (tsvector, keywords ë°°ì—´)
      â”‚  â”œâ”€ HNSW ì¸ë±ìŠ¤ (vector ì¹¼ëŸ¼, pgvector)
      â”‚  â””â”€ B-Tree ì¸ë±ìŠ¤ (file_id, container_id)
      â”‚
      â””â”€ ì²˜ë¦¬ ìƒíƒœ ì—…ë°ì´íŠ¸:
         â”œâ”€ processing_status = 'completed'
         â”œâ”€ total_chunks, total_images ì—…ë°ì´íŠ¸
         â””â”€ quality_score ê³„ì‚° (í…ìŠ¤íŠ¸ í’ˆì§ˆ, í•œêµ­ì–´ ë¹„ìœ¨)
```

**5ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ì—…ë¡œë“œ ì§„í–‰ ìƒíƒœ ì¶”ì **

```
[UploadPage] â†’ [useDocumentUpload Hook] â†’ SSE/Polling
â”‚
â”œâ”€ ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ:
â”‚  â”œâ”€ GET /api/v1/documents/upload-progress/{upload_id}
â”‚  â”œâ”€ í´ë§ ê°„ê²©: 1ì´ˆ
â”‚  â””â”€ ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸ (0-100%)
â”‚
â”œâ”€ ì²˜ë¦¬ ë‹¨ê³„ í‘œì‹œ:
â”‚  â”œâ”€ "íŒŒì¼ ì—…ë¡œë“œ ì¤‘..." (0-30%)
â”‚  â”œâ”€ "ë¬¸ì„œ ë¶„ì„ ì¤‘..." (30-60%)
â”‚  â”œâ”€ "ë²¡í„°í™” ì§„í–‰ ì¤‘..." (60-90%)
â”‚  â””â”€ "ì²˜ë¦¬ ì™„ë£Œ!" (100%)
â”‚
â””â”€ ì™„ë£Œ í›„ ë™ì‘:
   â”œâ”€ ì„±ê³µ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
   â”œâ”€ ë¬¸ì„œ ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨
   â””â”€ ì—…ë¡œë“œ í¼ ì´ˆê¸°í™”
```

**6ë‹¨ê³„: ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„**

```
[Error Handling] 
â”‚
â”œâ”€ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤:
â”‚  â”œâ”€ íŒŒì¼ í¬ê¸° ì´ˆê³¼ â†’ 400 Bad Request
â”‚  â”œâ”€ ê¶Œí•œ ë¶€ì¡± â†’ 403 Forbidden
â”‚  â”œâ”€ ì»¨í…Œì´ë„ˆ ë¯¸ì¡´ì¬ â†’ 404 Not Found
â”‚  â”œâ”€ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ì˜¤ë¥˜ â†’ 500 Internal Server Error
â”‚  â””â”€ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ â†’ RetryHandler (3íšŒ ì¬ì‹œë„)
â”‚
â”œâ”€ ë¶€ë¶„ ì‹¤íŒ¨ ì²˜ë¦¬:
â”‚  â”œâ”€ íŒŒì¼ ì €ì¥ ì„±ê³µ + ì²˜ë¦¬ ì‹¤íŒ¨
â”‚  â”‚  â””â”€ processing_status = 'failed'
â”‚  â”‚  â””â”€ error_message ì €ì¥
â”‚  â”‚
â”‚  â””â”€ ì¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜:
â”‚     â””â”€ POST /api/v1/search/documents/reindex/{file_id}
â”‚
â””â”€ í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ UI:
   â”œâ”€ ì—ëŸ¬ ë©”ì‹œì§€ í† ìŠ¤íŠ¸
   â”œâ”€ ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ
   â””â”€ ê´€ë¦¬ì ë¬¸ì˜ ì•ˆë‚´
```

### 2.2 UC002: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ë° ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰

#### 2.2.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                                  |
| ---------- | --------------------------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ë° ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰                                    |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì                                              |
| **API ì—”ë“œí¬ì¸íŠ¸** | `POST /api/v1/search/hybrid`<br/>`POST /api/v1/multimodal_search/multimodal`<br/>`POST /api/v1/multimodal_search/clip` |
| **ëª©ì **     | í…ìŠ¤íŠ¸ ì¿¼ë¦¬ ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œì™€ ì½˜í…ì¸ ë¥¼ ê²€ìƒ‰í•˜ê³  ê¶Œí•œ ê¸°ë°˜ ê²°ê³¼ ì œê³µ |
| **ì „ì œì¡°ê±´**   | - ì‚¬ìš©ì JWT ì¸ì¦ ì™„ë£Œ<br/>- ì ‘ê·¼ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ ì¡´ì¬<br/>- ê²€ìƒ‰ ì¸ë±ìŠ¤ êµ¬ì¶• ì™„ë£Œ                        |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ê²€ìƒ‰ ê²°ê³¼ê°€ ê¶Œí•œ ê¸°ë°˜ìœ¼ë¡œ í•„í„°ë§ë˜ì–´ í‘œì‹œë˜ê³ , íŒŒì¼ ë·°ì–´ë¥¼ í†µí•´ ì›ë³¸ ë¬¸ì„œ ì¡°íšŒ ê°€ëŠ¥     |

#### 2.2.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ê²€ìƒ‰ í˜ì´ì§€ ì´ˆê¸°í™” ë° ìƒíƒœ ê´€ë¦¬**

```
[ì‚¬ìš©ì] â†’ [SearchPage.tsx] â†’ [useSearch Hook]
â”‚
â”œâ”€ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°: frontend/src/pages/user/SearchPage.tsx
â”œâ”€ ì»¤ìŠ¤í…€ Hook: frontend/src/pages/user/search/useSearch.ts
â”‚
â”œâ”€ ì´ˆê¸° ìƒíƒœ ì„¤ì •:
â”‚  â”œâ”€ query: string (ê²€ìƒ‰ì–´)
â”‚  â”œâ”€ searchType: 'hybrid' | 'vector_only' | 'keyword_only'
â”‚  â”œâ”€ filters: SearchFilters
â”‚  â”‚  â”œâ”€ container_ids: string[] (ì„ íƒëœ ì»¨í…Œì´ë„ˆ)
â”‚  â”‚  â”œâ”€ document_types: string[] (PDF, DOCX, PPTX ë“±)
â”‚  â”‚  â”œâ”€ date_range: {start?, end?}
â”‚  â”‚  â”œâ”€ score_threshold: number (ìœ ì‚¬ë„ ì„ê³„ê°’)
â”‚  â”‚  â””â”€ prefer_images: boolean (ì´ë¯¸ì§€ ìš°ì„  ê²€ìƒ‰)
â”‚  â”‚
â”‚  â”œâ”€ searchResults: SearchResult[] (ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´)
â”‚  â”œâ”€ selectedResults: Set<string> (ì„ íƒëœ ë¬¸ì„œ ID)
â”‚  â””â”€ isSearching: boolean (ë¡œë”© ìƒíƒœ)
â”‚
â””â”€ ê¶Œí•œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ë¡œë“œ:
   â””â”€ GET /api/v1/documents/containers
      â””â”€ ì‚¬ìš©ì ì ‘ê·¼ ê°€ëŠ¥ ì»¨í…Œì´ë„ˆ ëª©ë¡ ì¡°íšŒ
```

**2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ê²€ìƒ‰ ì¿¼ë¦¬ ì…ë ¥ ë° ì‹¤í–‰**

```
[SearchBar ì»´í¬ë„ŒíŠ¸] â†’ [useSearch.executeSearch()] â†’ [searchService.ts]
â”‚
â”œâ”€ ê²€ìƒ‰ì–´ ì…ë ¥ ì²˜ë¦¬:
â”‚  â”œâ”€ í•œêµ­ì–´/ì˜ì–´ ìë™ ê°ì§€
â”‚  â”œâ”€ ìµœì†Œ ê¸¸ì´ ê²€ì¦ (2ì ì´ìƒ)
â”‚  â””â”€ íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í•‘
â”‚
â”œâ”€ í•„í„° ì„¤ì •:
â”‚  â”œâ”€ [FilterPanel ì»´í¬ë„ŒíŠ¸]
â”‚  â”‚  â”œâ”€ ì»¨í…Œì´ë„ˆ ì„ íƒ (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)
â”‚  â”‚  â”œâ”€ ë¬¸ì„œ íƒ€ì… í•„í„°
â”‚  â”‚  â”œâ”€ ë‚ ì§œ ë²”ìœ„ í•„í„°
â”‚  â”‚  â””â”€ ì´ë¯¸ì§€ í¬í•¨ ì—¬ë¶€
â”‚  â”‚
â”‚  â””â”€ [ViewModeSelector]
â”‚     â”œâ”€ Grid View (ì¹´ë“œí˜•)
â”‚     â””â”€ List View (ëª©ë¡í˜•)
â”‚
â””â”€ API ìš”ì²­ ì¤€ë¹„:
   â”œâ”€ searchService.hybridSearch() í˜¸ì¶œ
   â”œâ”€ ìš”ì²­ í˜ì´ë¡œë“œ êµ¬ì„±:
   â”‚  {
   â”‚    query: string,
   â”‚    search_type: 'hybrid',
   â”‚    container_ids: string[],
   â”‚    filters: SearchFilters,
   â”‚    max_results: 20,
   â”‚    offset: 0
   â”‚  }
   â””â”€ Axios POST ìš”ì²­ ì „ì†¡
```

**3ë‹¨ê³„: ë°±ì—”ë“œ - í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì²˜ë¦¬**

```
POST /api/v1/search/hybrid â†’ [SearchService]
â”‚
â”œâ”€ ì„œë¹„ìŠ¤ ìœ„ì¹˜: backend/app/services/search/
â”‚  â”œâ”€ search_service.py (í†µí•© ê²€ìƒ‰ ë¡œì§)
â”‚  â”œâ”€ vector_search_service.py (ë²¡í„° ê²€ìƒ‰)
â”‚  â””â”€ keyword_search_service.py (í‚¤ì›Œë“œ ê²€ìƒ‰)
â”‚
â”œâ”€ **Phase 1: ì¿¼ë¦¬ ì „ì²˜ë¦¬**
â”‚  â”œâ”€ ì–¸ì–´ ê°ì§€:
â”‚  â”‚  â”œâ”€ KoreanNLPService.detect_language()
â”‚  â”‚  â””â”€ í•œêµ­ì–´ vs ì˜ì–´ íŒë³„
â”‚  â”‚
â”‚  â”œâ”€ í‚¤ì›Œë“œ ì¶”ì¶œ:
â”‚  â”‚  â”œâ”€ í•œêµ­ì–´: kiwipiepy í˜•íƒœì†Œ ë¶„ì„
â”‚  â”‚  â”‚  â”œâ”€ ëª…ì‚¬(NNG, NNP) ì¶”ì¶œ
â”‚  â”‚  â”‚  â”œâ”€ ë™ì‚¬(VV), í˜•ìš©ì‚¬(VA) ì¶”ì¶œ
â”‚  â”‚  â”‚  â””â”€ ì‚¬ìš©ì ì‚¬ì „ ì ìš©
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ì˜ì–´: NLTK í† í°í™” + POS íƒœê¹…
â”‚  â”‚     â”œâ”€ ëª…ì‚¬, ë™ì‚¬ ì¶”ì¶œ
â”‚  â”‚     â””â”€ ë¶ˆìš©ì–´ ì œê±°
â”‚  â”‚
â”‚  â””â”€ ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±:
â”‚     â”œâ”€ EmbeddingService.create_embedding(query)
â”‚     â”œâ”€ ìºì‹œ í™•ì¸ (Redis)
â”‚     â”‚  â””â”€ Key: f"embedding:{hash(query)}"
â”‚     â””â”€ ì‹ ê·œ ìƒì„± ì‹œ:
â”‚        â”œâ”€ AWS Bedrock (amazon.titan-embed-text-v2)
â”‚        â””â”€ ê²°ê³¼: vector(1024)
â”‚
â”œâ”€ **Phase 2: ê¶Œí•œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ í•„í„°ë§**
â”‚  â”œâ”€ PermissionService.get_accessible_containers(user_id)
â”‚  â”œâ”€ SQL Query:
â”‚  â”‚  SELECT c.container_id
â”‚  â”‚  FROM tb_knowledge_containers c
â”‚  â”‚  JOIN tb_user_permissions p
â”‚  â”‚    ON c.container_id = p.container_id
â”‚  â”‚  WHERE p.user_emp_no = :user_emp_no
â”‚  â”‚    AND p.permission_level IN ('READ', 'READ_WRITE')
â”‚  â”‚    AND c.is_active = true
â”‚  â”‚
â”‚  â””â”€ í•„í„° ì¡°ê±´ê³¼ êµì§‘í•© ê³„ì‚°:
â”‚     â””â”€ allowed_containers = user_containers âˆ© filter_containers
â”‚
â”œâ”€ **Phase 3: ë³‘ë ¬ ê²€ìƒ‰ ì‹¤í–‰**
â”‚  â”‚
â”‚  â”œâ”€ [ë²¡í„° ê²€ìƒ‰ (Vector Search)]
â”‚  â”‚  â”œâ”€ VectorSearchService.search()
â”‚  â”‚  â”œâ”€ SQL Query (pgvector):
â”‚  â”‚  â”‚  SELECT 
â”‚  â”‚  â”‚    c.chunk_id,
â”‚  â”‚  â”‚    c.chunk_text,
â”‚  â”‚  â”‚    c.keywords,
â”‚  â”‚  â”‚    f.file_id,
â”‚  â”‚  â”‚    f.file_nm,
â”‚  â”‚  â”‚    1 - (c.chunk_embedding <=> :query_embedding) AS similarity
â”‚  â”‚  â”‚  FROM doc_extracted_chunks c
â”‚  â”‚  â”‚  JOIN tb_file_bss_info f ON c.file_bss_info_sno = f.file_bss_info_sno
â”‚  â”‚  â”‚  WHERE f.container_id = ANY(:container_ids)
â”‚  â”‚  â”‚  ORDER BY c.chunk_embedding <=> :query_embedding
â”‚  â”‚  â”‚  LIMIT 50
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ê²°ê³¼: [
â”‚  â”‚       {chunk_id, text, file_id, similarity_score: 0.85},
â”‚  â”‚       ...
â”‚  â”‚     ]
â”‚  â”‚
â”‚  â”œâ”€ [í‚¤ì›Œë“œ ê²€ìƒ‰ (Keyword Search)]
â”‚  â”‚  â”œâ”€ KeywordSearchService.search()
â”‚  â”‚  â”œâ”€ PostgreSQL Full-Text Search:
â”‚  â”‚  â”‚  SELECT 
â”‚  â”‚  â”‚    c.chunk_id,
â”‚  â”‚  â”‚    c.chunk_text,
â”‚  â”‚  â”‚    ts_rank_cd(c.text_vector, query_tsquery) AS rank
â”‚  â”‚  â”‚  FROM doc_extracted_chunks c
â”‚  â”‚  â”‚  JOIN tb_file_bss_info f ON c.file_bss_info_sno = f.file_bss_info_sno
â”‚  â”‚  â”‚  WHERE c.text_vector @@ query_tsquery
â”‚  â”‚  â”‚    AND f.container_id = ANY(:container_ids)
â”‚  â”‚  â”‚  ORDER BY rank DESC
â”‚  â”‚  â”‚  LIMIT 50
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ query_tsquery ìƒì„±:
â”‚  â”‚     â”œâ”€ í•œêµ­ì–´: to_tsquery('korean', keywords)
â”‚  â”‚     â””â”€ ì˜ì–´: to_tsquery('english', keywords)
â”‚  â”‚
â”‚  â””â”€ [ì´ë¯¸ì§€ ê²€ìƒ‰ (Image Search, prefer_images=trueì¼ ë•Œ)]
â”‚     â”œâ”€ ImageSearchService.search()
â”‚     â”œâ”€ SQL Query:
â”‚     â”‚  SELECT 
â”‚     â”‚    o.object_id,
â”‚     â”‚    o.image_path,
â”‚     â”‚    o.ocr_text,
â”‚     â”‚    o.caption,
â”‚     â”‚    1 - (o.image_embedding <=> :query_embedding) AS similarity
â”‚     â”‚  FROM doc_extracted_object o
â”‚     â”‚  JOIN tb_file_bss_info f ON o.file_bss_info_sno = f.file_bss_info_sno
â”‚     â”‚  WHERE o.object_type = 'image'
â”‚     â”‚    AND f.container_id = ANY(:container_ids)
â”‚     â”‚  ORDER BY o.image_embedding <=> :query_embedding
â”‚     â”‚  LIMIT 20
â”‚     â”‚
â”‚     â””â”€ CLIP ëª¨ë¸ ì‚¬ìš© (512ì°¨ì› ì´ë¯¸ì§€ ì„ë² ë”©)
â”‚
â”œâ”€ **Phase 4: ê²°ê³¼ ë³‘í•© ë° ë¦¬ë­í‚¹ (Hybrid Fusion)**
â”‚  â”œâ”€ HybridSearchService.merge_results()
â”‚  â”œâ”€ RRF (Reciprocal Rank Fusion) ì•Œê³ ë¦¬ì¦˜:
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ ìˆœìœ„: rank_vector
â”‚  â”‚  â”œâ”€ í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ìˆœìœ„: rank_keyword
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ì ìˆ˜ ê³„ì‚°:
â”‚  â”‚     score = (1 / (k + rank_vector)) + (1 / (k + rank_keyword))
â”‚  â”‚     (k = 60, í‘œì¤€ RRF ìƒìˆ˜)
â”‚  â”‚
â”‚  â”œâ”€ ê°€ì¤‘ì¹˜ ì ìš© (ì„¤ì • ê°€ëŠ¥):
â”‚  â”‚  â”œâ”€ vector_weight: 0.6 (ê¸°ë³¸ê°’)
â”‚  â”‚  â”œâ”€ keyword_weight: 0.4
â”‚  â”‚  â””â”€ final_score = score * vector_weight + rank * keyword_weight
â”‚  â”‚
â”‚  â”œâ”€ ì¤‘ë³µ ì œê±°:
â”‚  â”‚  â””â”€ chunk_id ê¸°ì¤€ ê·¸ë£¹í™”, ìµœê³  ì ìˆ˜ë§Œ ìœ ì§€
â”‚  â”‚
â”‚  â””â”€ ì •ë ¬ ë° í˜ì´ì§€ë„¤ì´ì…˜:
â”‚     â”œâ”€ ORDER BY final_score DESC
â”‚     â””â”€ LIMIT max_results OFFSET offset
â”‚
â””â”€ **Phase 5: ì‘ë‹µ êµ¬ì„±**
   â”œâ”€ SearchResponse ìƒì„±:
   â”‚  {
   â”‚    results: [
   â”‚      {
   â”‚        file_id: string,
   â”‚        title: string,
   â”‚        content_preview: string (300ì),
   â”‚        similarity_score: number,
   â”‚        match_type: 'hybrid' | 'vector' | 'keyword',
   â”‚        container_id: string,
   â”‚        container_name: string,
   â”‚        container_path: string,
   â”‚        file_path: string,
   â”‚        metadata: {
   â”‚          document_id, chunk_index,
   â”‚          keywords: string[],
   â”‚          proper_nouns: string[],
   â”‚          corp_names: string[],
   â”‚          document_type: string,
   â”‚          search_methods: ['vector', 'keyword'],
   â”‚          scores: {vector: 0.85, keyword: 0.72},
   â”‚          last_updated: string
   â”‚        }
   â”‚      },
   â”‚      ...
   â”‚    ],
   â”‚    total_count: number,
   â”‚    search_time: number (ms),
   â”‚    search_type: 'hybrid',
   â”‚    message: 'ê²€ìƒ‰ ì™„ë£Œ'
   â”‚  }
   â”‚
   â””â”€ HTTP 200 OK ì‘ë‹µ
```

**4ë‹¨ê³„: ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ (ì´ë¯¸ì§€ ì—…ë¡œë“œ ê²€ìƒ‰)**

```
POST /api/v1/multimodal_search/multimodal
â”‚
â”œâ”€ ìš”ì²­ í˜ì´ë¡œë“œ:
â”‚  â”œâ”€ image: UploadFile (multipart/form-data)
â”‚  â”œâ”€ query: Optional[str] (í…ìŠ¤íŠ¸ ì¿¼ë¦¬ ì„ íƒì )
â”‚  â””â”€ filters: SearchFilters
â”‚
â”œâ”€ **ì´ë¯¸ì§€ ì„ë² ë”© ìƒì„±:**
â”‚  â”œâ”€ ImageEmbeddingService.create_embedding()
â”‚  â”œâ”€ CLIP ëª¨ë¸ (openai/clip-vit-base-patch32)
â”‚  â”‚  â”œâ”€ ì´ë¯¸ì§€ ì „ì²˜ë¦¬: 224x224 ë¦¬ì‚¬ì´ì¦ˆ, ì •ê·œí™”
â”‚  â”‚  â”œâ”€ ì„ë² ë”© ì¶”ì¶œ: vector(512)
â”‚  â”‚  â””â”€ L2 ì •ê·œí™”
â”‚  â”‚
â”‚  â””â”€ í…ìŠ¤íŠ¸ ì¿¼ë¦¬ ë³‘í–‰ ì‹œ:
â”‚     â”œâ”€ í…ìŠ¤íŠ¸ ì„ë² ë”© ìƒì„± (1024ì°¨ì›)
â”‚     â””â”€ ë©€í‹°ëª¨ë‹¬ í“¨ì „ (ê°€ì¤‘ í‰ê· )
â”‚
â”œâ”€ **ì´ë¯¸ì§€ ìœ ì‚¬ë„ ê²€ìƒ‰:**
â”‚  â”œâ”€ SQL Query:
â”‚  â”‚  SELECT 
â”‚  â”‚    o.object_id,
â”‚  â”‚    o.image_path,
â”‚  â”‚    o.ocr_text,
â”‚  â”‚    f.file_id,
â”‚  â”‚    f.file_nm,
â”‚  â”‚    1 - (o.image_embedding <=> :image_embedding) AS similarity
â”‚  â”‚  FROM doc_extracted_object o
â”‚  â”‚  JOIN tb_file_bss_info f ON o.file_bss_info_sno = f.file_bss_info_sno
â”‚  â”‚  WHERE o.object_type IN ('image', 'chart', 'diagram')
â”‚  â”‚    AND f.container_id = ANY(:allowed_containers)
â”‚  â”‚  ORDER BY o.image_embedding <=> :image_embedding
â”‚  â”‚  LIMIT :max_results
â”‚  â”‚
â”‚  â””â”€ ê²°ê³¼ì— ì´ë¯¸ì§€ URL í¬í•¨:
â”‚     â””â”€ image_url: /api/v1/documents/chunks/{chunk_id}/image
â”‚
â””â”€ **OCR í…ìŠ¤íŠ¸ ê²€ìƒ‰ ë³‘í–‰:**
   â”œâ”€ ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ ì¶”ì¶œ (Azure DI / Tesseract)
   â”œâ”€ OCR í…ìŠ¤íŠ¸ë¡œ ì¶”ê°€ ê²€ìƒ‰
   â””â”€ ê²°ê³¼ ë³‘í•© (ì´ë¯¸ì§€ ìœ ì‚¬ë„ + í…ìŠ¤íŠ¸ ë§¤ì¹­)
```

**5ë‹¨ê³„: CLIP ê²€ìƒ‰ (í´ë¦½ë³´ë“œ ì´ë¯¸ì§€ ê²€ìƒ‰)**

```
POST /api/v1/multimodal_search/clip
â”‚
â”œâ”€ ë¸Œë¼ìš°ì € í´ë¦½ë³´ë“œì—ì„œ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
â”œâ”€ Base64 ì¸ì½”ë”© ë˜ëŠ” Blobìœ¼ë¡œ ì „ì†¡
â”œâ”€ ë°±ì—”ë“œ CLIP ëª¨ë¸ ì²˜ë¦¬
â””â”€ ìœ ì‚¬ ì´ë¯¸ì§€/ë¬¸ì„œ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜
```

**6ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ ë° ìƒí˜¸ì‘ìš©**

```
[SearchPage] â†’ [ResultList ì»´í¬ë„ŒíŠ¸] â†’ [SearchResultCard]
â”‚
â”œâ”€ ê²°ê³¼ í‘œì‹œ ëª¨ë“œ:
â”‚  â”œâ”€ Grid View:
â”‚  â”‚  â”œâ”€ ì¹´ë“œí˜• ë ˆì´ì•„ì›ƒ (3ì—´ ê·¸ë¦¬ë“œ)
â”‚  â”‚  â”œâ”€ ë¬¸ì„œ ì¸ë„¤ì¼ ì´ë¯¸ì§€
â”‚  â”‚  â”œâ”€ ì œëª©, ë¯¸ë¦¬ë³´ê¸° í…ìŠ¤íŠ¸
â”‚  â”‚  â”œâ”€ ìœ ì‚¬ë„ ì ìˆ˜ (í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
â”‚  â”‚  â””â”€ ì»¨í…Œì´ë„ˆ ê²½ë¡œ í‘œì‹œ
â”‚  â”‚
â”‚  â””â”€ List View:
â”‚     â”œâ”€ í…Œì´ë¸”í˜• ë ˆì´ì•„ì›ƒ
â”‚     â”œâ”€ ì²´í¬ë°•ìŠ¤ (ë‹¤ì¤‘ ì„ íƒ)
â”‚     â”œâ”€ íŒŒì¼ëª…, íƒ€ì…, í¬ê¸°, ë‚ ì§œ
â”‚     â””â”€ ì•¡ì…˜ ë²„íŠ¼ (ë³´ê¸°, ë‹¤ìš´ë¡œë“œ)
â”‚
â”œâ”€ ê²°ê³¼ ì¹´ë“œ ì¸í„°ë™ì…˜:
â”‚  â”œâ”€ í´ë¦­ â†’ íŒŒì¼ ë·°ì–´ ì—´ê¸°
â”‚  â”œâ”€ ì²´í¬ë°•ìŠ¤ â†’ ë‹¤ì¤‘ ì„ íƒ (RAG ì±„íŒ…ìš©)
â”‚  â”œâ”€ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
â”‚  â””â”€ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ê³µìœ , ì¦ê²¨ì°¾ê¸°)
â”‚
â”œâ”€ íŒŒì¼ ë·°ì–´ í†µí•©:
â”‚  â”œâ”€ [FileViewer ì»´í¬ë„ŒíŠ¸]
â”‚  â”œâ”€ GET /api/v1/files/view/{file_id}
â”‚  â”œâ”€ LibreOffice ë³€í™˜ (Office/HWP â†’ PDF)
â”‚  â”œâ”€ Iframe ë Œë”ë§
â”‚  â””â”€ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì œê³µ
â”‚
â”œâ”€ ë¬´í•œ ìŠ¤í¬ë¡¤ / í˜ì´ì§€ë„¤ì´ì…˜:
â”‚  â”œâ”€ [LoadMoreButton ì»´í¬ë„ŒíŠ¸]
â”‚  â”œâ”€ offset ì¦ê°€ (20ì”©)
â”‚  â”œâ”€ ê¸°ì¡´ ê²°ê³¼ + ì‹ ê·œ ê²°ê³¼ ë³‘í•©
â”‚  â””â”€ ì´ ê°œìˆ˜ í‘œì‹œ
â”‚
â””â”€ RAG ì±„íŒ… ì—°ë™:
   â”œâ”€ [SelectedDocumentsDisplay]
   â”œâ”€ ì„ íƒëœ ë¬¸ì„œ í‘œì‹œ (ë°°ì§€)
   â”œâ”€ "AI ì±„íŒ…ìœ¼ë¡œ ì´ë™" ë²„íŠ¼
   â””â”€ handleGoToChat():
      â”œâ”€ ì„ íƒ ë¬¸ì„œë¥¼ Context APIì— ì €ì¥
      â”œâ”€ navigate('/chat', { state: { ragMode: true } })
      â””â”€ ChatPageì—ì„œ ë¬¸ì„œ ì»¨í…ìŠ¤íŠ¸ í™œìš©
```

**7ë‹¨ê³„: ì„±ëŠ¥ ìµœì í™” ë° ìºì‹±**

```
[ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”]
â”‚
â”œâ”€ Redis ìºì‹±:
â”‚  â”œâ”€ ì¿¼ë¦¬ ì„ë² ë”© ìºì‹œ
â”‚  â”‚  â””â”€ TTL: 1ì‹œê°„
â”‚  â”œâ”€ ê²€ìƒ‰ ê²°ê³¼ ìºì‹œ
â”‚  â”‚  â””â”€ Key: f"search:{hash(query+filters)}"
â”‚  â”‚  â””â”€ TTL: 15ë¶„
â”‚  â””â”€ ì»¨í…Œì´ë„ˆ ê¶Œí•œ ìºì‹œ
â”‚     â””â”€ TTL: 5ë¶„
â”‚
â”œâ”€ PostgreSQL ì¸ë±ìŠ¤ ìµœì í™”:
â”‚  â”œâ”€ HNSW ì¸ë±ìŠ¤ (pgvector):
â”‚  â”‚  CREATE INDEX idx_chunk_embedding
â”‚  â”‚  ON doc_extracted_chunks
â”‚  â”‚  USING hnsw (chunk_embedding vector_cosine_ops)
â”‚  â”‚  WITH (m = 16, ef_construction = 64);
â”‚  â”‚
â”‚  â”œâ”€ GIN ì¸ë±ìŠ¤ (Full-Text Search):
â”‚  â”‚  CREATE INDEX idx_chunk_text_vector
â”‚  â”‚  ON doc_extracted_chunks
â”‚  â”‚  USING gin(text_vector);
â”‚  â”‚
â”‚  â””â”€ B-Tree ë³µí•© ì¸ë±ìŠ¤:
â”‚     CREATE INDEX idx_file_container
â”‚     ON tb_file_bss_info(container_id, created_date DESC);
â”‚
â””â”€ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš ë¶„ì„:
   â””â”€ EXPLAIN ANALYZEë¡œ ë³‘ëª© ì§€ì  ì‹ë³„
```
[SearchService] â†’ [ContainerPermissionService] â†’ [SAPIntegrationService]
- SearchService._get_accessible_containers() í˜¸ì¶œ
- ì‚¬ìš©ì EMP_NO ê¸°ë°˜ SAP HR ì‹œìŠ¤í…œ ê¶Œí•œ ì¡°íšŒ
- ë¶€ì„œ ì½”ë“œ, ì§ê¸‰, íŠ¹ë³„ ê¶Œí•œ í™•ì¸
- Redis ìºì‹œë¥¼ í†µí•œ ê¶Œí•œ ì •ë³´ 10ë¶„ê°„ ì €ì¥
- ìš”ì²­ëœ container_idsì™€ ì ‘ê·¼ ê°€ëŠ¥ ì»¨í…Œì´ë„ˆ êµì§‘í•© ê³„ì‚°
```

**5ë‹¨ê³„: ì§ˆë¬¸ ì „ì²˜ë¦¬ ë° ê°œì„ **
```
[SearchService] â†’ [QuestionPreprocessor] â†’ [KiwiNLP] â†’ [BedrockAI]
- QuestionPreprocessor.preprocess_question() í˜¸ì¶œ
- Kiwi NLPë¥¼ í†µí•œ í•œêµ­ì–´ í˜•íƒœì†Œ ë¶„ì„ ë° í‚¤ì›Œë“œ ì¶”ì¶œ
- ê³ ìœ ëª…ì‚¬, íšŒì‚¬ëª…, ë¬¸ì„œ íƒ€ì… íŒíŠ¸ ì¶”ì¶œ
- Bedrock Claude 3.5ë¥¼ í†µí•œ ì§ˆë¬¸ ì˜ë„ ê°œì„ 
- ê²€ìƒ‰ ìµœì í™”ëœ í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ ìƒì„±
```

**6ë‹¨ê³„: ë‹¤ì¤‘ ê²€ìƒ‰ ì—”ì§„ ë³‘ë ¬ ì‹¤í–‰**
```
[SearchService] â†’ [VectorSearch + KeywordSearch + FulltextSearch]
- _hybrid_search_combined() ë©”ì„œë“œ ì‹¤í–‰
- asyncio.gather()ë¥¼ í†µí•œ 3ê°œ ê²€ìƒ‰ ì—”ì§„ ë³‘ë ¬ ì‹¤í–‰:
  * Vector Search: ì„ë² ë”© ê¸°ë°˜ ì˜ë¯¸ ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 0.6)
  * Keyword Search: ì •í™•í•œ í‚¤ì›Œë“œ ë§¤ì¹­ (ê°€ì¤‘ì¹˜ 0.3)  
  * Fulltext Search: PostgreSQL FTS ê²€ìƒ‰ (ê°€ì¤‘ì¹˜ 0.1)
- ê° ê²€ìƒ‰ ê²°ê³¼ì— search_methods íƒœê·¸ ì¶”ê°€
```

**7ë‹¨ê³„: í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤ì½”ì–´ë§ ë° í†µí•©**
```
[SearchService] â†’ [ResultCombiner] â†’ [ScoreCalculator]
- 3ê°œ ê²€ìƒ‰ ê²°ê³¼ì˜ document_id ê¸°ì¤€ í†µí•©
- combined_score = (vector_score * 0.6) + (keyword_score * 0.3) + (fulltext_score * 0.1)
- NaN ê°’ ì²˜ë¦¬ ë° ì¤‘ë³µ ì œê±°
- combined_score ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
- max_results ê°œìˆ˜ë§Œí¼ ìƒìœ„ ê²°ê³¼ ë°˜í™˜
```

**8ë‹¨ê³„: ê²°ê³¼ ê·¸ë£¹í™” ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€**
```
[SearchService] â†’ [ResultFormatter] â†’ [FileMetadataService]
- _group_results_by_file()ë¡œ íŒŒì¼ ë‹¨ìœ„ ê·¸ë£¹í™”
- ë¬¸ì„œë³„ ìµœê³  ì ìˆ˜ ì²­í¬ ëŒ€í‘œë¡œ ì„ ì •
- íŒŒì¼ ë©”íƒ€ë°ì´í„° (í¬ê¸°, ìƒì„±ì¼, ì»¨í…Œì´ë„ˆëª…) ì¶”ê°€
- í•˜ì´ë¼ì´íŒ… ì •ë³´ ë° ê²€ìƒ‰ ë°©ë²• íƒœê·¸ í¬í•¨
- ê¶Œí•œ ì¬ê²€ì¦ ë° ì ‘ê·¼ ë¶ˆê°€ ë¬¸ì„œ í•„í„°ë§
```

**9ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ê²°ê³¼ í‘œì‹œ**
```
[SearchAPI Response] â†’ [searchService] â†’ [useSearch Hook] â†’ [SearchPage]
- API ì‘ë‹µ ìˆ˜ì‹  ë° SearchResponse íƒ€ì… ë³€í™˜
- useSearch Hookì´ searchResults ìƒíƒœ ì—…ë°ì´íŠ¸
- SearchPageê°€ ResultList ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
- ê²€ìƒ‰ ì‹œê°„, ì´ ê°œìˆ˜, ê²€ìƒ‰ íƒ€ì… ì •ë³´ í‘œì‹œ
- í˜ì´ì§€ë„¤ì´ì…˜ ë° "ë”ë³´ê¸°" ê¸°ëŠ¥ ì§€ì›
```

**10ë‹¨ê³„: íŒŒì¼ë·°ì–´ í†µí•© ì¡°íšŒ**
```
[ResultList] â†’ [FileViewer] â†’ [DocumentAPI] â†’ [FileService]
- ì‚¬ìš©ìê°€ ê²€ìƒ‰ ê²°ê³¼ í•­ëª© í´ë¦­
- handleFileView() í•¨ìˆ˜ í˜¸ì¶œë¡œ FileViewer ëª¨ë‹¬ ì˜¤í”ˆ
- convertSearchResultToDocument()ë¡œ ë¬¸ì„œ ê°ì²´ ë³€í™˜
- FileViewerê°€ HWP/PDF íŒŒì¼ ë Œë”ë§
- ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì œê³µ (ê¶Œí•œ ì¬í™•ì¸ í›„)
```

#### 2.2.3 ê²€ìƒ‰ íƒ€ì…ë³„ íŠ¹í™” ì²˜ë¦¬

**Vector Only ê²€ìƒ‰ (vector_only)**
```
[useSearch] â†’ [vectorSearch API] â†’ [EmbeddingService] â†’ [PGVector]
- ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ë§Œ ìˆ˜í–‰
- ì‚¬ìš©ì ì§ˆë¬¸ì„ ì„ë² ë”© ë²¡í„°ë¡œ ë³€í™˜
- PGVector í™•ì¥ì„ í†µí•œ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
- similarity_threshold(0.5) ì´ìƒ ê²°ê³¼ë§Œ ë°˜í™˜
```

**Keyword Only ê²€ìƒ‰ (keyword_only)**
```
[useSearch] â†’ [keywordSearch API] â†’ [KeywordMatcher] â†’ [PostgreSQL]
- í‚¤ì›Œë“œ ì •í™• ë§¤ì¹­ ê²€ìƒ‰ë§Œ ìˆ˜í–‰
- Kiwi NLPë¡œ ì¶”ì¶œëœ í‚¤ì›Œë“œ ê¸°ì¤€ ê²€ìƒ‰
- PostgreSQL LIKE/ILIKE íŒ¨í„´ ë§¤ì¹­
- ì •í™•ë„ ë†’ì€ ê²°ê³¼ ìš°ì„  ë°˜í™˜
```

**Hybrid ê²€ìƒ‰ (ê¸°ë³¸ê°’)**
```
[useSearch] â†’ [hybridSearch API] â†’ [Multi-Engine Fusion]
- 3ê°€ì§€ ê²€ìƒ‰ ì—”ì§„ ê²°ê³¼ ìœµí•©
- ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì¢…í•© ì ìˆ˜ ê³„ì‚°
- ë‹¤ì–‘í•œ ê²€ìƒ‰ ì˜ë„ ë™ì‹œ ë§Œì¡±
- ìµœì ì˜ ê²€ìƒ‰ ê²°ê³¼ ì œê³µ
```
- container_id, file íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì—…ë¡œë“œ ìš”ì²­ ì²˜ë¦¬
- FileValidatorê°€ íŒŒì¼ í¬ê¸°(20MB), í™•ì¥ì, MIME íƒ€ì… ê²€ì¦
- VirusScannerê°€ ì•…ì„± ì½”ë“œ ê²€ì‚¬ ìˆ˜í–‰ (ì„ íƒì )
```

**4ë‹¨ê³„: ë¬¸ì„œ ì²˜ë¦¬ ë° ë©”íƒ€ë°ì´í„° ìƒì„±**
```
[DocumentUploadAPI] â†’ [DocumentProcessorService] â†’ [KoreanNLPService] â†’ [MetadataExtractor]
- DocumentProcessorServiceê°€ íŒŒì¼ ì €ì¥ ë° ë©”íƒ€ë°ì´í„° ì¶”ì¶œ ì‹œì‘
- í…ìŠ¤íŠ¸ ì¶”ì¶œ: PDF, DOCX, TXT, HWP ë“± ì§€ì›
- KoreanNLPServiceê°€ í•œêµ­ì–´ í˜•íƒœì†Œ ë¶„ì„ ë° í‚¤ì›Œë“œ ì¶”ì¶œ
- MetadataExtractorê°€ ë¬¸ì„œ ì œëª©, ì‘ì„±ì, ìƒì„±ì¼ ë“± ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
- ë¬¸ì„œ í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° (í…ìŠ¤íŠ¸ ê¸¸ì´, í•œêµ­ì–´ ë¹„ìœ¨, êµ¬ì¡°í™” ì •ë„)
```

**5ë‹¨ê³„: ë²¡í„° ì„ë² ë”© ë° ì²­í‚¹**
```
[DocumentProcessorService] â†’ [TextChunker] â†’ [EmbeddingService] â†’ [VectorStoreService]
- TextChunkerê°€ ë¬¸ì„œë¥¼ ì˜ë¯¸ ë‹¨ìœ„ë¡œ ì²­í‚¹ (ë³´í†µ 500-1000ì)
- EmbeddingServiceê°€ ê° ì²­í¬ì— ëŒ€í•´ 1024ì°¨ì› ë²¡í„° ì„ë² ë”© ìƒì„±
- VectorStoreServiceê°€ ë²¡í„°ë¥¼ pgvectorì— ì €ì¥
- VsDocContentsIndex, VsFileMetadataIndex, VsPreprocessingResultIndex í…Œì´ë¸”ì— ì €ì¥
```

**6ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë° ì»¨í…Œì´ë„ˆ ì—°ê²°**
```
[VectorStoreService] â†’ [FileStorageService] â†’ [DatabaseTransactionManager]
- FileStorageServiceê°€ TbFileBssInfo í…Œì´ë¸”ì— ê¸°ë³¸ ì •ë³´ ì €ì¥
  * file_name, file_size, file_extension, file_hash
  * knowledge_container_id (ì„ íƒëœ ì»¨í…Œì´ë„ˆ ì—°ê²°)
  * uploaded_by, upload_date
- TbFileDtlInfo í…Œì´ë¸”ì— ìƒì„¸ ì •ë³´ ì €ì¥
  * text_content, korean_analysis_result, quality_metrics
  * chunk_count, processing_time
- íŠ¸ëœì­ì…˜ìœ¼ë¡œ ëª¨ë“  í…Œì´ë¸” ì €ì¥ ë³´ì¥
```

**7ë‹¨ê³„: ì—…ë¡œë“œ ì™„ë£Œ ë° ê²°ê³¼ ë°˜í™˜**
```
[DatabaseTransactionManager] â†’ [DocumentUploadAPI] â†’ [UploadPage] â†’ [NotificationService]
- ëª¨ë“  ì²˜ë¦¬ ì™„ë£Œ í›„ UploadResult ì‘ë‹µ ìƒì„±
- document_id, container_path, processing_stats í¬í•¨
- korean_analysis (í˜•íƒœì†Œ, í‚¤ì›Œë“œ, ê°ì •) ê²°ê³¼ í¬í•¨
- UploadPageì—ì„œ ì—…ë¡œë“œ ì„±ê³µ í™”ë©´ í‘œì‹œ
- NotificationServiceê°€ ê´€ë ¨ íŒ€ì›ë“¤ì—ê²Œ ìƒˆ ë¬¸ì„œ ì•Œë¦¼ ë°œì†¡ (ì„ íƒì )
```
- FileValidatorê°€ íŒŒì¼ í¬ê¸°(20MB ì œí•œ), í˜•ì‹(PDF, DOCX, TXT, HWP ë“±), ì´ë¦„ ê²€ì¦
- VirusScannerê°€ ì•…ì„±ì½”ë“œ ê²€ì‚¬ ìˆ˜í–‰ (ì„ íƒì )
```

**4ë‹¨ê³„: íŒŒì¼ ì €ì¥ ë° ë©”íƒ€ë°ì´í„° ìƒì„±**
```
[DocumentUploadAPI] â†’ [FileStorageService] â†’ [DatabaseService]
- FileStorageServiceê°€ ì»¨í…Œì´ë„ˆë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¡œ íŒŒì¼ ì €ì¥
  ê²½ë¡œ: /uploads/container_{container_id}/{year}/{month}/{uuid}_{filename}
- TbFileBssInfo í…Œì´ë¸”ì— íŒŒì¼ ê¸°ë³¸ ì •ë³´ ì €ì¥:
  * file_id, original_filename, stored_filename, file_path
  * file_size, file_extension, file_hash, upload_date
  * knowledge_container_id (ì„ íƒëœ ì»¨í…Œì´ë„ˆ), uploader_id
- TbFileDtlInfo í…Œì´ë¸”ì— ë¬¸ì„œ ìƒì„¸ ì •ë³´ ì¤€ë¹„ (í›„ì† ë‹¨ê³„ì—ì„œ ì—…ë°ì´íŠ¸)
```

**5ë‹¨ê³„: í•œêµ­ì–´ í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ì „ì²˜ë¦¬**
```
[DocumentProcessor] â†’ [KoreanNLPService] â†’ [ContentExtractor]
- ContentExtractorê°€ íŒŒì¼ í˜•ì‹ë³„ë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (PyPDF2, python-docx, olefile)
- KoreanNLPServiceê°€ kiwipiepyë¥¼ ì‚¬ìš©í•˜ì—¬ í•œêµ­ì–´ í˜•íƒœì†Œ ë¶„ì„
- í…ìŠ¤íŠ¸ ì •ê·œí™”, ë¶ˆìš©ì–´ ì œê±°, í‚¤ì›Œë“œ ì¶”ì¶œ ì‹¤í–‰
- ë¬¸ì„œ í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° (í•œêµ­ì–´ ë¹„ìœ¨, ê°€ë…ì„±, ì •ë³´ ë°€ë„)
```

**6ë‹¨ê³„: ë¬¸ì„œ ë¶„í•  ë° ë²¡í„° ì„ë² ë”©**
```
[KoreanNLPService] â†’ [ChunkingService] â†’ [EmbeddingService] â†’ [VectorStoreService]
- ChunkingServiceê°€ ë¬¸ì„œë¥¼ ì˜ë¯¸ ë‹¨ìœ„ë¡œ ë¶„í•  (1000-2000 í† í°, 200í† í° ì˜¤ë²„ë©)
- EmbeddingServiceê°€ AWS Bedrock ë˜ëŠ” OpenAI APIë¡œ 1024ì°¨ì› ì„ë² ë”© ìƒì„±
- VectorStoreServiceê°€ PostgreSQL pgvectorì— ë²¡í„° ë° ë©”íƒ€ë°ì´í„° ì €ì¥:
  * VsDocContentsIndex: ì²­í¬ë³„ ë²¡í„° ë° í…ìŠ¤íŠ¸ ë‚´ìš©
  * VsFileMetadataIndex: íŒŒì¼ ì „ì²´ ë©”íƒ€ë°ì´í„° ë²¡í„°
  * VsPreprocessingResultIndex: ì „ì²˜ë¦¬ ê²°ê³¼ ë° í’ˆì§ˆ ì •ë³´
```

**7ë‹¨ê³„: ë¬¸ì„œ ë¶„ë¥˜ ë° ë©”íƒ€ë°ì´í„° ì™„ì„±**
```
[VectorStoreService] â†’ [DocumentClassifier] â†’ [CategoryService] â†’ [DatabaseService]
- DocumentClassifierê°€ ë¬¸ì„œ ë‚´ìš© ë¶„ì„í•˜ì—¬ ìë™ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
  * ì¹´í…Œê³ ë¦¬: ì¼ë°˜ë¬¸ì„œ, ê¸°ìˆ ë¬¸ì„œ, ì •ì±…ë¬¸ì„œ, ë§¤ë‰´ì–¼ (ë©”íƒ€ë°ì´í„°ë¡œ ì €ì¥)
- CategoryServiceê°€ ë¶€ì„œë³„ ì§€ì‹ ë¶„ë¥˜ ì²´ê³„ì— ë”°ë¼ ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ í• ë‹¹
- TbFileDtlInfo í…Œì´ë¸” ì—…ë°ì´íŠ¸:
  * document_title, document_summary, keywords, content_text
  * document_category, classification_confidence, quality_score
  * korean_morphs, chunk_count, vector_count
```

**8ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ì—°ê²° ë° ê¶Œí•œ ì„¤ì •**
```
[DatabaseService] â†’ [ContainerAssignmentService] â†’ [PermissionService]
- ContainerAssignmentServiceê°€ ì„ íƒëœ ì»¨í…Œì´ë„ˆì— ë¬¸ì„œ í• ë‹¹
- PermissionServiceê°€ ì»¨í…Œì´ë„ˆ ê¶Œí•œ ì •ì±…ì— ë”°ë¼ ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ ì„¤ì •
- ìƒìœ„ ì»¨í…Œì´ë„ˆ ìƒì† ê¶Œí•œ ì ìš© (DEPARTMENT ë¬¸ì„œëŠ” ìƒìœ„ DIVISIONì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥)
- ì‚¬ìš©ìë³„ ë¬¸ì„œ ì ‘ê·¼ ë¡œê·¸ ì´ˆê¸°í™”
```

**9ë‹¨ê³„: ì—…ë¡œë“œ ì™„ë£Œ ë° ì‘ë‹µ**
```
[DocumentUploadAPI] â†’ [NotificationService] â†’ [UploadPage]
- DocumentUploadAPIê°€ ì—…ë¡œë“œ ì™„ë£Œ ì‘ë‹µ ë°˜í™˜:
  * document_id, container_path, processing_stats
  * korean_analysis, quality_metrics, classification_result
- NotificationServiceê°€ ê´€ë ¨ íŒ€ì›ë“¤ì—ê²Œ ìƒˆ ë¬¸ì„œ ì•Œë¦¼ ë°œì†¡ (ì„ íƒì )
- UploadPageê°€ ì„±ê³µ ë©”ì‹œì§€ ë° ì—…ë¡œë“œëœ ë¬¸ì„œ ì •ë³´ í‘œì‹œ
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì¤‘ë³µ ë¬¸ì„œ íƒì§€ ë° í’ˆì§ˆ ê°œì„  ì œì•ˆ ì‹¤í–‰
```

#### 2.1.3 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì—°ê³„

**íŒŒì¼ ê¸°ë³¸ ì •ë³´ (TbFileBssInfo)**
```sql
INSERT INTO tb_file_bss_info (
    file_id, original_filename, stored_filename, file_path,
    file_size, file_extension, file_hash, upload_date,
    knowledge_container_id, uploader_id, file_status
) VALUES (?, ?, ?, ?, ?, ?, ?, NOW(), ?, ?, 'ACTIVE')
```

**ë²¡í„° ì €ì¥ (VsDocContentsIndex)**
```sql
INSERT INTO vs_doc_contents_index (
    content_id, file_id, chunk_sequence, chunk_text,
    content_vector, chunk_metadata, knowledge_container_id
) VALUES (?, ?, ?, ?, ?, ?, ?)
```

**ì»¨í…Œì´ë„ˆ ê¶Œí•œ ì—°ê³„ (TbKnowledgeContainers)**
```sql
SELECT hierarchy_path, access_level, container_type
FROM tb_knowledge_containers 
WHERE container_id = ? AND is_active = true
```

#### 2.1.4 ì˜ˆì™¸ ì‹œë‚˜ë¦¬ì˜¤ ë° ì²˜ë¦¬

- **ì»¨í…Œì´ë„ˆ ë¯¸ì„ íƒ**: "ì—…ë¡œë“œí•  ì§€ì‹ ì»¨í…Œì´ë„ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" ì˜¤ë¥˜ ë©”ì‹œì§€
- **ê¶Œí•œ ë¶€ì¡±**: "ì„ íƒí•œ ì»¨í…Œì´ë„ˆì— ì—…ë¡œë“œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤" (Container Access Denied)
- **íŒŒì¼ í˜•ì‹ ì˜¤ë¥˜**: "ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤" (Supported: PDF, DOCX, TXT, HWP)
- **ì¤‘ë³µ íŒŒì¼**: "ë™ì¼í•œ íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤" + ê¸°ì¡´ íŒŒì¼ ì •ë³´ í‘œì‹œ
- **ì €ì¥ ê³µê°„ ë¶€ì¡±**: "ì»¨í…Œì´ë„ˆ ì €ì¥ ìš©ëŸ‰ì´ ë¶€ì¡±í•©ë‹ˆë‹¤" + ìš©ëŸ‰ ì •ë³´ í‘œì‹œ
- **ë²¡í„° ìƒì„± ì‹¤íŒ¨**: "ë¬¸ì„œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤" + ì¬ì‹œë„ ì˜µì…˜ ì œê³µ

#### 2.1.5 UI/UX ìš”êµ¬ì‚¬í•­

**ì»¨í…Œì´ë„ˆ ì„ íƒ ì¸í„°í˜ì´ìŠ¤**
```
ğŸ“ ê¸°ì—… ì¡°ì§ (ROOT)
â”œâ”€â”€ ğŸ“ CEOì§ì† (DIVISION)
â”‚   â”œâ”€â”€ ğŸ“ ì¸ì‚¬ì „ëµíŒ€ (DEPARTMENT) âœ… ì—…ë¡œë“œ ê°€ëŠ¥
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ì±„ìš©íŒ€ (TEAM) âœ… ì—…ë¡œë“œ ê°€ëŠ¥
â”‚   â”‚   â””â”€â”€ ğŸ“ êµìœ¡íŒ€ (TEAM) âŒ ê¶Œí•œ ì—†ìŒ
â”‚   â””â”€â”€ ğŸ“ ê¸°íšíŒ€ (DEPARTMENT) âœ… ì—…ë¡œë“œ ê°€ëŠ¥
â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€ (DIVISION)
â”‚   â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì„œë¹„ìŠ¤íŒ€ (DEPARTMENT) âœ… ì—…ë¡œë“œ ê°€ëŠ¥
â”‚   â””â”€â”€ ğŸ“ MSì„œë¹„ìŠ¤íŒ€ (DEPARTMENT) âŒ ê¶Œí•œ ì—†ìŒ
â””â”€â”€ ğŸ“ CTIì‚¬ì—…ë³¸ë¶€ (DIVISION) âŒ ì ‘ê·¼ ë¶ˆê°€
```

**ì—…ë¡œë“œ ì§„í–‰ ìƒíƒœ í‘œì‹œ**
```
1. âœ… íŒŒì¼ ê²€ì¦ ì™„ë£Œ
2. âœ… ê¶Œí•œ í™•ì¸ ì™„ë£Œ  
3. âœ… íŒŒì¼ ì €ì¥ ì™„ë£Œ
4. ğŸ”„ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì¤‘... (45%)
5. â³ ë²¡í„° ìƒì„± ì¤‘...
6. â³ ì»¨í…Œì´ë„ˆ ë“±ë¡ ì¤‘...
```

### 2.2 UC002: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ

#### 2.2.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                   |
| ---------- | ------------------------------------ |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ                           |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì                               |
| **ëª©ì **     | 20MB ì´ìƒ 100MB ì´í•˜ì˜ ëŒ€ìš©ëŸ‰ ë¬¸ì„œë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬ |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ, ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ê¶Œí•œ ë³´ìœ           |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | íŒŒì¼ì´ ë°±ê·¸ë¼ìš´ë“œ íì— ë“±ë¡ë˜ê³  ì²˜ë¦¬ ìƒíƒœë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŒ    |

#### 2.2.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ëŒ€ìš©ëŸ‰ íŒŒì¼ ê°ì§€ ë° í ë“±ë¡**
```
[ì‚¬ìš©ì] â†’ [LargeFileUploadController] â†’ [TaskQueueService]
- íŒŒì¼ í¬ê¸°ê°€ 20MB ì´ìƒì„ì„ ê°ì§€
- LargeFileUploadControllerê°€ ì¦‰ì‹œ ì‘ë‹µí•˜ì—¬ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ì•ˆë‚´
- TaskQueueServiceì— LargeFileProcessingTask ìƒì„± ë° ë“±ë¡
- ì‚¬ìš©ìì—ê²Œ Task ID ë°˜í™˜í•˜ì—¬ ì²˜ë¦¬ ìƒíƒœ ì¶”ì  ê°€ëŠ¥í•˜ë„ë¡ í•¨
```

**2ë‹¨ê³„: ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ ì‹œì‘**
```
[TaskQueueService] â†’ [LargeFileProcessor] â†’ [ProgressTracker]
- LargeFileProcessorê°€ íì—ì„œ íƒœìŠ¤í¬ ìˆ˜ì‹ 
- ProgressTrackerë¥¼ í†µí•´ ì²˜ë¦¬ ì§„í–‰ë¥  ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ë°©ì‹ ì ìš©
- ë™ì‹œ ì²˜ë¦¬ ì„¸ë§ˆí¬ì–´ë¥¼ í†µí•´ ìµœëŒ€ 8ê°œ íŒŒì¼ê¹Œì§€ ë³‘ë ¬ ì²˜ë¦¬
```

**3ë‹¨ê³„: ì ì‘í˜• ì²­í‚¹ ì „ëµ ì ìš©**
```
[LargeFileProcessor] â†’ [AdaptiveChunkingService] â†’ [KoreanNLPService]
- íŒŒì¼ í¬ê¸°ì— ë”°ë¼ ì²­í‚¹ ì „ëµ ê²°ì • (50MB ì´ìƒì€ 5000í† í°, ë¯¸ë§Œì€ 2000í† í°)
- AdaptiveChunkingServiceê°€ ë¬¸ì„œ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ ìµœì  ë¶„í• ì  ê²°ì •
- KoreanNLPServiceë¥¼ í†µí•´ ë¬¸ì¥ ê²½ê³„, ë‹¨ë½ ê²½ê³„ ê³ ë ¤
- ì²­í¬ê°„ ê²¹ì¹¨ ì²˜ë¦¬ë¡œ ë¬¸ë§¥ ì •ë³´ ë³´ì¡´
```

**4ë‹¨ê³„: ë°°ì¹˜ ë²¡í„°í™” ì²˜ë¦¬**
```
[AdaptiveChunkingService] â†’ [BatchEmbeddingService] â†’ [VectorStoreService]
- BatchEmbeddingServiceê°€ ì—¬ëŸ¬ ì²­í¬ë¥¼ ë°°ì¹˜ë¡œ ì²˜ë¦¬í•˜ì—¬ API í˜¸ì¶œ ìµœì í™”
- API ì œí•œì„ ê³ ë ¤í•œ Rate Limiting ì ìš©
- ì‹¤íŒ¨í•œ ì²­í¬ì— ëŒ€í•œ ì¬ì‹œë„ ë¡œì§ êµ¬í˜„
- VectorStoreServiceê°€ ë°°ì¹˜ ë‹¨ìœ„ë¡œ ë²¡í„° ì €ì¥
```

**5ë‹¨ê³„: ì²˜ë¦¬ ì™„ë£Œ ë° ì•Œë¦¼**
```
[VectorStoreService] â†’ [NotificationService] â†’ [ProgressTracker]
- ëª¨ë“  ì²­í¬ ì²˜ë¦¬ ì™„ë£Œ í›„ NotificationServiceë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
- ProgressTrackerì— ìµœì¢… ì™„ë£Œ ìƒíƒœ ì—…ë°ì´íŠ¸
- ì²˜ë¦¬ í†µê³„ ë° í’ˆì§ˆ ì§€í‘œ ìƒì„±
- ì‹¤íŒ¨í•œ ì²­í¬ê°€ ìˆëŠ” ê²½ìš° ë¶€ë¶„ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬
```

### 2.3 UC003: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰

#### 2.3.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                               |
| ---------- | -------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰                         |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì                           |
| **ëª©ì **     | ë²¡í„° ê²€ìƒ‰ê³¼ í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ê²°í•©í•˜ì—¬ ì •í™•í•œ ë¬¸ì„œ ê²€ìƒ‰ ì œê³µ |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ, ê²€ìƒ‰ ëŒ€ìƒ ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ê¶Œí•œ ë³´ìœ    |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ê´€ë ¨ì„± ë†’ì€ ë¬¸ì„œ ëª©ë¡ì´ ì •í™•ë„ ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ë°˜í™˜ë¨   |

#### 2.3.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ê²€ìƒ‰ ì¿¼ë¦¬ ì „ì²˜ë¦¬**
```
[ì‚¬ìš©ì] â†’ [SearchController] â†’ [QueryPreprocessor]
                              â†’ [IntentClassifier]
- ì‚¬ìš©ìê°€ ê²€ìƒ‰ì–´ ì…ë ¥ ë° ê²€ìƒ‰ ì‹¤í–‰
- QueryPreprocessorê°€ í•œêµ­ì–´ ì¿¼ë¦¬ ì •ê·œí™” ë° í‚¤ì›Œë“œ ì¶”ì¶œ
- IntentClassifierê°€ ê²€ìƒ‰ ì˜ë„ ë¶„ë¥˜ (ë¬¸ì„œ ê²€ìƒ‰/ì§ˆì˜ì‘ë‹µ/ìš”ì•½ ìš”ì²­)
- ê²€ìƒ‰ ì˜ë„ì— ë”°ë¼ ì ì ˆí•œ ì„œë¹„ìŠ¤ ë¼ìš°íŒ… ê²°ì •
```

**2ë‹¨ê³„: ê¶Œí•œ ê¸°ë°˜ ì»¨í…Œì´ë„ˆ í•„í„°ë§**
```
[SearchController] â†’ [PermissionManager] â†’ [ContainerAccessFilter]
- PermissionManagerê°€ ì‚¬ìš©ìì˜ ì»¨í…Œì´ë„ˆë³„ ì ‘ê·¼ ê¶Œí•œ í™•ì¸
- ContainerAccessFilterê°€ ê²€ìƒ‰ ë²”ìœ„ë¥¼ í—ˆìš©ëœ ì»¨í…Œì´ë„ˆë¡œ ì œí•œ
- ê³„ì¸µí˜• ê¶Œí•œ êµ¬ì¡°ì— ë”°ë¼ ìƒìœ„ ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ì‹œ í•˜ìœ„ ì»¨í…Œì´ë„ˆ í¬í•¨
- ê²€ìƒ‰ ê²°ê³¼ì— ì»¨í…Œì´ë„ˆ ì •ë³´ í¬í•¨í•˜ì—¬ ì¶œì²˜ ëª…í™•í™”
```

**3ë‹¨ê³„: ë³‘ë ¬ ë²¡í„° ë° í‚¤ì›Œë“œ ê²€ìƒ‰**
```
[SearchController] â†’ [HybridSearchEngine] â†’ [VectorSearchService]
                                          â†’ [KeywordSearchService]

// ë²¡í„° ê²€ìƒ‰ (ë¹„ë™ê¸°)
[VectorSearchService] â†’ [EmbeddingService] â†’ [PostgreSQLVectorDB]
- ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ ë²¡í„°ë¡œ ë³€í™˜
- pgvectorë¥¼ ì‚¬ìš©í•œ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰
- ìœ ì‚¬ë„ ì„ê³„ê°’ 0.75 ì´ìƒ ê²°ê³¼ë§Œ ì„ ë³„

// í‚¤ì›Œë“œ ê²€ìƒ‰ (ë¹„ë™ê¸°)  
[KeywordSearchService] â†’ [PostgreSQLFullTextSearch]
- PostgreSQL Full-Text Search í™œìš©
- í•œêµ­ì–´ ì–´ê°„ ì¶”ì¶œ ë° ë™ì˜ì–´ í™•ì¥
- TF-IDF ê¸°ë°˜ ê´€ë ¨ì„± ì ìˆ˜ ê³„ì‚°
```

**4ë‹¨ê³„: ê²€ìƒ‰ ê²°ê³¼ í•˜ì´ë¸Œë¦¬ë“œ ìŠ¤ì½”ì–´ë§**
```
[HybridSearchEngine] â†’ [ResultMerger] â†’ [RelevanceRanker]
- ResultMergerê°€ ë²¡í„° ê²€ìƒ‰ê³¼ í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê²°í•©
- ê°€ì¤‘ì¹˜ ì ìš©: ë²¡í„° ì ìˆ˜ 70%, í‚¤ì›Œë“œ ì ìˆ˜ 30%
- RelevanceRankerê°€ ìµœì¢… ê´€ë ¨ì„± ì ìˆ˜ ê³„ì‚° ë° ì •ë ¬
- ì¤‘ë³µ ë¬¸ì„œ ì œê±° ë° ë‹¤ì–‘ì„± í™•ë³´ë¥¼ ìœ„í•œ ì¬ë­í‚¹
```

**5ë‹¨ê³„: ê²°ê³¼ í¬ë§·íŒ… ë° ì‘ë‹µ**
```
[RelevanceRanker] â†’ [SearchResultFormatter] â†’ [SearchController]
- SearchResultFormatterê°€ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì‚¬ìš©ì ì¹œí™”ì  í˜•íƒœë¡œ í¬ë§·
- ë¬¸ì„œ ì œëª©, ìš”ì•½, ê´€ë ¨ì„± ì ìˆ˜, ì¶œì²˜ ì»¨í…Œì´ë„ˆ ì •ë³´ í¬í•¨
- ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… ë° ìŠ¤ë‹ˆí« ìƒì„±
- í˜ì´ì§€ë„¤ì´ì…˜ ë° ì •ë ¬ ì˜µì…˜ ì ìš©
```

### 2.4 UC004: RAG ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ

#### 2.4.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                 |
| ---------- | ---------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | RAG ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ                        |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì                             |
| **ëª©ì **     | ì‚¬ìš©ì ì§ˆë¬¸ì— ëŒ€í•´ ì§€ì‹ ë² ì´ìŠ¤ë¥¼ í™œìš©í•œ ì •í™•í•œ ë‹µë³€ ì œê³µ   |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ, ì§ˆì˜ì‘ë‹µ ì„œë¹„ìŠ¤ ì´ìš© ê¶Œí•œ ë³´ìœ        |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ê´€ë ¨ ë¬¸ì„œë¥¼ ì°¸ì¡°í•œ ì •í™•í•˜ê³  ìƒì„¸í•œ ë‹µë³€ì´ ì¶œì²˜ì™€ í•¨ê»˜ ì œê³µë¨ |

#### 2.4.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì§ˆë¬¸ ì˜ë„ ë¶„ì„ ë° ì „ì²˜ë¦¬**
```
[ì‚¬ìš©ì] â†’ [ChatController] â†’ [QuestionAnalyzer]
                            â†’ [ConversationManager]
- ì‚¬ìš©ìê°€ ìì—°ì–´ ì§ˆë¬¸ ì…ë ¥
- QuestionAnalyzerê°€ ì§ˆë¬¸ ìœ í˜• ë¶„ë¥˜ (ì‚¬ì‹¤í˜•/ì ˆì°¨í˜•/ë¶„ì„í˜•/ì˜ê²¬í˜•)
- ConversationManagerê°€ ì´ì „ ëŒ€í™” ë§¥ë½ í™•ì¸ ë° ì„¸ì…˜ ê´€ë¦¬
- ì§ˆë¬¸ ë³µì¡ë„ì— ë”°ë¥¸ ì²˜ë¦¬ ì „ëµ ê²°ì •
```

**2ë‹¨ê³„: ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ (Retrieval)**
```
[QuestionAnalyzer] â†’ [RAGRetriever] â†’ [HybridSearchEngine]
- RAGRetrieverê°€ ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¿¼ë¦¬ ìƒì„±
- HybridSearchEngineì„ í†µí•´ ë²¡í„° ê²€ìƒ‰ ë° í‚¤ì›Œë“œ ê²€ìƒ‰ ìˆ˜í–‰
- ì§ˆë¬¸ ìœ í˜•ì— ë”°ë¼ ê²€ìƒ‰ ì „ëµ ì¡°ì • (ì •í™•ì„± vs í¬ê´„ì„±)
- Top-K (5-10ê°œ) ê´€ë ¨ ë¬¸ì„œ ì²­í¬ ì„ ë³„
```

**3ë‹¨ê³„: ì»¨í…ìŠ¤íŠ¸ êµ¬ì„± ë° ê²€ì¦**
```
[RAGRetriever] â†’ [ContextComposer] â†’ [RelevanceValidator]
- ContextComposerê°€ ê²€ìƒ‰ëœ ë¬¸ì„œë“¤ì„ ì§ˆë¬¸ê³¼ì˜ ê´€ë ¨ì„± ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
- ë¬¸ì„œê°„ ì¤‘ë³µ ì •ë³´ ì œê±° ë° ìƒí˜¸ ë³´ì™„ì  ì •ë³´ í†µí•©
- RelevanceValidatorê°€ ê° ë¬¸ì„œì˜ ì‹ ë¢°ë„ ë° ìµœì‹ ì„± ê²€ì¦
- ìµœëŒ€ í† í° í•œê³„(4000í† í°) ë‚´ì—ì„œ ìµœì  ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
```

**4ë‹¨ê³„: LLM ê¸°ë°˜ ë‹µë³€ ìƒì„± (Generation)**
```
[ContextComposer] â†’ [MultiLLMAnswerGenerator] â†’ [BedrockClaudeService]
                                             â†’ [OpenAIService]
                                             â†’ [AzureOpenAIService]
- MultiLLMAnswerGeneratorê°€ ì§ˆë¬¸ ìœ í˜•ì— ë”°ë¼ ìµœì  LLM ì„ íƒ
- BedrockClaudeService (ë³µì¡í•œ ì¶”ë¡ ), OpenAIService (ì¼ë°˜ ì§ˆë¬¸) ë“±
- í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ í†µí•´ í•œêµ­ì–´ ë‹µë³€ í’ˆì§ˆ ìµœì í™”
- ì¶œì²˜ ì¸ìš© ë° ì‹ ë¢°ë„ í‘œì‹œ í¬í•¨í•˜ì—¬ ë‹µë³€ ìƒì„±
```

**5ë‹¨ê³„: ë‹µë³€ í’ˆì§ˆ ê²€ì¦ ë° í›„ì²˜ë¦¬**
```
[MultiLLMAnswerGenerator] â†’ [AnswerValidator] â†’ [ResponseFormatter]
- AnswerValidatorê°€ ë‹µë³€ì˜ ì‚¬ì‹¤ ì •í™•ì„± ë° ë…¼ë¦¬ì  ì¼ê´€ì„± ê²€ì¦
- í• ë£¨ì‹œë„¤ì´ì…˜ íƒì§€ ë° ë¶€ì •í™•í•œ ì •ë³´ í•„í„°ë§
- ResponseFormatterê°€ ë‹µë³€ì„ êµ¬ì¡°í™”í•˜ê³  ì¶œì²˜ ë§í¬ ì²¨ë¶€
- ì‚¬ìš©ì í”¼ë“œë°±ì„ ìœ„í•œ í‰ê°€ ì¸í„°í˜ì´ìŠ¤ í¬í•¨
```

**6ë‹¨ê³„: ëŒ€í™” ì´ë ¥ ì €ì¥ ë° í•™ìŠµ**
```
[ResponseFormatter] â†’ [ConversationManager] â†’ [ChatHistoryService]
                                           â†’ [FeedbackCollector]
- ConversationManagerê°€ ì§ˆë¬¸-ë‹µë³€ ìŒì„ ì„¸ì…˜ë³„ë¡œ ì €ì¥
- ChatHistoryServiceì— ëŒ€í™” ì´ë ¥ ì˜êµ¬ ì €ì¥
- FeedbackCollectorê°€ ì‚¬ìš©ì ë§Œì¡±ë„ ìˆ˜ì§‘ ë° í’ˆì§ˆ ê°œì„ ì— í™œìš©
- ë°˜ë³µì  ì§ˆë¬¸ íŒ¨í„´ ë¶„ì„í•˜ì—¬ FAQ ìë™ ìƒì„± ì†ŒìŠ¤ë¡œ í™œìš©
```

### 2.3 UC003: RAG ê¸°ë°˜ AI ì±„íŒ…

#### 2.3.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | RAG (Retrieval-Augmented Generation) ê¸°ë°˜ AI ì±„íŒ… |
| **ì•¡í„°** | ì¼ë°˜ ì‚¬ìš©ì |
| **API ì—”ë“œí¬ì¸íŠ¸** | `POST /api/v1/chat/stream`<br/>`GET /api/v1/chat/sessions`<br/>`POST /api/v1/chat/message`<br/>**`WebSocket /api/v1/transcribe/stream`** ğŸ†• |
| **ëª©ì ** | ì„ íƒëœ ë¬¸ì„œë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ í™œìš©í•˜ì—¬ AIì™€ ëŒ€í™”í•˜ë©° ì •ë³´ íƒìƒ‰ ë° ë‹µë³€ íšë“ (**ìŒì„± ì…ë ¥ ì§€ì›**) |
| **ì „ì œì¡°ê±´** | - ì‚¬ìš©ì JWT ì¸ì¦ ì™„ë£Œ<br/>- ê²€ìƒ‰ì„ í†µí•´ ì„ íƒëœ ë¬¸ì„œ ì¡´ì¬ (ì„ íƒì )<br/>- LLM í”„ë¡œë°”ì´ë” ì—°ê²° (Bedrock/Azure/OpenAI)<br/>- **AWS Transcribe Streaming ì„¤ì •** ğŸ†• |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì‚¬ìš©ì ì§ˆë¬¸ (**í…ìŠ¤íŠ¸ ë˜ëŠ” ìŒì„±**)ì— ëŒ€í•´ ì„ íƒëœ ë¬¸ì„œ ê¸°ë°˜ì˜ ì •í™•í•œ ë‹µë³€ì´ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì œê³µë˜ê³  ì¶œì²˜ê°€ ëª…ì‹œë¨ |

#### 2.3.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ì±„íŒ… í˜ì´ì§€ ì§„ì… ë° RAG ëª¨ë“œ í™œì„±í™”**

```
[SearchPage] â†’ navigate('/chat', {ragMode: true}) â†’ [ChatPage.tsx]
â”‚
â”œâ”€ ì»´í¬ë„ŒíŠ¸ ìœ„ì¹˜: frontend/src/pages/user/ChatPage.tsx
â”œâ”€ ì „ì—­ ìƒíƒœ: useWorkContext(), useSelectedDocuments()
â”‚
â”œâ”€ RAG ëª¨ë“œ í™œì„±í™” ì¡°ê±´:
â”‚  â”œâ”€ workContext.chatState.ragMode === true
â”‚  â”œâ”€ selectedDocuments.length > 0
â”‚  â””â”€ UI í‘œì‹œ: "ğŸ“š ì„ íƒëœ ë¬¸ì„œ: Nê°œ"
â”‚
â”œâ”€ ì„¸ì…˜ ì´ˆê¸°í™”:
â”‚  â”œâ”€ useChatSession Hook
â”‚  â”œâ”€ GET /api/v1/chat/sessions (ê¸°ì¡´ ì„¸ì…˜ ë¡œë“œ)
â”‚  â””â”€ ì‹ ê·œ ì„¸ì…˜ ìƒì„± ë˜ëŠ” ì´ì–´ê°€ê¸° ì„ íƒ
â”‚
â””â”€ ì„ íƒ ë¬¸ì„œ í‘œì‹œ:
   â”œâ”€ [SelectedDocumentsDisplay ì»´í¬ë„ŒíŠ¸]
   â”œâ”€ ë¬¸ì„œ ëª©ë¡ (ë°°ì§€ í˜•íƒœ)
   â”œâ”€ ì œê±° ë²„íŠ¼ (ê°œë³„ ì‚­ì œ ê°€ëŠ¥)
   â””â”€ "ëª¨ë‘ ì œê±°" ë²„íŠ¼
```

**2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - ì§ˆë¬¸ ì…ë ¥ ë° ì „ì†¡**

```
[ChatInput ì»´í¬ë„ŒíŠ¸] â†’ [useChatSession.sendMessage()] â†’ [chatService.ts]
â”‚
â”œâ”€ ì§ˆë¬¸ ì…ë ¥ UI:
â”‚  â”œâ”€ Textarea (ë©€í‹°ë¼ì¸ ì§€ì›)
â”‚  â”œâ”€ Shift+Enter: ì¤„ë°”ê¿ˆ
â”‚  â”œâ”€ Enter: ì „ì†¡
â”‚  â””â”€ ìµœì†Œ 2ì ê²€ì¦
â”‚
â”œâ”€ ë©”ì‹œì§€ ì „ì†¡ ì¤€ë¹„:
â”‚  â”œâ”€ ë©”ì‹œì§€ íƒ€ì… ê²°ì •:
â”‚  â”‚  â”œâ”€ 'query' (ì¼ë°˜ ì§ˆë¬¸)
â”‚  â”‚  â”œâ”€ 'summary' (ë¬¸ì„œ ìš”ì•½ ìš”ì²­)
â”‚  â”‚  â””â”€ 'analysis' (ë¶„ì„ ìš”ì²­)
â”‚  â”‚
â”‚  â”œâ”€ ì»¨í…ìŠ¤íŠ¸ ë¬¸ì„œ ì •ë³´ í¬í•¨:
â”‚  â”‚  {
â”‚  â”‚    message: string,
â”‚  â”‚    session_id: string,
â”‚  â”‚    rag_mode: true,
â”‚  â”‚    document_ids: string[], // ì„ íƒëœ ë¬¸ì„œ ID ë°°ì—´
â”‚  â”‚    context_mode: 'selected_docs' | 'full_search'
â”‚  â”‚  }
â”‚  â”‚
â”‚  â””â”€ SSE ì—°ê²° ì¤€ë¹„:
â”‚     â””â”€ EventSource ê°ì²´ ìƒì„±
â”‚
â””â”€ ë¡œì»¬ ë©”ì‹œì§€ ì¶”ê°€ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸):
   â””â”€ ë©”ì‹œì§€ ëª©ë¡ì— ì‚¬ìš©ì ë©”ì‹œì§€ ì¦‰ì‹œ í‘œì‹œ
```

**3ë‹¨ê³„: ë°±ì—”ë“œ - ìŠ¤íŠ¸ë¦¬ë° ì±— API ì²˜ë¦¬**

```
POST /api/v1/chat/stream â†’ [ChatService]
â”‚
â”œâ”€ ì„œë¹„ìŠ¤ ìœ„ì¹˜: backend/app/services/chat/
â”‚  â”œâ”€ chat_service.py (ë©”ì¸ ë¡œì§)
â”‚  â”œâ”€ rag_service.py (RAG íŒŒì´í”„ë¼ì¸)
â”‚  â””â”€ session_manager.py (ì„¸ì…˜ ê´€ë¦¬)
â”‚
â”œâ”€ **Phase 1: ì„¸ì…˜ ê´€ë¦¬**
â”‚  â”œâ”€ SessionManager.get_or_create()
â”‚  â”œâ”€ Redisì—ì„œ ì„¸ì…˜ ë¡œë“œ:
â”‚  â”‚  â””â”€ Key: f"chat_session:{session_id}"
â”‚  â”‚  â””â”€ TTL: 1ì‹œê°„
â”‚  â”‚
â”‚  â”œâ”€ ì„¸ì…˜ ë°ì´í„° êµ¬ì¡°:
â”‚  â”‚  {
â”‚  â”‚    session_id: str,
â”‚  â”‚    user_id: str,
â”‚  â”‚    messages: [
â”‚  â”‚      {role: 'user', content: str, timestamp},
â”‚  â”‚      {role: 'assistant', content: str, sources: [...]}
â”‚  â”‚    ],
â”‚  â”‚    context_documents: [...],
â”‚  â”‚    created_at: datetime,
â”‚  â”‚    last_updated: datetime
â”‚  â”‚  }
â”‚  â”‚
â”‚  â””â”€ ëŒ€í™” ì´ë ¥ ìœˆë„ìš°:
â”‚     â””â”€ ìµœê·¼ 5í„´ ìœ ì§€ (ë©”ëª¨ë¦¬ ê´€ë¦¬)
â”‚
â”œâ”€ **Phase 2: RAG ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±**
â”‚  â”‚
â”‚  â”œâ”€ ë¬¸ì„œ ê²€ìƒ‰ ì „ëµ ê²°ì •:
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ [ì „ëµ A: ì„ íƒëœ ë¬¸ì„œ ê¸°ë°˜]
â”‚  â”‚  â”‚  â”œâ”€ document_idsê°€ ìˆëŠ” ê²½ìš°
â”‚  â”‚  â”‚  â”œâ”€ í•´ë‹¹ ë¬¸ì„œì˜ ì²­í¬ ì§ì ‘ ì¡°íšŒ:
â”‚  â”‚  â”‚  â”‚  SELECT chunk_text, keywords
â”‚  â”‚  â”‚  â”‚  FROM doc_extracted_chunks
â”‚  â”‚  â”‚  â”‚  WHERE file_bss_info_sno IN (
â”‚  â”‚  â”‚  â”‚    SELECT file_bss_info_sno 
â”‚  â”‚  â”‚  â”‚    FROM tb_file_bss_info 
â”‚  â”‚  â”‚  â”‚    WHERE file_id IN :document_ids
â”‚  â”‚  â”‚  â”‚  )
â”‚  â”‚  â”‚  â”‚  ORDER BY chunk_index
â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ ë¬¸ì„œë³„ ì²­í¬ ë³‘í•© (ì „ì²´ í…ìŠ¤íŠ¸ ì¬êµ¬ì„±)
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ [ì „ëµ B: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰]
â”‚  â”‚     â”œâ”€ document_idsê°€ ì—†ëŠ” ê²½ìš°
â”‚  â”‚     â”œâ”€ ì‚¬ìš©ì ì§ˆë¬¸ìœ¼ë¡œ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì‹¤í–‰:
â”‚  â”‚     â”‚  â””â”€ POST /api/v1/search/hybrid (ë‚´ë¶€ í˜¸ì¶œ)
â”‚  â”‚     â”‚  â””â”€ Top 20 ê´€ë ¨ ì²­í¬ ì¶”ì¶œ
â”‚  â”‚     â”‚
â”‚  â”‚     â””â”€ ê²€ìƒ‰ ê¸°ë°˜ ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
â”‚  â”‚
â”‚  â”œâ”€ **ì»¨í…ìŠ¤íŠ¸ ìµœì í™”:**
â”‚  â”‚  â”œâ”€ í† í° ê³„ì‚° (tiktoken):
â”‚  â”‚  â”‚  â””â”€ ìµœëŒ€ ì»¨í…ìŠ¤íŠ¸: 8,000 í† í°
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ì²­í¬ ìš°ì„ ìˆœìœ„í™”:
â”‚  â”‚  â”‚  â”œâ”€ ìœ ì‚¬ë„ ì ìˆ˜ ë†’ì€ ìˆœ
â”‚  â”‚  â”‚  â”œâ”€ í‚¤ì›Œë“œ ë§¤ì¹­ ë§ì€ ìˆœ
â”‚  â”‚  â”‚  â””â”€ ìµœì‹  ë¬¸ì„œ ìš°ì„ 
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ì••ì¶• ì „ëµ:
â”‚  â”‚  â”‚  â”œâ”€ ì¤‘ë³µ ì œê±° (ë™ì¼ ë¬¸ì„œ ì—¬ëŸ¬ ì²­í¬)
â”‚  â”‚  â”‚  â”œâ”€ ìš”ì•½ (ë§¤ìš° ê¸´ ì²­í¬)
â”‚  â”‚  â”‚  â””â”€ ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ì¡°ì •
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ì¶œì²˜ ë©”íƒ€ë°ì´í„° ë³´ì¡´:
â”‚  â”‚     â””â”€ {chunk_id, file_id, file_name, page_num}
â”‚  â”‚
â”‚  â””â”€ **ìµœì¢… ì»¨í…ìŠ¤íŠ¸ êµ¬ì¡°:**
â”‚     ```
â”‚     [ë¬¸ì„œ 1: ì œëª©.pdf]
â”‚     í˜ì´ì§€ 1: ... ë‚´ìš© ...
â”‚     í˜ì´ì§€ 3: ... ë‚´ìš© ...
â”‚     
â”‚     [ë¬¸ì„œ 2: ë³´ê³ ì„œ.docx]
â”‚     í˜ì´ì§€ 1-2: ... ë‚´ìš© ...
â”‚     ```
â”‚
â”œâ”€ **Phase 3: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§**
â”‚  â”œâ”€ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±:
â”‚  â”‚  ```
â”‚  â”‚  ë‹¹ì‹ ì€ ê¸°ì—… ì§€ì‹ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.
â”‚  â”‚  ì œê³µëœ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•˜ê³  ìœ ìš©í•œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”.
â”‚  â”‚  
â”‚  â”‚  ê·œì¹™:
â”‚  â”‚  1. ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš©ì€ ì¶”ì¸¡í•˜ì§€ ë§ˆì„¸ìš”
â”‚  â”‚  2. ë‹µë³€ ì‹œ ì¶œì²˜ë¥¼ ëª…í™•íˆ ë°í˜€ì£¼ì„¸ìš”
â”‚  â”‚  3. ì „ë¬¸ ìš©ì–´ëŠ” ì‰½ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”
â”‚  â”‚  4. í•œêµ­ì–´ë¡œ ë‹µë³€í•˜ì„¸ìš”
â”‚  â”‚  ```
â”‚  â”‚
â”‚  â”œâ”€ ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸:
â”‚  â”‚  ```
â”‚  â”‚  [ì»¨í…ìŠ¤íŠ¸]
â”‚  â”‚  {êµ¬ì„±ëœ ë¬¸ì„œ ì»¨í…ìŠ¤íŠ¸}
â”‚  â”‚  
â”‚  â”‚  [ëŒ€í™” ì´ë ¥]
â”‚  â”‚  User: {ì´ì „ ì§ˆë¬¸}
â”‚  â”‚  Assistant: {ì´ì „ ë‹µë³€}
â”‚  â”‚  ...
â”‚  â”‚  
â”‚  â”‚  [í˜„ì¬ ì§ˆë¬¸]
â”‚  â”‚  {ì‚¬ìš©ì í˜„ì¬ ì§ˆë¬¸}
â”‚  â”‚  
â”‚  â”‚  ìœ„ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ë‹µë³€í•´ì£¼ì„¸ìš”.
â”‚  â”‚  ```
â”‚  â”‚
â”‚  â””â”€ í”„ë¡¬í”„íŠ¸ ìµœì í™”:
â”‚     â”œâ”€ ì§ˆë¬¸ ìœ í˜• ê°ì§€ (ë¶„ë¥˜, ìš”ì•½, ë¹„êµ, ì„¤ëª…)
â”‚     â”œâ”€ Few-shot ì˜ˆì œ ì¶”ê°€ (ë³µì¡í•œ ì§ˆë¬¸ ì‹œ)
â”‚     â””â”€ ì¶œì²˜ í¬ë§· ëª…ì‹œ
â”‚
â”œâ”€ **Phase 4: LLM í˜¸ì¶œ ë° ìŠ¤íŠ¸ë¦¬ë°**
â”‚  â”‚
â”‚  â”œâ”€ í”„ë¡œë°”ì´ë” ì„ íƒ (Failover):
â”‚  â”‚  â”œâ”€ 1ìˆœìœ„: AWS Bedrock
â”‚  â”‚  â”‚  â””â”€ anthropic.claude-3-5-sonnet-20240620-v1:0
â”‚  â”‚  â”œâ”€ 2ìˆœìœ„: Azure OpenAI
â”‚  â”‚  â”‚  â””â”€ gpt-4o
â”‚  â”‚  â””â”€ 3ìˆœìœ„: OpenAI
â”‚  â”‚     â””â”€ gpt-4-turbo
â”‚  â”‚
â”‚  â”œâ”€ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ìƒì„±:
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Bedrock Streaming API:
â”‚  â”‚  â”‚  ```python
â”‚  â”‚  â”‚  response = bedrock_client.invoke_model_with_response_stream(
â”‚  â”‚  â”‚    modelId=model_id,
â”‚  â”‚  â”‚    body=json.dumps({
â”‚  â”‚  â”‚      "anthropic_version": "bedrock-2023-05-31",
â”‚  â”‚  â”‚      "max_tokens": 2048,
â”‚  â”‚  â”‚      "temperature": 0.7,
â”‚  â”‚  â”‚      "messages": [{
â”‚  â”‚  â”‚        "role": "user",
â”‚  â”‚  â”‚        "content": prompt
â”‚  â”‚  â”‚      }]
â”‚  â”‚  â”‚    })
â”‚  â”‚  â”‚  )
â”‚  â”‚  â”‚  
â”‚  â”‚  â”‚  for event in response['body']:
â”‚  â”‚  â”‚    chunk = event.get('chunk')
â”‚  â”‚  â”‚    if chunk:
â”‚  â”‚  â”‚      text = chunk['delta']['text']
â”‚  â”‚  â”‚      yield f"data: {json.dumps({'token': text})}\n\n"
â”‚  â”‚  â”‚  ```
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ SSE ì´ë²¤íŠ¸ ì „ì†¡:
â”‚  â”‚     â”œâ”€ data: {"token": "ì•ˆ"}
â”‚  â”‚     â”œâ”€ data: {"token": "ë…•"}
â”‚  â”‚     â”œâ”€ data: {"token": "í•˜"}
â”‚  â”‚     â””â”€ data: {"type": "done", "sources": [...]}
â”‚  â”‚
â”‚  â”œâ”€ í† í° ì‚¬ìš©ëŸ‰ ì¶”ì :
â”‚  â”‚  â”œâ”€ í”„ë¡¬í”„íŠ¸ í† í° ìˆ˜
â”‚  â”‚  â”œâ”€ ì™„ì„± í† í° ìˆ˜
â”‚  â”‚  â””â”€ ì´ í† í° ìˆ˜ (ë¡œê¹…)
â”‚  â”‚
â”‚  â””â”€ íƒ€ì„ì•„ì›ƒ ê´€ë¦¬:
â”‚     â”œâ”€ ìµœëŒ€ ì‘ë‹µ ì‹œê°„: 60ì´ˆ
â”‚     â””â”€ ìŠ¤íŠ¸ë¦¬ë° ì—°ê²° íƒ€ì„ì•„ì›ƒ: 120ì´ˆ
â”‚
â””â”€ **Phase 5: ì¶œì²˜ ì •ë³´ ì¶”ê°€**
   â”œâ”€ ì‘ë‹µ ì™„ë£Œ í›„ ì¶œì²˜ ì´ë²¤íŠ¸ ì „ì†¡:
   â”‚  ```json
   â”‚  {
   â”‚    "type": "sources",
   â”‚    "sources": [
   â”‚      {
   â”‚        "file_id": "uuid",
   â”‚        "file_name": "ë¬¸ì„œëª….pdf",
   â”‚        "chunk_id": "uuid",
   â”‚        "page_number": 3,
   â”‚        "relevance_score": 0.92,
   â”‚        "excerpt": "... ê´€ë ¨ ë‚´ìš© ë°œì·Œ ..."
   â”‚      },
   â”‚      ...
   â”‚    ]
   â”‚  }
   â”‚  ```
   â”‚
   â”œâ”€ ì„¸ì…˜ ì—…ë°ì´íŠ¸:
   â”‚  â”œâ”€ ë©”ì‹œì§€ ì´ë ¥ì— ì¶”ê°€
   â”‚  â”œâ”€ Redis ì €ì¥ (TTL ê°±ì‹ )
   â”‚  â””â”€ PostgreSQL ì˜êµ¬ ì €ì¥ (tb_chat_sessions)
   â”‚
   â””â”€ ì¢…ë£Œ ì´ë²¤íŠ¸:
      â””â”€ data: {"type": "done"}
```

**4ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ - SSE ìŠ¤íŠ¸ë¦¬ë° ìˆ˜ì‹  ë° ë Œë”ë§**

```
[ChatPage] â†’ [MessageList ì»´í¬ë„ŒíŠ¸] â†’ EventSource
â”‚
â”œâ”€ SSE ì—°ê²° ë° ì´ë²¤íŠ¸ ì²˜ë¦¬:
â”‚  â”‚
â”‚  â”œâ”€ EventSource ìƒì„±:
â”‚  â”‚  ```typescript
â”‚  â”‚  const eventSource = new EventSource(
â”‚  â”‚    `/api/v1/chat/stream?session_id=${sessionId}`,
â”‚  â”‚    { withCredentials: true }
â”‚  â”‚  );
â”‚  â”‚  ```
â”‚  â”‚
â”‚  â”œâ”€ onmessage í•¸ë“¤ëŸ¬:
â”‚  â”‚  ```typescript
â”‚  â”‚  eventSource.onmessage = (event) => {
â”‚  â”‚    const data = JSON.parse(event.data);
â”‚  â”‚    
â”‚  â”‚    if (data.type === 'token') {
â”‚  â”‚      // í† í° ëˆ„ì  (ìŠ¤íŠ¸ë¦¬ë° í…ìŠ¤íŠ¸ ê°±ì‹ )
â”‚  â”‚      setStreamingText(prev => prev + data.token);
â”‚  â”‚    }
â”‚  â”‚    else if (data.type === 'sources') {
â”‚  â”‚      // ì¶œì²˜ ì •ë³´ ì €ì¥
â”‚  â”‚      setSources(data.sources);
â”‚  â”‚    }
â”‚  â”‚    else if (data.type === 'done') {
â”‚  â”‚      // ìŠ¤íŠ¸ë¦¬ë° ì™„ë£Œ
â”‚  â”‚      eventSource.close();
â”‚  â”‚      finalizeMessage();
â”‚  â”‚    }
â”‚  â”‚  };
â”‚  â”‚  ```
â”‚  â”‚
â”‚  â””â”€ onerror í•¸ë“¤ëŸ¬:
â”‚     â””â”€ ì—°ê²° ëŠê¹€, ì¬ì—°ê²° ë¡œì§
â”‚
â”œâ”€ ë©”ì‹œì§€ ë Œë”ë§:
â”‚  â”œâ”€ [ChatMessage ì»´í¬ë„ŒíŠ¸]
â”‚  â”‚  â”œâ”€ ì‚¬ìš©ì ë©”ì‹œì§€: ì˜¤ë¥¸ìª½ ì •ë ¬, íŒŒë€ìƒ‰ ë°°ê²½
â”‚  â”‚  â””â”€ AI ë©”ì‹œì§€: ì™¼ìª½ ì •ë ¬, íšŒìƒ‰ ë°°ê²½
â”‚  â”‚
â”‚  â”œâ”€ Markdown ë Œë”ë§:
â”‚  â”‚  â”œâ”€ react-markdown ì‚¬ìš©
â”‚  â”‚  â”œâ”€ ì½”ë“œ ë¸”ë¡ í•˜ì´ë¼ì´íŒ…
â”‚  â”‚  â”œâ”€ ë§í¬, ë¦¬ìŠ¤íŠ¸ ì§€ì›
â”‚  â”‚  â””â”€ ìˆ˜ì‹ ë Œë”ë§ (KaTeX)
â”‚  â”‚
â”‚  â””â”€ ìŠ¤íŠ¸ë¦¬ë° ì• ë‹ˆë©”ì´ì…˜:
â”‚     â””â”€ íƒ€ì´í•‘ ì»¤ì„œ íš¨ê³¼ (blinking cursor)
â”‚
â””â”€ ì¶œì²˜ í‘œì‹œ:
   â”œâ”€ [SourceList ì»´í¬ë„ŒíŠ¸]
   â”œâ”€ ì ‘ì„ ìˆ˜ ìˆëŠ” íŒ¨ë„
   â”œâ”€ ê° ì¶œì²˜ ì¹´ë“œ:
   â”‚  â”œâ”€ íŒŒì¼ëª… (í´ë¦­ ì‹œ ë·°ì–´ ì—´ë¦¼)
   â”‚  â”œâ”€ í˜ì´ì§€ ë²ˆí˜¸
   â”‚  â”œâ”€ ê´€ë ¨ë„ ì ìˆ˜ (í”„ë¡œê·¸ë ˆìŠ¤ ë°”)
   â”‚  â””â”€ ë°œì·Œ í…ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°
   â”‚
   â””â”€ "ì¶œì²˜ ë³´ê¸°" ë²„íŠ¼
      â””â”€ í´ë¦­ ì‹œ íŒŒì¼ ë·°ì–´ ì—´ê¸°
```

**5ë‹¨ê³„: ì„¸ì…˜ ê´€ë¦¬ ë° ì´ë ¥**

```
[ChatSession Management]
â”‚
â”œâ”€ ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ:
â”‚  â””â”€ GET /api/v1/chat/sessions
â”‚     â””â”€ ì‚¬ìš©ìì˜ ëª¨ë“  ì„¸ì…˜ ëª©ë¡ ë°˜í™˜
â”‚
â”œâ”€ ì„¸ì…˜ ì‚­ì œ:
â”‚  â””â”€ DELETE /api/v1/chat/sessions/{session_id}
â”‚     â”œâ”€ Redis ì„¸ì…˜ ì‚­ì œ
â”‚     â””â”€ PostgreSQL soft delete (is_deleted=true)
â”‚
â”œâ”€ ì„¸ì…˜ ì•„ì¹´ì´ë¸Œ:
â”‚  â””â”€ POST /api/v1/chat/sessions/{session_id}/archive
â”‚     â””â”€ ì¤‘ìš” ëŒ€í™” ì˜êµ¬ ë³´ê´€
â”‚
â””â”€ ì„¸ì…˜ ì¬ê°œ:
   â””â”€ ê¸°ì¡´ session_idë¡œ ìƒˆ ë©”ì‹œì§€ ì „ì†¡
      â””â”€ ì´ì „ ëŒ€í™” ì´ë ¥ ìë™ ë¡œë“œ
```

**6ë‹¨ê³„: ì—ëŸ¬ ì²˜ë¦¬ ë° í´ë°±**

```
[Error Handling]
â”‚
â”œâ”€ LLM í˜¸ì¶œ ì‹¤íŒ¨:
â”‚  â”œâ”€ 1ì°¨ í”„ë¡œë°”ì´ë” ì‹¤íŒ¨ â†’ 2ì°¨ í”„ë¡œë°”ì´ë” ìë™ ì „í™˜
â”‚  â”œâ”€ Circuit Breaker: ì—°ì† 3íšŒ ì‹¤íŒ¨ ì‹œ 5ë¶„ê°„ ì°¨ë‹¨
â”‚  â””â”€ ì‚¬ìš©ì ë©”ì‹œì§€: "ì¼ì‹œì  ì˜¤ë¥˜, ì ì‹œ í›„ ì¬ì‹œë„"
â”‚
â”œâ”€ ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨:
â”‚  â”œâ”€ íƒ€ì„ì•„ì›ƒ ê°ì§€
â”‚  â”œâ”€ ë¶€ë¶„ ì‘ë‹µ ì €ì¥
â”‚  â””â”€ ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ
â”‚
â”œâ”€ í† í° í•œë„ ì´ˆê³¼:
â”‚  â”œâ”€ ì»¨í…ìŠ¤íŠ¸ ìë™ ì••ì¶•
â”‚  â”œâ”€ ëœ ê´€ë ¨ëœ ì²­í¬ ì œê±°
â”‚  â””â”€ ì‚¬ìš©ì ì•ˆë‚´: "ë¬¸ì„œê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì¤„ì—¬ì£¼ì„¸ìš”"
â”‚
â””â”€ ê¶Œí•œ ì˜¤ë¥˜:
   â””â”€ ì»¨í…ìŠ¤íŠ¸ ë¬¸ì„œ ì¬ê²€ì¦ (ê¶Œí•œ ë³€ê²½ ê°ì§€)
```

### 2.5 UC005: ê¶Œí•œ ì‹ ì²­ í˜„í™© ì¡°íšŒ

#### 2.5.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                                                   |
| ------------ | ---------------------------------------------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ê¶Œí•œ ì‹ ì²­ í˜„í™© ì¡°íšŒ                                                           |
| **ì•¡í„°**       | ì¼ë°˜ ì‚¬ìš©ì                                                               |
| **API ì—”ë“œí¬ì¸íŠ¸** | `GET /api/v1/permission-requests/my-requests`                                 |
| **í”„ëŸ°íŠ¸ì—”ë“œ í™”ë©´** | `frontend/src/pages/user/PermissionRequestsPage.tsx`                              |
| **ëª©ì **       | ì‚¬ìš©ìê°€ ë³¸ì¸ì´ ì œì¶œí•œ ì»¨í…Œì´ë„ˆ ê¶Œí•œ ìš”ì²­ì˜ ì§„í–‰ ìƒíƒœì™€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸            |
| **ì „ì œì¡°ê±´**     | - JWT ê¸°ë°˜ ì¸ì¦ ì™„ë£Œ<br/>- tb_permission_requests í…Œì´ë¸”ì— ìš”ì²­ ì´ë ¥ ì¡´ì¬<br/>- SAP HR ì—°ë™ìœ¼ë¡œ ì´ë¦„/ë¶€ì„œ ë§¤í•‘ ì™„ë£Œ |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ìš”ì²­ ëª©ë¡ì´ í†µê³„ ì¹´ë“œì™€ í…Œì´ë¸”ë¡œ í‘œì‹œë˜ê³ , ìƒíƒœ í•„í„°ì— ë”°ë¼ ì¦‰ì‹œ ê°±ì‹                          |

#### 2.5.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: í˜ì´ì§€ ì´ˆê¸°í™” ë° ìƒíƒœ ê´€ë¦¬**
```
[ì‚¬ìš©ì] â†’ [PermissionRequestsPage.tsx] â†’ useState Hooks
- ì´ˆê¸° ìƒíƒœ: requests=[], isLoading=true, filter='all'
- ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ loadMyRequests() ì‹¤í–‰ (useEffect)
- í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ filter ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ í™”ë©´ ì¦‰ì‹œ ë¦¬ë Œë”ë§
```

**2ë‹¨ê³„: API í˜¸ì¶œ ë° íŒŒë¼ë¯¸í„° êµ¬ì„±**
```
[PermissionRequestsPage] â†’ [permissionRequestService.ts] â†’ Axios GET
- getMyPermissionRequests(filter?: PermissionRequestFilter)
- URLSearchParamsë¡œ status/from_date/page ë“± ì„ íƒì  íŒŒë¼ë¯¸í„° ì§ë ¬í™”
- getAuthHeader()ë¡œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ JWTë¥¼ Authorization í—¤ë”ì— ì¶”ê°€
- ì‘ë‹µ ë¡œê·¸ë¥¼ ì½˜ì†”ì— ë‚¨ê²¨ í˜ì´ë¡œë“œ í˜•íƒœ ì¶”ì  (ë””ë²„ê¹… ëª©ì )
```

**3ë‹¨ê³„: ì‘ë‹µ ì •ê·œí™” ë° íƒ€ì… ë§¤í•‘**
```
[permissionRequestService.ts] â†’ PermissionRequest íƒ€ì… ë§¤í•‘
- response.data.requests ë°°ì—´ì„ ìˆœíšŒí•˜ë©° í•„ë“œëª…ì„ í”„ëŸ°íŠ¸ í‘œì¤€ìœ¼ë¡œ ë³€í™˜
- requested_permission_level ë¶€ì¬ ì‹œ requested_role_id ê°’ ëŒ€ì²´
- request_reason/ reason, processed_at, rejection_reason ë“± ì•ˆì „í•œ fallback ì ìš©
- statusë¥¼ PermissionRequestStatus ìœ ë‹ˆì˜¨ íƒ€ì…ì— ë§ì¶° ëŒ€ë¬¸ì ë¬¸ìì—´ë¡œ ë³´ê°•
- ì‹¤íŒ¨ ì‹œ ë¹ˆ ë°°ì—´ ë°˜í™˜í•˜ì—¬ UIì—ì„œ ì•ˆì „ ì²˜ë¦¬
```

**4ë‹¨ê³„: ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì¡°íšŒ ë¡œì§**
```
[permission_requests.py] â†’ [PermissionRequestService.get_my_requests]
- AsyncSession Lazy Loading íšŒí”¼ë¥¼ ìœ„í•´ alias joinìœ¼ë¡œ HR/ì»¨í…Œì´ë„ˆ ì •ë³´ ëª…ì‹œ SELECT
- status íŒŒë¼ë¯¸í„°ëŠ” ì†Œë¬¸ìë¡œ ì •ê·œí™” í›„ í•„í„°ë§, ê²°ê³¼ statusëŠ” ëŒ€ë¬¸ìë¡œ ë³€í™˜í•´ ë°˜í™˜
- created_date/approval_date/temp_end_dateë¥¼ ISO ë¬¸ìì—´ë¡œ ì§ë ¬í™”
- total, limit, offset ë©”íƒ€ë°ì´í„° í¬í•¨í•œ dict ë°˜í™˜ â†’ FastAPI ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ë§¤í•‘
```

**5ë‹¨ê³„: UI ë Œë”ë§ ë° ì‚¬ìš©ì ì¸í„°ë™ì…˜**
```
[PermissionRequestsPage.tsx] â†’ Tailwind ê¸°ë°˜ UI ì¶œë ¥
- í†µê³„ ì¹´ë“œ: ì „ì²´/ëŒ€ê¸°/ìŠ¹ì¸/ê±°ë¶€ ìˆ˜ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¦‰ì‹œ ê³„ì‚°í•˜ì—¬ ì¹´ë“œ 4ì¢… í‘œì‹œ
- í•„í„° ë²„íŠ¼: all/pending/approved/rejected ìƒíƒœ í† ê¸€ (ìƒ‰ìƒ ë³€í™” + ì¦‰ì‹œ í•„í„°ë§)
- ë°ì´í„° í…Œì´ë¸”: ì‹ ì²­ì¼ì‹œ, ì»¨í…Œì´ë„ˆ, ìš”ì²­ ê¶Œí•œ, ì‹ ì²­ ì‚¬ìœ , ìƒíƒœ, ì²˜ë¦¬ì¼ì‹œ, ì²˜ë¦¬ ì‚¬ìœ  ì—´ êµ¬ì„±
- getPermissionLevelBadge()/getStatusBadge()ë¡œ ê¶Œí•œ/ìƒíƒœ ë±ƒì§€ í…ìŠ¤íŠ¸Â·ìƒ‰ìƒ í†µì¼
- ìƒíƒœê°’ ëˆ„ë½ ì‹œ ì†Œë¬¸ì ë¹„êµ ì „ì— optional chainingìœ¼ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€
```

**6ë‹¨ê³„: ë¡œë”©/ë¹ˆ ìƒíƒœ/ì—ëŸ¬ ì²˜ë¦¬**
```
- isLoading=true ë™ì•ˆ ì¤‘ì•™ ë¡œë”© ìŠ¤í”¼ë„ˆ ì¶œë ¥
- filteredRequests.length===0ì¸ ê²½ìš° í•„í„°ë³„ ì•ˆë‚´ ë©”ì‹œì§€ ì¹´ë“œ ë Œë”ë§
- API ì˜ˆì™¸ ë°œìƒ ì‹œ ì½˜ì†” ì—ëŸ¬ ë¡œê·¸ ê¸°ë¡, UIëŠ” ë¹ˆ ëª©ë¡ ì²˜ë¦¬ë¡œ graceful degrade
- ì¶”í›„ QAë¥¼ ìœ„í•´ ì½˜ì†”ì— '[UI DEBUG]' prefix ë¡œê·¸ ìœ ì§€ (í•„ìš” ì‹œ ì œê±° ê°€ëŠ¥)
```

### 3.1 UC005: ë¬¸ì„œ í’ˆì§ˆ ê´€ë¦¬

#### 3.1.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                           |
| ---------- | ---------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ë¬¸ì„œ í’ˆì§ˆ ê´€ë¦¬                     |
| **ì•¡í„°**     | ì§€ì‹ê´€ë¦¬ì                        |
| **ëª©ì **     | ë“±ë¡ëœ ë¬¸ì„œì˜ í’ˆì§ˆì„ í‰ê°€í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œ   |
| **ì „ì œì¡°ê±´**   | ì§€ì‹ê´€ë¦¬ì ê¶Œí•œ ë³´ìœ , ë‹´ë‹¹ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ê¶Œí•œ   |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ë¬¸ì„œ í’ˆì§ˆ í˜„í™©ì„ íŒŒì•…í•˜ê³  í•„ìš”í•œ ê°œì„  ì¡°ì¹˜ë¥¼ ìˆ˜í–‰ |

#### 3.1.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: í’ˆì§ˆ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼**
```
[ì§€ì‹ê´€ë¦¬ì] â†’ [AdminDashboardController] â†’ [PermissionManager]
- ì§€ì‹ê´€ë¦¬ìê°€ í’ˆì§ˆ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼
- PermissionManagerê°€ í•´ë‹¹ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ê¶Œí•œ í™•ì¸
- ë‹´ë‹¹ ì»¨í…Œì´ë„ˆ ë²”ìœ„ ë‚´ ë¬¸ì„œë“¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ì„¤ì •
```

**2ë‹¨ê³„: ë¬¸ì„œ í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°**
```
[AdminDashboardController] â†’ [DocumentQualityAnalyzer] â†’ [QualityMetricsCalculator]
- DocumentQualityAnalyzerê°€ í’ˆì§ˆ í‰ê°€ ê¸°ì¤€ì— ë”°ë¼ ë¬¸ì„œ ë¶„ì„
- QualityMetricsCalculatorê°€ ë‹¤ìŒ ì§€í‘œë“¤ì„ ì¢…í•©í•˜ì—¬ í’ˆì§ˆ ì ìˆ˜ ì‚°ì¶œ:
  * ë‚´ìš© ì™„ì„±ë„ (ì œëª©, ë³¸ë¬¸, ë©”íƒ€ë°ì´í„° ì¶©ì‹¤ì„±)
  * êµ¬ì¡°ì  í’ˆì§ˆ (ë¬¸ì„œ êµ¬ì¡°, ê°€ë…ì„±)
  * ê¸°ìˆ ì  í’ˆì§ˆ (OCR ì •í™•ë„, í…ìŠ¤íŠ¸ ì¶”ì¶œ í’ˆì§ˆ)
  * í™œìš©ë„ (ì¡°íšŒìˆ˜, ê²€ìƒ‰ ë¹ˆë„, ì‚¬ìš©ì í”¼ë“œë°±)
```

**3ë‹¨ê³„: í’ˆì§ˆ ì´ìŠˆ íƒì§€**
```
[DocumentQualityAnalyzer] â†’ [QualityIssueDetector] â†’ [DuplicateDetector]
                                                   â†’ [OutdatedContentDetector]
                                                   â†’ [IncompleteMetadataDetector]
- QualityIssueDetectorê°€ ë‹¤ì–‘í•œ í’ˆì§ˆ ë¬¸ì œë¥¼ ìë™ íƒì§€
- DuplicateDetectorê°€ ë²¡í„° ìœ ì‚¬ë„ ê¸°ë°˜ìœ¼ë¡œ ì¤‘ë³µ ë¬¸ì„œ ì‹ë³„
- OutdatedContentDetectorê°€ ìµœì¢… ìˆ˜ì •ì¼ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë˜ëœ ë¬¸ì„œ íƒì§€
- IncompleteMetadataDetectorê°€ í•„ìˆ˜ ë©”íƒ€ë°ì´í„° ëˆ„ë½ ë¬¸ì„œ ì‹ë³„
```

**4ë‹¨ê³„: ê°œì„  ì œì•ˆ ìƒì„±**
```
[QualityIssueDetector] â†’ [ImprovementSuggester] â†’ [AIContentAnalyzer]
- ImprovementSuggesterê°€ íƒì§€ëœ ì´ìŠˆë³„ë¡œ ê°œì„  ë°©ì•ˆ ì œì‹œ
- AIContentAnalyzerê°€ ë¬¸ì„œ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ìë™ íƒœê·¸ ì œì•ˆ
- ì¹´í…Œê³ ë¦¬ ì¬ë¶„ë¥˜, í‚¤ì›Œë“œ ì¶”ê°€, ìš”ì•½ ë³´ì™„ ë“± êµ¬ì²´ì  ê°œì„ ì•ˆ ì œê³µ
- ìš°ì„ ìˆœìœ„ ê¸°ë°˜ìœ¼ë¡œ ê°œì„  ì‘ì—… ìˆœì„œ ì œì•ˆ
```

### 3.2 UC006: ì»¨í…Œì´ë„ˆ ê¶Œí•œ ê´€ë¦¬

#### 3.2.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                           |
| ---------- | ---------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ì»¨í…Œì´ë„ˆ ê¶Œí•œ ê´€ë¦¬                   |
| **ì•¡í„°**     | ì§€ì‹ê´€ë¦¬ì                        |
| **ëª©ì **     | ì§€ì‹ ì»¨í…Œì´ë„ˆë³„ ì‚¬ìš©ì ì ‘ê·¼ ê¶Œí•œì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬ |
| **ì „ì œì¡°ê±´**   | ì§€ì‹ê´€ë¦¬ì ê¶Œí•œ ë³´ìœ , ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ê¶Œí•œ      |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì ì ˆí•œ ê¶Œí•œì´ ì‚¬ìš©ìì—ê²Œ ë¶€ì—¬ë˜ê³  ë³´ì•ˆì´ ìœ ì§€ë¨   |

#### 3.2.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ê¶Œí•œ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼**
```
[ì§€ì‹ê´€ë¦¬ì] â†’ [ContainerAdminController] â†’ [DetailedPermissionManager]
- ì§€ì‹ê´€ë¦¬ìê°€ ì»¨í…Œì´ë„ˆ ê¶Œí•œ ê´€ë¦¬ í™”ë©´ ì ‘ê·¼
- DetailedPermissionManagerê°€ ê´€ë¦¬ìì˜ ê¶Œí•œ ë²”ìœ„ í™•ì¸
- ê´€ë¦¬ ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ ëª©ë¡ ë° í˜„ì¬ ê¶Œí•œ í˜„í™© ì¡°íšŒ
```

**2ë‹¨ê³„: ê¶Œí•œ ìš”ì²­ ì²˜ë¦¬**
```
[ContainerAdminController] â†’ [PermissionRequestProcessor] â†’ [TbContainerPermissions]
- PermissionRequestProcessorê°€ ëŒ€ê¸° ì¤‘ì¸ ê¶Œí•œ ìš”ì²­ ëª©ë¡ ì¡°íšŒ
- ìš”ì²­ìì˜ ë¶€ì„œ, ì—­í• , ìš”ì²­ ì‚¬ìœ  ë“± ê²€í†  ì •ë³´ ì œê³µ
- ìŠ¹ì¸/ê±°ë¶€ ê²°ì •ì— ë”°ë¼ TbContainerPermissions í…Œì´ë¸” ì—…ë°ì´íŠ¸
- ìë™ ì•Œë¦¼ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ìš”ì²­ìì—ê²Œ ê²°ê³¼ í†µë³´
```

**3ë‹¨ê³„: ê³„ì¸µì  ê¶Œí•œ ìƒì† ì²˜ë¦¬**
```
[PermissionRequestProcessor] â†’ [PermissionInheritanceProcessor] â†’ [TbKnowledgeContainers]
- PermissionInheritanceProcessorê°€ ìƒìœ„ ì»¨í…Œì´ë„ˆ ê¶Œí•œ ìƒì† ê·œì¹™ ì ìš©
- TbKnowledgeContainersì˜ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì°¸ì¡°í•˜ì—¬ ê¶Œí•œ ì „íŒŒ
- ìƒìœ„ ì»¨í…Œì´ë„ˆ ê¶Œí•œì´ í•˜ìœ„ë¡œ ìë™ ìƒì†ë˜ëŠ”ì§€ ì •ì±… í™•ì¸
- ì§ì ‘ ê¶Œí•œê³¼ ìƒì† ê¶Œí•œ ê°„ ìš°ì„ ìˆœìœ„ ë° ì¶©ëŒ í•´ê²°
```

**4ë‹¨ê³„: ëŒ€ëŸ‰ ê¶Œí•œ ë³€ê²½**
```
[ContainerAdminController] â†’ [BulkPermissionManager] â†’ [SAPOrgSyncService]
- BulkPermissionManagerê°€ ì¡°ì§ ë³€ê²½ì— ë”°ë¥¸ ëŒ€ëŸ‰ ê¶Œí•œ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
- SAPOrgSyncServiceì™€ ì—°ë™í•˜ì—¬ ì¸ì‚¬ ë°œë ¹, ì¡°ì§ ê°œí¸ ë°˜ì˜
- ë¶€ì„œ ì´ë™ìì˜ ê¶Œí•œ ìë™ ì¬í• ë‹¹ ë° í‡´ì‚¬ì ê¶Œí•œ íšŒìˆ˜
- ê¶Œí•œ ë³€ê²½ ì´ë ¥ ì¶”ì  ë° ê°ì‚¬ ë¡œê·¸ ìƒì„±
```

**5ë‹¨ê³„: ê¶Œí•œ ì •ì±… í…œí”Œë¦¿ ì ìš©**
```
[BulkPermissionManager] â†’ [PermissionPolicyTemplateService] â†’ [RoleBasedAccessControl]
- PermissionPolicyTemplateServiceê°€ ì‚¬ì „ ì •ì˜ëœ ê¶Œí•œ í…œí”Œë¦¿ ì ìš©
- ì‹ ê·œ í”„ë¡œì íŠ¸, íŒ€ ì‹ ì„¤ ì‹œ í‘œì¤€ ê¶Œí•œ êµ¬ì¡° ìë™ ìƒì„±
- RoleBasedAccessControlì´ ì—­í• ë³„ ê¸°ë³¸ ê¶Œí•œ ìë™ í• ë‹¹
- ì—…ë¬´ íŠ¹ì„±ì— ë§ëŠ” ì»¤ìŠ¤í…€ ê¶Œí•œ ì •ì±… ì„¤ì • ì§€ì›
```

### 3.3 UC007: SAP ì¡°ì§ ë™ê¸°í™”

#### 3.3.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                     |
| ---------- | -------------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | SAP ì¡°ì§ ë™ê¸°í™”                             |
| **ì•¡í„°**     | ì‹œìŠ¤í…œ ìŠ¤ì¼€ì¤„ëŸ¬ / ì§€ì‹ê´€ë¦¬ì                       |
| **ëª©ì **     | SAP ì¸ì‚¬ì‹œìŠ¤í…œì˜ ì¡°ì§ ë³€ê²½ì‚¬í•­ì„ ABEKM ê¶Œí•œ êµ¬ì¡°ì— ìë™ ë°˜ì˜ |
| **ì „ì œì¡°ê±´**   | SAP RFC ì—°ê²° ì„¤ì •, ë™ê¸°í™” ê¶Œí•œ ë³´ìœ                |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì¡°ì§ ë³€ê²½ì‚¬í•­ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¶Œí•œ êµ¬ì¡°ì— ë°˜ì˜ë¨              |

#### 3.3.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: SAP ì¡°ì§ ë³€ê²½ ê°ì§€**
```
[SAPOrgSyncService] â†’ [OrganizationChangeDetector] â†’ [SAPRFCClient]
- OrganizationChangeDetectorê°€ ì •ê¸°ì ìœ¼ë¡œ SAP ì¡°ì§ë„ ë³€ê²½ì‚¬í•­ íƒì§€
- SAPRFCClientë¥¼ í†µí•´ ì¸ì‚¬ë°œë ¹, ì¡°ì§ê°œí¸, í‡´ì‚¬ ë“± ì´ë²¤íŠ¸ ìˆ˜ì§‘
- ë³€ê²½ ìœ í˜•ë³„(ì‹ ê·œì…ì‚¬, ë¶€ì„œì´ë™, ìŠ¹ì§„, í‡´ì‚¬) ë¶„ë¥˜ ë° ìš°ì„ ìˆœìœ„ ì„¤ì •
```

**2ë‹¨ê³„: ì»¨í…Œì´ë„ˆ êµ¬ì¡° ì—…ë°ì´íŠ¸**
```
[OrganizationChangeDetector] â†’ [ContainerStructureUpdater] â†’ [TbKnowledgeContainers]
- ContainerStructureUpdaterê°€ ì¡°ì§ ë³€ê²½ì— ë”°ë¥¸ ì»¨í…Œì´ë„ˆ êµ¬ì¡° ì—…ë°ì´íŠ¸
- ì‹ ì„¤ ë¶€ì„œ/íŒ€ì˜ ê²½ìš° ìë™ìœ¼ë¡œ í•´ë‹¹ ì§€ì‹ ì»¨í…Œì´ë„ˆ ìƒì„±
- ì¡°ì§ í†µíí•© ì‹œ ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ë³‘í•© ë° ê¶Œí•œ ì¬ë°°ì¹˜
- ê³„ì¸µ êµ¬ì¡° ë³€ê²½ ì‹œ parent_container_id ë° hierarchy_path ì—…ë°ì´íŠ¸
```

**3ë‹¨ê³„: ì‚¬ìš©ì ê¶Œí•œ ì¬í• ë‹¹**
```
[ContainerStructureUpdater] â†’ [UserPermissionReassigner] â†’ [TbContainerPermissions]
                                                         â†’ [TbUserRoles]
- UserPermissionReassignerê°€ ë¶€ì„œ ì´ë™ìì˜ ê¶Œí•œ ìë™ ì¬í• ë‹¹
- ê¸°ì¡´ ë¶€ì„œ ê¶Œí•œ íšŒìˆ˜ ë° ì‹ ê·œ ë¶€ì„œ ê¶Œí•œ ë¶€ì—¬
- TbContainerPermissionsì—ì„œ ê¸°ì¡´ ê¶Œí•œ ë§Œë£Œ ì²˜ë¦¬
- TbUserRolesì—ì„œ ì—­í•  ë³€ê²½ ë° ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ ë§¤í•‘
```

**1ë‹¨ê³„: ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ ì¡°íšŒ**
```
[ì§€ì‹ê´€ë¦¬ì] â†’ [ContainerAdminController] â†’ [PermissionMatrixService]
- ì§€ì‹ê´€ë¦¬ìê°€ ê¶Œí•œ ê´€ë¦¬ í˜ì´ì§€ ì ‘ê·¼
- PermissionMatrixServiceê°€ í˜„ì¬ ê¶Œí•œ ì„¤ì • ìƒíƒœë¥¼ ë§¤íŠ¸ë¦­ìŠ¤ í˜•íƒœë¡œ ì œê³µ
- ì‚¬ìš©ìë³„, ì»¨í…Œì´ë„ˆë³„, ê¶Œí•œ íƒ€ì…ë³„ í¬ë¡œìŠ¤ í…Œì´ë¸” ìƒì„±
- ê¶Œí•œ ìƒì† ê´€ê³„ ë° ì„ì‹œ ê¶Œí•œ í˜„í™© í¬í•¨
```

**2ë‹¨ê³„: SAP ì¡°ì§ë„ ê¸°ë°˜ ê¶Œí•œ ë™ê¸°í™”**
```
[PermissionMatrixService] â†’ [SAPOrgSyncService] â†’ [PermissionAutoAssigner]
- SAPOrgSyncServiceê°€ ìµœì‹  ì¡°ì§ë„ ì •ë³´ í™•ì¸
- ì‹ ê·œ ì§ì›, ì´ë™ ì§ì›, í‡´ì‚¬ ì§ì› ì •ë³´ íƒì§€
- PermissionAutoAssignerê°€ ì¡°ì§ êµ¬ì¡°ì— ë”°ë¼ ê¸°ë³¸ ê¶Œí•œ ìë™ í• ë‹¹
**4ë‹¨ê³„: ê¶Œí•œ ë³€ê²½ ì´ë ¥ ê´€ë¦¬**
```
[UserPermissionReassigner] â†’ [PermissionAuditLogger] â†’ [TbPermissionAuditLog]
- PermissionAuditLoggerê°€ ëª¨ë“  ê¶Œí•œ ë³€ê²½ì‚¬í•­ì„ ê°ì‚¬ ë¡œê·¸ì— ê¸°ë¡
- ë³€ê²½ ìœ í˜•, ë³€ê²½ì, ë³€ê²½ ì¼ì‹œ, ì˜í–¥ë°›ì€ ì‚¬ìš©ì ëª©ë¡ ì €ì¥
- ê·œì • ì¤€ìˆ˜ ë° ë³´ì•ˆ ê°ì‚¬ë¥¼ ìœ„í•œ ìƒì„¸ ì´ë ¥ ê´€ë¦¬
- ê¶Œí•œ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ì—…ë¬´ ì˜í–¥ë„ ë¶„ì„ ë° ë¦¬í¬íŠ¸ ìƒì„±
```

### 3.4 UC008: íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ í™•ì¸

#### 3.4.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                          |
| ---------- | ------------------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ í™•ì¸                                 |
| **ì•¡í„°**     | ì‹œìŠ¤í…œ (ì‚¬ìš©ì ìš”ì²­ ì‹œ ìë™ ì‹¤í–‰)                        |
| **ëª©ì **     | ì‚¬ìš©ìì˜ íŠ¹ì • íŒŒì¼ ì ‘ê·¼ ìš”ì²­ ì‹œ ê³„ì¸µì  ê¶Œí•œì„ í™•ì¸í•˜ì—¬ ì ‘ê·¼ í—ˆê°€ ì—¬ë¶€ ê²°ì • |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ, íŒŒì¼ ì¡´ì¬ í™•ì¸                         |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì ì ˆí•œ ê¶Œí•œ ë³´ìœ  ì‹œ íŒŒì¼ ì ‘ê·¼ í—ˆìš©, ë¯¸ë³´ìœ  ì‹œ ì ‘ê·¼ ê±°ë¶€           |

#### 3.4.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì§ì ‘ ê¶Œí•œ í™•ì¸**
```
[FileAccessController] â†’ [PermissionChecker] â†’ [TbContainerPermissions]
- PermissionCheckerê°€ ì‚¬ìš©ìì˜ í•´ë‹¹ íŒŒì¼ ì§ì ‘ ê¶Œí•œ í™•ì¸
- TbContainerPermissionsì—ì„œ user_idì™€ íŒŒì¼ì˜ container_id ë§¤ì¹­
- ìš”ì²­ëœ ì•¡ì…˜(READ, WRITE, DELETE)ì— ëŒ€í•œ ê¶Œí•œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- ê¶Œí•œ ë§Œë£Œì¼(valid_until) ì²´í¬í•˜ì—¬ ìœ íš¨ì„± ê²€ì¦
```

**2ë‹¨ê³„: ì»¨í…Œì´ë„ˆ ê³„ì¸µ ê¶Œí•œ í™•ì¸**
```
[PermissionChecker] â†’ [PermissionInheritanceProcessor] â†’ [TbKnowledgeContainers]
- PermissionInheritanceProcessorê°€ íŒŒì¼ì´ ì†í•œ ì»¨í…Œì´ë„ˆì˜ ìƒìœ„ ê³„ì¸µ ì¡°íšŒ
- TbKnowledgeContainersì˜ parent_container_idë¥¼ ë”°ë¼ ìƒìœ„ ì»¨í…Œì´ë„ˆ íƒìƒ‰
- ê° ìƒìœ„ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì† ê¶Œí•œ(is_inherited='Y') í™•ì¸
- ê³„ì¸µ êµ¬ì¡°ë¥¼ ë”°ë¼ ROOT ì»¨í…Œì´ë„ˆê¹Œì§€ ê¶Œí•œ ìƒì† ì²´í¬
```

**3ë‹¨ê³„: ì—­í•  ê¸°ë°˜ ê¶Œí•œ í™•ì¸**
```
[PermissionInheritanceProcessor] â†’ [RoleBasedAccessControl] â†’ [TbUserRoles]
                                                            â†’ [TbRolePermissions]
- RoleBasedAccessControlì´ ì‚¬ìš©ìì˜ ì—­í• ë³„ ê¸°ë³¸ ê¶Œí•œ í™•ì¸
- TbUserRolesì—ì„œ í•´ë‹¹ ì»¨í…Œì´ë„ˆ ë²”ìœ„ ë‚´ ì‚¬ìš©ì ì—­í•  ì¡°íšŒ
- TbRolePermissionsì—ì„œ ì—­í• ë³„ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê¶Œí•œ ë§¤í•‘ í™•ì¸
- DOCUMENT ë¦¬ì†ŒìŠ¤ íƒ€ì…ì— ëŒ€í•œ ìš”ì²­ ì•¡ì…˜ ê¶Œí•œ ê²€ì¦
```

**4ë‹¨ê³„: ìµœì¢… ì ‘ê·¼ ê²°ì • ë° ë¡œê¹…**
```
[RoleBasedAccessControl] â†’ [AccessDecisionEngine] â†’ [AccessAuditLogger]
- AccessDecisionEngineì´ ëª¨ë“  ê¶Œí•œ í™•ì¸ ê²°ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ ìµœì¢… ê²°ì •
- ê¶Œí•œ ì¶©ëŒ ì‹œ ìš°ì„ ìˆœìœ„ ê·œì¹™ ì ìš© (ì§ì ‘ ê¶Œí•œ > ìƒì† ê¶Œí•œ > ì—­í•  ê¶Œí•œ)
- AccessAuditLoggerê°€ ì ‘ê·¼ ì‹œë„ ë° ê²°ê³¼ë¥¼ ê°ì‚¬ ë¡œê·¸ì— ê¸°ë¡
- ì ‘ê·¼ ê±°ë¶€ ì‹œ ìƒì„¸ ê±°ë¶€ ì‚¬ìœ  ì œê³µí•˜ì—¬ ì‚¬ìš©ì ê°€ì´ë“œ
```

### 3.5 UC009: ê¶Œí•œ ìš”ì²­ ë° ìŠ¹ì¸

#### 3.5.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                          |
| ---------- | ------------------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ê¶Œí•œ ìš”ì²­ ë° ìŠ¹ì¸                                  |
| **ì•¡í„°**     | ì¼ë°˜ ì‚¬ìš©ì, ì§€ì‹ê´€ë¦¬ì                               |
| **ëª©ì **     | ì‚¬ìš©ìê°€ ì ‘ê·¼ì´ í•„ìš”í•œ ë¬¸ì„œì— ëŒ€í•œ ê¶Œí•œì„ ìš”ì²­í•˜ê³  ê´€ë¦¬ìê°€ ìŠ¹ì¸í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ, ëŒ€ìƒ ë¬¸ì„œ/ì»¨í…Œì´ë„ˆ ì‹ë³„                    |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì ì ˆí•œ ê¶Œí•œ ìš”ì²­ì´ ìŠ¹ì¸ë˜ì–´ ì‚¬ìš©ìê°€ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ       |

#### 3.5.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ê¶Œí•œ ìš”ì²­ ìƒì„±**
```
[ì¼ë°˜ì‚¬ìš©ì] â†’ [PermissionRequestController] â†’ [PermissionRequestProcessor]
- ì‚¬ìš©ìê°€ ì ‘ê·¼ì´ í•„ìš”í•œ ë¬¸ì„œ/ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ê¶Œí•œ ìš”ì²­ ìƒì„±
- PermissionRequestProcessorê°€ ìš”ì²­ ì •ë³´ ê²€ì¦ ë° í•„ìˆ˜ í•­ëª© í™•ì¸
- ìš”ì²­ ì‚¬ìœ , í•„ìš” ê¶Œí•œ ìœ í˜•, ì‚¬ìš© ê¸°ê°„ ë“± ìƒì„¸ ì •ë³´ ìˆ˜ì§‘
- ìë™ ìŠ¹ì¸ ê°€ëŠ¥ ì—¬ë¶€ ì •ì±… ì—”ì§„ì„ í†µí•´ ì‚¬ì „ í™•ì¸
```

**2ë‹¨ê³„: ì ì ˆí•œ ìŠ¹ì¸ì ê²°ì •**
```
[PermissionRequestProcessor] â†’ [ApprovalWorkflowEngine] â†’ [TbKnowledgeContainers]
- ApprovalWorkflowEngineì´ ìš”ì²­ ëŒ€ìƒì˜ ì»¨í…Œì´ë„ˆ ê³„ì¸µ êµ¬ì¡° ë¶„ì„
- TbKnowledgeContainersë¥¼ ì°¸ì¡°í•˜ì—¬ í•´ë‹¹ ì»¨í…Œì´ë„ˆì˜ ê´€ë¦¬ì ì‹ë³„
- ìš”ì²­ ê¶Œí•œ ìˆ˜ì¤€ì— ë”°ë¥¸ ì ì ˆí•œ ìŠ¹ì¸ ê¶Œí•œì ë§¤í•‘
- ë‹¤ë‹¨ê³„ ìŠ¹ì¸ì´ í•„ìš”í•œ ê²½ìš° ìŠ¹ì¸ ì²´ì¸ êµ¬ì„±
```

**3ë‹¨ê³„: ìŠ¹ì¸ì ê²€í†  ë° ê²°ì •**
```
[ApprovalWorkflowEngine] â†’ [PermissionReviewService] â†’ [ì§€ì‹ê´€ë¦¬ì]
- PermissionReviewServiceê°€ ê¶Œí•œ ìš”ì²­ì„ ìŠ¹ì¸ìì—ê²Œ ì•Œë¦¼ ì „ì†¡
- ì§€ì‹ê´€ë¦¬ìê°€ ìš”ì²­ì ì •ë³´, ì—…ë¬´ ì—°ê´€ì„±, ë³´ì•ˆ ë“±ê¸‰ ë“± ê²€í† 
- ì¡°ê±´ë¶€ ìŠ¹ì¸ ì‹œ ì œí•œ ì‚¬í•­ ì„¤ì • (ê¸°ê°„ ì œí•œ, ê¶Œí•œ ë²”ìœ„ ì¶•ì†Œ ë“±)
- ìŠ¹ì¸/ê±°ë¶€/ì¡°ê±´ë¶€ìŠ¹ì¸ ê²°ì • ë° ì‚¬ìœ  ê¸°ë¡
```

**4ë‹¨ê³„: ê¶Œí•œ ì ìš© ë° ì•Œë¦¼**
```
[PermissionReviewService] â†’ [PermissionApplicator] â†’ [TbContainerPermissions]
                                                  â†’ [NotificationService]
- PermissionApplicatorê°€ ìŠ¹ì¸ëœ ê¶Œí•œì„ ì‹œìŠ¤í…œì— ë°˜ì˜
- TbContainerPermissionsì— ìƒˆë¡œìš´ ê¶Œí•œ ë ˆì½”ë“œ ìƒì„±
- ê¶Œí•œ ë§Œë£Œì¼, ìƒì† ì„¤ì • ë“± ìŠ¹ì¸ ì¡°ê±´ì— ë”°ë¥¸ ì„¸ë¶€ ì„¤ì • ì ìš©
- NotificationServiceë¥¼ í†µí•´ ìš”ì²­ìì—ê²Œ ê²°ê³¼ í†µë³´
```

### 3.6 UC010: FAQ ìë™ ìƒì„±

#### 3.6.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                               |
| ---------- | -------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | FAQ ìë™ ìƒì„±                        |
| **ì•¡í„°**     | ì§€ì‹ê´€ë¦¬ì                            |
| **ëª©ì **     | ë¹ˆë²ˆí•œ ì§ˆë¬¸ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ FAQë¥¼ ìë™ ìƒì„±í•˜ê³  ê´€ë¦¬  |
| **ì „ì œì¡°ê±´**   | ì¶©ë¶„í•œ ì§ˆì˜ì‘ë‹µ ì´ë ¥ ë°ì´í„° ë³´ìœ                |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì‚¬ìš©ìë“¤ì˜ ë°˜ë³µì  ì§ˆë¬¸ì— ëŒ€í•œ í‘œì¤€ ë‹µë³€ì´ FAQë¡œ ì œê³µë¨ |

#### 3.6.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì§ˆë¬¸ íŒ¨í„´ ë¶„ì„**
```
[ì§€ì‹ê´€ë¦¬ì] â†’ [FAQGeneratorController] â†’ [QuestionPatternAnalyzer]
- FAQGeneratorControllerê°€ FAQ ìƒì„± ìš”ì²­ ì²˜ë¦¬
- QuestionPatternAnalyzerê°€ ìµœê·¼ 30ì¼ê°„ ì§ˆì˜ì‘ë‹µ ë¡œê·¸ ë¶„ì„
- ë¹ˆë„ìˆ˜ 10íšŒ ì´ìƒì˜ ìœ ì‚¬ ì§ˆë¬¸ ê·¸ë£¹ ì‹ë³„
- ì§ˆë¬¸ í´ëŸ¬ìŠ¤í„°ë§ì„ í†µí•´ ì£¼ì œë³„ ë¶„ë¥˜ ìˆ˜í–‰
```

**2ë‹¨ê³„: í‘œì¤€ ë‹µë³€ ìƒì„±**
```
[QuestionPatternAnalyzer] â†’ [StandardAnswerGenerator] â†’ [MultiLLMService]
- StandardAnswerGeneratorê°€ ê° ì§ˆë¬¸ í´ëŸ¬ìŠ¤í„°ë³„ ëŒ€í‘œ ì§ˆë¬¸ ì„ ì •
- MultiLLMServiceë¥¼ í™œìš©í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” í‘œì¤€ ë‹µë³€ ìƒì„±
- ê¸°ì¡´ ê³ í’ˆì§ˆ ë‹µë³€ë“¤ì„ ì°¸ì¡°í•˜ì—¬ ë‹µë³€ í’ˆì§ˆ í–¥ìƒ
- ì¶œì²˜ ë¬¸ì„œ ë§í¬ ë° ê´€ë ¨ ì •ë³´ ìë™ ì²¨ë¶€
```

**3ë‹¨ê³„: FAQ ê²€í†  ë° ìŠ¹ì¸**
```
[StandardAnswerGenerator] â†’ [FAQReviewService] â†’ [ì§€ì‹ê´€ë¦¬ì]
- FAQReviewServiceê°€ ìƒì„±ëœ FAQ ì´ˆì•ˆì„ ê²€í†  ëŒ€ê¸° ìƒíƒœë¡œ ë“±ë¡
- ì§€ì‹ê´€ë¦¬ìê°€ ì§ˆë¬¸-ë‹µë³€ ìŒì˜ ì •í™•ì„± ë° ì™„ì„±ë„ ê²€í† 
- í•„ìš”ì‹œ ë‹µë³€ ìˆ˜ì • ë° ë³´ì™„ ì‘ì—… ìˆ˜í–‰
- ìŠ¹ì¸ëœ FAQë¥¼ ê³µì‹ FAQ ëª©ë¡ì— ì¶”ê°€
```

## 4. ì‹œìŠ¤í…œê´€ë¦¬ì ê¸°ëŠ¥ ìœ ì¦ˆì¼€ì´ìŠ¤

### 4.1 UC008: ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

#### 4.1.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                   |
| ---------- | ------------------------------------ |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§                          |
| **ì•¡í„°**     | ì‹œìŠ¤í…œê´€ë¦¬ì                               |
| **ëª©ì **     | ì „ì²´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ ì§€í‘œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ì´ìƒ ìƒí™© ê°ì§€ |
| **ì „ì œì¡°ê±´**   | ì‹œìŠ¤í…œê´€ë¦¬ì ê¶Œí•œ ë³´ìœ , ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì„¤ì • ì™„ë£Œ          |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ íŒŒì•…í•˜ê³  ë¬¸ì œ ë°œìƒ ì‹œ ì‹ ì†í•œ ëŒ€ì‘    |

#### 4.1.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘**
```
[ì‹œìŠ¤í…œê´€ë¦¬ì] â†’ [SystemMonitoringController] â†’ [MetricsCollector]
                                               â†’ [DatabaseMonitor]
                                               â†’ [AIServiceMonitor]
                                               â†’ [ApplicationMonitor]
- SystemMonitoringControllerê°€ í†µí•© ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì œê³µ
- MetricsCollectorê°€ ë‹¤ì–‘í•œ ì†ŒìŠ¤ë¡œë¶€í„° ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì¡°ìœ¨
- DatabaseMonitorê°€ PostgreSQL ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘ (ì¿¼ë¦¬ ì‹œê°„, ì—°ê²° ìˆ˜, ë½ ìƒíƒœ)
- AIServiceMonitorê°€ AWS Bedrock API ì‚¬ìš©ëŸ‰ ë° ì‘ë‹µ ì‹œê°„ ì¶”ì 
- ApplicationMonitorê°€ FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘
```

**2ë‹¨ê³„: ì´ìƒ ì§•í›„ íƒì§€**
```
[MetricsCollector] â†’ [AnomalyDetector] â†’ [ThresholdMonitor]
                                      â†’ [TrendAnalyzer]
- AnomalyDetectorê°€ ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ìƒ íŒ¨í„´ íƒì§€
- ThresholdMonitorê°€ ì„¤ì •ëœ ì„ê³„ê°’ ì´ˆê³¼ ì—¬ë¶€ í™•ì¸
- TrendAnalyzerê°€ ì§€ì†ì ì¸ ì„±ëŠ¥ ì €í•˜ íŠ¸ë Œë“œ ë¶„ì„
- ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì˜ˆì¸¡ ëª¨ë¸ë¡œ í–¥í›„ ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ì˜ˆì¸¡
```

**3ë‹¨ê³„: ì•Œë¦¼ ë° ëŒ€ì‘**
```
[AnomalyDetector] â†’ [AlertManager] â†’ [NotificationService]
                                  â†’ [AutoRecoveryService]
- AlertManagerê°€ ì´ìƒ ìƒí™© ì‹¬ê°ë„ì— ë”°ë¼ ì•Œë¦¼ ìš°ì„ ìˆœìœ„ ê²°ì •
- NotificationServiceë¥¼ í†µí•´ Slack, ì´ë©”ì¼, SMS ë“±ìœ¼ë¡œ ì•Œë¦¼ ë°œì†¡
- AutoRecoveryServiceê°€ ì‚¬ì „ ì •ì˜ëœ ë³µêµ¬ ì ˆì°¨ ìë™ ì‹¤í–‰
- ìˆ˜ë™ ê°œì…ì´ í•„ìš”í•œ ê²½ìš° ìƒì„¸ ì§„ë‹¨ ì •ë³´ì™€ í•¨ê»˜ ì—ìŠ¤ì»¬ë ˆì´ì…˜
```

### 4.2 UC009: SAP ì—°ë™ ê´€ë¦¬

#### 4.2.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                                 |
| ---------- | ---------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | SAP ì—°ë™ ì‹œìŠ¤í…œ ê´€ë¦¬                      |
| **ì•¡í„°**     | ì‹œìŠ¤í…œê´€ë¦¬ì                             |
| **ëª©ì **     | SAP ì‹œìŠ¤í…œê³¼ì˜ ì—°ë™ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ì¡°ì§ë„ ë™ê¸°í™” ê´€ë¦¬ |
| **ì „ì œì¡°ê±´**   | SAP RFC ì—°ê²° ì„¤ì • ì™„ë£Œ, ì‹œìŠ¤í…œê´€ë¦¬ì ê¶Œí•œ ë³´ìœ      |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | SAP ì¡°ì§ë„ê°€ ì •í™•íˆ ë™ê¸°í™”ë˜ê³  ì—°ë™ ì˜¤ë¥˜ê°€ ì ì‹œì— í•´ê²°ë¨  |

#### 4.2.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: SAP ì—°ê²° ìƒíƒœ ì ê²€**
```
[ì‹œìŠ¤í…œê´€ë¦¬ì] â†’ [SAPIntegrationController] â†’ [SAPConnectionMonitor]
- SAPIntegrationControllerê°€ SAP ì—°ë™ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤ ì œê³µ
- SAPConnectionMonitorê°€ RFC ì—°ê²° ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸
- ì—°ê²° ì§€ì—° ì‹œê°„, ì‘ë‹µë¥ , ì˜¤ë¥˜ìœ¨ ë“± ì—°ê²° í’ˆì§ˆ ì§€í‘œ ìˆ˜ì§‘
- ì—°ê²° ì¥ì•  ì‹œ ìë™ ì¬ì—°ê²° ì‹œë„ ë° ë°±ì—… ì—°ê²° í™œì„±í™”
```

**2ë‹¨ê³„: ì¡°ì§ë„ ë³€ê²½ ì‚¬í•­ íƒì§€**
```
[SAPConnectionMonitor] â†’ [OrganizationChangeDetector] â†’ [SAPOrgDataFetcher]
- OrganizationChangeDetectorê°€ ì •ê¸°ì ìœ¼ë¡œ SAP ì¡°ì§ë„ ë³€ê²½ì‚¬í•­ í™•ì¸
- SAPOrgDataFetcherê°€ ìµœì‹  ì¡°ì§ êµ¬ì¡° ë°ì´í„° ìˆ˜ì§‘
- ì‹ ê·œ ë¶€ì„œ, ë¶€ì„œ í†µíí•©, ì§ì› ì´ë™ ë“± ë³€ê²½ì‚¬í•­ ì‹ë³„
- ë³€ê²½ ì‚¬í•­ì˜ ABEKM ì‹œìŠ¤í…œ ì˜í–¥ë„ ë¶„ì„
```

**3ë‹¨ê³„: ìë™ ë™ê¸°í™” ë° ìˆ˜ë™ ìŠ¹ì¸**
```
[OrganizationChangeDetector] â†’ [AutoSyncProcessor] â†’ [ManualApprovalQueue]
- AutoSyncProcessorê°€ ë‹¨ìˆœ ë³€ê²½ì‚¬í•­ (ì‹ ê·œ ì§ì› ë“±) ìë™ ì²˜ë¦¬
- ë³µì¡í•œ ë³€ê²½ì‚¬í•­ (ë¶€ì„œ í†µíí•© ë“±)ì€ ManualApprovalQueueì— ë“±ë¡
- ì‹œìŠ¤í…œê´€ë¦¬ìê°€ ì˜í–¥ë„ë¥¼ ê²€í†  í›„ ìˆ˜ë™ ìŠ¹ì¸
- ìŠ¹ì¸ëœ ë³€ê²½ì‚¬í•­ì— ëŒ€í•´ ì§€ì‹ ì»¨í…Œì´ë„ˆ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
```

## 5. ê³µí†µ ì‹œìŠ¤í…œ ê¸°ëŠ¥

### 5.1 UC010: ì‚¬ìš©ì ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬

#### 5.1.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                         |
| ---------- | -------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ì‚¬ìš©ì ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬             |
| **ì•¡í„°**     | ëª¨ë“  ì‚¬ìš©ì                     |
| **ëª©ì **     | ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦ê³¼ ì„¸ì…˜ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬ ì œê³µ |
| **ì „ì œì¡°ê±´**   | ìœ íš¨í•œ ì‚¬ìš©ì ê³„ì • ë³´ìœ               |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ë³´ì•ˆì´ ë³´ì¥ëœ ìƒíƒœì—ì„œ ì‹œìŠ¤í…œ ê¸°ëŠ¥ ì´ìš© ê°€ëŠ¥  |

#### 5.1.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì¸ì¦ ìš”ì²­ ì²˜ë¦¬**
```
[ì‚¬ìš©ì] â†’ [AuthenticationController] â†’ [CredentialValidator]
                                      â†’ [SAPUserInfoService]
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥ (ì‚¬ë²ˆ/ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” SSO)
- CredentialValidatorê°€ ì…ë ¥ëœ ì¸ì¦ ì •ë³´ ê²€ì¦
- SAPUserInfoServiceë¥¼ í†µí•´ SAP ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ì ì •ë³´ í™•ì¸
- ë‹¤ì¤‘ ì¸ì¦ ìš”ì†Œ (MFA) ì§€ì› ì‹œ ì¶”ê°€ ì¸ì¦ ë‹¨ê³„ ì§„í–‰
```

**2ë‹¨ê³„: JWT í† í° ìƒì„± ë° ê¶Œí•œ ì •ë³´ ì„¤ì •**
```
[CredentialValidator] â†’ [JWTTokenService] â†’ [UserRoleManager]
- JWTTokenServiceê°€ ì¸ì¦ ì„±ê³µ ì‹œ JWT í† í° ìƒì„±
- UserRoleManagerê°€ ì‚¬ìš©ìì˜ ì—­í•  ë° ê¶Œí•œ ì •ë³´ ì¡°íšŒ
- í† í°ì— ì‚¬ìš©ì ID, ë¶€ì„œ ì •ë³´, ê¶Œí•œ ë ˆë²¨ ë“± í¬í•¨
- í† í° ìœ íš¨ ê¸°ê°„ ë° ë¦¬í”„ë ˆì‹œ í† í° ì„¤ì •
```

**3ë‹¨ê³„: ì„¸ì…˜ ê´€ë¦¬ ë° ìƒíƒœ ìœ ì§€**
```
[JWTTokenService] â†’ [SessionManager] â†’ [RedisSessionStore]
- SessionManagerê°€ ì‚¬ìš©ì ì„¸ì…˜ ì •ë³´ë¥¼ Redisì— ì €ì¥
- í™œì„± ì„¸ì…˜ ëª©ë¡ ê´€ë¦¬ ë° ë™ì‹œ ì ‘ì† ì œí•œ ì ìš©
- ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ë° ìë™ ì—°ì¥ ë¡œì§ êµ¬í˜„
- ë¡œê·¸ì•„ì›ƒ ì‹œ í† í° ë¬´íš¨í™” ë° ì„¸ì…˜ ì •ë¦¬
```

### 5.2 UC011: ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ

#### 5.2.1 ìœ ì¦ˆì¼€ì´ìŠ¤ ê°œìš”

| í•­ëª©         | ë‚´ìš©                              |
| ---------- | ------------------------------- |
| **ìœ ì¦ˆì¼€ì´ìŠ¤ëª…** | ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ                      |
| **ì•¡í„°**     | ëª¨ë“  ì‚¬ìš©ì                          |
| **ëª©ì **     | ì¤‘ìš”í•œ ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ì™€ ì—…ë¬´ ê´€ë ¨ ì•Œë¦¼ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬ |
| **ì „ì œì¡°ê±´**   | ì‚¬ìš©ì ë¡œê·¸ì¸ ìƒíƒœ, ì•Œë¦¼ ì„¤ì • ì™„ë£Œ            |
| **ì„±ê³µì‹œë‚˜ë¦¬ì˜¤** | ê´€ë ¨ ì•Œë¦¼ì´ ì ì‹œì— ì ì ˆí•œ ë°©ì‹ìœ¼ë¡œ ì „ë‹¬ë¨         |

#### 5.2.2 ì²˜ë¦¬ ì ˆì°¨ ë° ê°ì²´ ìƒí˜¸ì‘ìš©

**1ë‹¨ê³„: ì´ë²¤íŠ¸ ë°œìƒ ê°ì§€**
```
[ì‹œìŠ¤í…œ ì´ë²¤íŠ¸] â†’ [EventDetector] â†’ [NotificationTrigger]
- EventDetectorê°€ ë‹¤ì–‘í•œ ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§
  * ë¬¸ì„œ ì—…ë¡œë“œ ì™„ë£Œ/ì‹¤íŒ¨
  * ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ
  * ì‹œìŠ¤í…œ ì•Œë¦¼ (ì ê²€, ì¥ì•  ë“±)
  * ì—…ë¬´ ê´€ë ¨ ì•Œë¦¼ (ê²€í†  ìš”ì²­, ìŠ¹ì¸ ë“±)
- NotificationTriggerê°€ ì´ë²¤íŠ¸ ìœ í˜•ë³„ ì•Œë¦¼ ì •ì±… ì ìš©
```

**2ë‹¨ê³„: ìˆ˜ì‹  ëŒ€ìƒ ê²°ì • ë° ê°œì¸í™”**
```
[NotificationTrigger] â†’ [RecipientResolver] â†’ [PersonalizationEngine]
- RecipientResolverê°€ ì•Œë¦¼ ëŒ€ìƒ ì‚¬ìš©ì ë° ê·¸ë£¹ ê²°ì •
- ì‚¬ìš©ì ê¶Œí•œ, ê´€ì‹¬ì‚¬, ì•Œë¦¼ ì„¤ì •ì— ë”°ë¥¸ í•„í„°ë§
- PersonalizationEngineì´ ì‚¬ìš©ìë³„ ë§ì¶¤í˜• ë©”ì‹œì§€ ìƒì„±
- ì•Œë¦¼ ë¹ˆë„ ì œí•œ ë° ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€ ë¡œì§ ì ìš©
```

**3ë‹¨ê³„: ë‹¤ì±„ë„ ì•Œë¦¼ ì „ì†¡**
```
[PersonalizationEngine] â†’ [MultiChannelNotifier] â†’ [WebSocketService]
                                                  â†’ [EmailService]
                                                  â†’ [SlackService]
- MultiChannelNotifierê°€ ì•Œë¦¼ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì „ì†¡ ì±„ë„ ê²°ì •
- WebSocketServiceë¥¼ í†µí•œ ì‹¤ì‹œê°„ ì›¹ ì•Œë¦¼
- ì¤‘ìš” ì•Œë¦¼ì€ EmailServiceë¥¼ í†µí•œ ì´ë©”ì¼ ë°œì†¡
- ì‹œìŠ¤í…œ ê´€ë¦¬ìì—ê²ŒëŠ” SlackServiceë¥¼ í†µí•œ ì¦‰ì‹œ ì•Œë¦¼
```

## 6. ì˜ˆì™¸ ì²˜ë¦¬ ë° ì˜¤ë¥˜ ë³µêµ¬

### 6.1 ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´

#### 6.1.1 ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬

```
[ëª¨ë“  ì™¸ë¶€ API í˜¸ì¶œ] â†’ [RetryHandler] â†’ [CircuitBreaker]
- RetryHandlerê°€ ì¼ì‹œì  ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì— ëŒ€í•´ ì§€ìˆ˜ ë°±ì˜¤í”„ ì¬ì‹œë„
- CircuitBreakerê°€ ì—°ì† ì‹¤íŒ¨ ì‹œ ì„œë¹„ìŠ¤ ë³´í˜¸ë¥¼ ìœ„í•´ í˜¸ì¶œ ì°¨ë‹¨
- Fallback ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ìºì‹œëœ ë°ì´í„° ë˜ëŠ” ê¸°ë³¸ ì‘ë‹µ ì œê³µ
```

#### 6.1.2 ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

```
[ë°ì´í„° ë³€ê²½ ì‘ì—…] â†’ [TransactionManager] â†’ [ConsistencyChecker]
- TransactionManagerê°€ ACID ì†ì„± ë³´ì¥ì„ ìœ„í•œ íŠ¸ëœì­ì…˜ ê´€ë¦¬
- ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Saga íŒ¨í„´ì„ í†µí•œ ë¶„ì‚° íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- ConsistencyCheckerê°€ ë°ì´í„° ë¬´ê²°ì„± ì£¼ê¸°ì  ê²€ì¦
```

#### 6.1.3 ì‹œìŠ¤í…œ ë³µêµ¬ ì ˆì°¨

```
[ì¥ì•  ê°ì§€] â†’ [AutoRecoveryService] â†’ [ManualInterventionAlert]
- AutoRecoveryServiceê°€ ì‚¬ì „ ì •ì˜ëœ ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ì‹¤í–‰
- ë³µêµ¬ ë¶ˆê°€ ì‹œ ManualInterventionAlertë¥¼ í†µí•´ ê´€ë¦¬ì í˜¸ì¶œ
- ì‹œìŠ¤í…œ ì¬ì‹œì‘, ìºì‹œ ì´ˆê¸°í™”, ì—°ê²° ì¬ì„¤ì • ë“± ë³µêµ¬ ì‘ì—… ìˆ˜í–‰
```

## 7. ì„±ëŠ¥ ìµœì í™” ë° í™•ì¥ì„±

### 7.1 ìºì‹œ ì „ëµ

```
[ë°ì´í„° ìš”ì²­] â†’ [CacheManager] â†’ [RedisCache]
                              â†’ [LocalCache]
- CacheManagerê°€ ë‹¤ì¸µ ìºì‹œ ì „ëµ ê´€ë¦¬
- ìì£¼ ì¡°íšŒë˜ëŠ” ë¬¸ì„œ ë©”íƒ€ë°ì´í„°ëŠ” LocalCacheì— ì €ì¥
- ê²€ìƒ‰ ê²°ê³¼ ë° ì„¸ì…˜ ì •ë³´ëŠ” RedisCacheì— ì €ì¥
- TTL ê¸°ë°˜ ìºì‹œ ë§Œë£Œ ë° ë¬´íš¨í™” ì •ì±… ì ìš©
```

### 7.2 ë¹„ë™ê¸° ì²˜ë¦¬

```
[ìš”ì²­ ì ‘ìˆ˜] â†’ [AsyncTaskManager] â†’ [TaskQueue]
- AsyncTaskManagerê°€ ì¥ì‹œê°„ ì†Œìš” ì‘ì—…ì„ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬
- TaskQueueë¥¼ í†µí•œ ì‘ì—… ìˆœì„œ ê´€ë¦¬ ë° ìš°ì„ ìˆœìœ„ ì ìš©
- ì§„í–‰ ìƒí™© ì¶”ì  ë° ê²°ê³¼ í†µì§€ ë©”ì»¤ë‹ˆì¦˜ ì œê³µ
```

ì´ ë™ì  ì„¤ê³„ ëª…ì„¸ì„œëŠ” ABEKMì˜ ì£¼ìš” ê¸°ëŠ¥ë“¤ì´ 2025ë…„ 10ì›” í˜„ì¬ ì‹¤ì œë¡œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ê³  ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ë¥¼ ìƒì„¸íˆ ê¸°ìˆ í•˜ì—¬, ê°œë°œ íŒ€ì´ ì‹œìŠ¤í…œì„ ìœ ì§€ë³´ìˆ˜í•˜ê³  í™•ì¥í•  ë•Œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì¢…í•©ì ì¸ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## ë¶€ë¡: ìµœì‹  êµ¬í˜„ ì •ë³´ (2025-10-27 ì—…ë°ì´íŠ¸)

### ì‹¤ì œ êµ¬í˜„ëœ ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

**ë¬¸ì„œ ê´€ë¦¬ (`/api/v1/documents`):**
- `POST /upload` - ë©€í‹°ëª¨ë‹¬ ë¬¸ì„œ ì—…ë¡œë“œ ë° íŒŒì´í”„ë¼ì¸ ì²˜ë¦¬
- `GET /` - ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ (ê¶Œí•œ í•„í„°ë§)
- `GET /containers` - ì‚¬ìš©ì ì ‘ê·¼ ê°€ëŠ¥ ì»¨í…Œì´ë„ˆ ëª©ë¡
- `DELETE /{document_id}` - ë¬¸ì„œ ì‚­ì œ
- `GET /{document_id}/download` - ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ
- `GET /{file_bss_info_sno}/chunks` - ë¬¸ì„œ ì²­í¬ ì¡°íšŒ
- `GET /upload-progress/{upload_id}` - ì—…ë¡œë“œ ì§„í–‰ë¥ 

**ê²€ìƒ‰ (`/api/v1/search`):**
- `POST /hybrid` - í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (ë²¡í„° + í‚¤ì›Œë“œ)
- `POST /search` - í†µí•© ê²€ìƒ‰
- `POST /unified` - í†µí•© ê²€ìƒ‰ API
- `POST /context` - ì»¨í…ìŠ¤íŠ¸ ê²€ìƒ‰
- `GET /suggestions` - ê²€ìƒ‰ ì œì•ˆ
- `POST /documents/reindex/{file_id}` - ì¬ìƒ‰ì¸

**ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ (`/api/v1/multimodal_search`):**
- `POST /multimodal` - ë©€í‹°ëª¨ë‹¬ í†µí•© ê²€ìƒ‰
- `POST /clip` - CLIP ì´ë¯¸ì§€ ê²€ìƒ‰
- `POST /hybrid` - ë©€í‹°ëª¨ë‹¬ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
- `POST /multimodal/image` - ì´ë¯¸ì§€ ì—…ë¡œë“œ ê²€ìƒ‰
- `GET /context/{chunk_id}` - ì²­í¬ ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ

**AI ì±„íŒ… (`/api/v1/chat`):**
- `POST /stream` - ìŠ¤íŠ¸ë¦¬ë° RAG ì±„íŒ…
- `POST /message` - ì¼ë°˜ ë©”ì‹œì§€ ì „ì†¡
- `GET /sessions` - ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
- `GET /sessions/{session_id}` - ì„¸ì…˜ ìƒì„¸
- `DELETE /sessions/{session_id}` - ì„¸ì…˜ ì‚­ì œ
- `POST /sessions/{session_id}/archive` - ì„¸ì…˜ ì•„ì¹´ì´ë¸Œ
- `GET /multi-agent/capabilities` - ë©€í‹° ì—ì´ì „íŠ¸ ê¸°ëŠ¥ ì¡°íšŒ

**í”„ë ˆì  í…Œì´ì…˜ (`/api/v1/presentation`):**
- `GET /chat/presentation/templates` - PPT í…œí”Œë¦¿ ëª©ë¡
- `GET /chat/presentation/templates/{template_id}` - í…œí”Œë¦¿ ìƒì„¸
- `POST /chat/presentation/templates/upload` - í…œí”Œë¦¿ ì—…ë¡œë“œ
- `DELETE /chat/presentation/templates/{template_id}` - í…œí”Œë¦¿ ì‚­ì œ

**íŒŒì¼ ë·°ì–´ (`/api/v1/files`):**
- `GET /view/{file_id}` - íŒŒì¼ ë·°ì–´
- `GET /iframe-view/{file_id}` - iframe ë·°ì–´
- `GET /office-to-pdf/{file_id}` - LibreOffice PDF ë³€í™˜
- `GET /download/{file_id}` - íŒŒì¼ ë‹¤ìš´ë¡œë“œ

**ì¸ì¦ (`/api/v1/auth` or `/api/v1/users`):**
- `POST /login` - ë¡œê·¸ì¸ (JWT ë°œê¸‰)
- `POST /refresh` - í† í° ê°±ì‹ 
- `POST /logout` - ë¡œê·¸ì•„ì›ƒ
- `GET /me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´
- `POST /change-password` - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

**ê¶Œí•œ ê´€ë¦¬ (`/api/v1/permissions`):**
- `GET /check/{user_emp_no}/{container_id}` - ê¶Œí•œ í™•ì¸
- `GET /accessible-containers/{user_emp_no}` - ì ‘ê·¼ ê°€ëŠ¥ ì»¨í…Œì´ë„ˆ
- `POST /grant` - ê¶Œí•œ ë¶€ì—¬
- `DELETE /revoke/{user_emp_no}/{container_id}` - ê¶Œí•œ íšŒìˆ˜
- `GET /statistics` - ê¶Œí•œ í†µê³„

**ì»¨í…Œì´ë„ˆ ê´€ë¦¬ (`/api/v1/containers`):**
- `GET /` - ì»¨í…Œì´ë„ˆ ëª©ë¡
- `GET /{container_id}` - ì»¨í…Œì´ë„ˆ ìƒì„¸

### ì£¼ìš” í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ user/
â”‚       â”œâ”€â”€ Dashboard.tsx (ëŒ€ì‹œë³´ë“œ)
â”‚       â”œâ”€â”€ SearchPage.tsx (ê²€ìƒ‰ í˜ì´ì§€)
â”‚       â”œâ”€â”€ ChatPage.tsx (AI ì±„íŒ…)
â”‚       â”œâ”€â”€ my-knowledge/
â”‚       â”‚   â”œâ”€â”€ UploadPage.tsx (ë¬¸ì„œ ì—…ë¡œë“œ)
â”‚       â”‚   â””â”€â”€ MyKnowledgePage.tsx (ë‚´ ë¬¸ì„œ)
â”‚       â”œâ”€â”€ search/
â”‚       â”‚   â”œâ”€â”€ useSearch.ts (ê²€ìƒ‰ Hook)
â”‚       â”‚   â”œâ”€â”€ ResultList.tsx (ê²°ê³¼ ëª©ë¡)
â”‚       â”‚   â”œâ”€â”€ SearchResultCard.tsx (ê²°ê³¼ ì¹´ë“œ)
â”‚       â”‚   â”œâ”€â”€ FilterPanel.tsx (í•„í„° íŒ¨ë„)
â”‚       â”‚   â””â”€â”€ types.ts (íƒ€ì… ì •ì˜)
â”‚       â””â”€â”€ presentation/
â”‚           â””â”€â”€ PresentationPage.tsx (PPT ìƒì„±)
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx (ë©”ì‹œì§€)
â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx (ì…ë ¥)
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx (ë©”ì‹œì§€ ëª©ë¡)
â”‚   â”‚   â””â”€â”€ SelectedDocumentsDisplay.tsx (ì„ íƒ ë¬¸ì„œ)
â”‚   â””â”€â”€ common/
â”‚       â”œâ”€â”€ FileViewer.tsx (íŒŒì¼ ë·°ì–´)
â”‚       â””â”€â”€ LoadingSpinner.tsx (ë¡œë”©)
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ searchService.ts (ê²€ìƒ‰ API)
â”‚   â”œâ”€â”€ chatService.ts (ì±„íŒ… API)
â”‚   â”œâ”€â”€ documentService.ts (ë¬¸ì„œ API)
â”‚   â””â”€â”€ authService.ts (ì¸ì¦ API)
â”‚
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ GlobalAppContext.tsx (ì „ì—­ ìƒíƒœ)
â”‚   â””â”€â”€ types.ts (íƒ€ì…)
â”‚
â””â”€â”€ hooks/
    â”œâ”€â”€ useSearch.ts (ê²€ìƒ‰ Hook)
    â”œâ”€â”€ useChatSession.ts (ì±„íŒ… Hook)
    â””â”€â”€ useDocumentUpload.ts (ì—…ë¡œë“œ Hook)
```

### ì£¼ìš” ë°±ì—”ë“œ ì„œë¹„ìŠ¤ êµ¬ì¡°

```
backend/app/
â”œâ”€â”€ api/v1/
â”‚   â”œâ”€â”€ documents.py (ë¬¸ì„œ ê´€ë¦¬ API)
â”‚   â”œâ”€â”€ search.py (ê²€ìƒ‰ API)
â”‚   â”œâ”€â”€ multimodal_search.py (ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ API)
â”‚   â”œâ”€â”€ chat.py (ì±„íŒ… API)
â”‚   â”œâ”€â”€ presentation.py (í”„ë ˆì  í…Œì´ì…˜ API)
â”‚   â”œâ”€â”€ files.py (íŒŒì¼ ë·°ì–´ API)
â”‚   â”œâ”€â”€ users.py (ì¸ì¦ API)
â”‚   â”œâ”€â”€ permissions.py (ê¶Œí•œ API)
â”‚   â””â”€â”€ containers.py (ì»¨í…Œì´ë„ˆ API)
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ document/
â”‚   â”‚   â”œâ”€â”€ document_service.py (ë¬¸ì„œ ì„œë¹„ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ pipeline/
â”‚   â”‚   â”‚   â””â”€â”€ integrated_document_pipeline_service.py (í†µí•© íŒŒì´í”„ë¼ì¸)
â”‚   â”‚   â””â”€â”€ processing/
â”‚   â”‚       â””â”€â”€ document_preprocessing_service.py (ì „ì²˜ë¦¬)
â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”œâ”€â”€ search_service.py (ê²€ìƒ‰ ì„œë¹„ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ vector_search_service.py (ë²¡í„° ê²€ìƒ‰)
â”‚   â”‚   â””â”€â”€ keyword_search_service.py (í‚¤ì›Œë“œ ê²€ìƒ‰)
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ chat_service.py (ì±„íŒ… ì„œë¹„ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ rag_service.py (RAG ì„œë¹„ìŠ¤)
â”‚   â”‚   â””â”€â”€ session_manager.py (ì„¸ì…˜ ê´€ë¦¬)
â”‚   â”œâ”€â”€ multi_agent/
â”‚   â”‚   â””â”€â”€ agent_service.py (ì—ì´ì „íŠ¸ ì„œë¹„ìŠ¤)
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ embedding_service.py (ì„ë² ë”© ì„œë¹„ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ korean_nlp_service.py (í•œêµ­ì–´ NLP)
â”‚   â”‚   â”œâ”€â”€ english_nlp_service.py (ì˜ì–´ NLP)
â”‚   â”‚   â””â”€â”€ azure_blob_service.py (ìŠ¤í† ë¦¬ì§€)
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ permission_service.py (ê¶Œí•œ ì„œë¹„ìŠ¤)
â”‚       â””â”€â”€ container_service.py (ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤)
â”‚
â””â”€â”€ models/
    â”œâ”€â”€ file_models.py (íŒŒì¼ ëª¨ë¸)
    â”œâ”€â”€ user_models.py (ì‚¬ìš©ì ëª¨ë¸)
    â””â”€â”€ container_models.py (ì»¨í…Œì´ë„ˆ ëª¨ë¸)
```

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì£¼ìš” í…Œì´ë¸”

- `tb_user` - ì‚¬ìš©ì ì •ë³´
- `tb_knowledge_containers` - ì§€ì‹ ì»¨í…Œì´ë„ˆ
- `tb_user_permissions` - ì‚¬ìš©ì ê¶Œí•œ
- `tb_file_bss_info` - íŒŒì¼ ê¸°ë³¸ ì •ë³´
- `tb_file_dtl_info` - íŒŒì¼ ìƒì„¸ ì •ë³´
- `doc_extracted_chunks` - ë¬¸ì„œ ì²­í¬ (vector(1024) ì„ë² ë”©)
- `doc_extracted_object` - ì´ë¯¸ì§€/í‘œ/ì°¨íŠ¸ (vector(512) CLIP ì„ë² ë”©)
- `tb_chat_sessions` - ì±„íŒ… ì„¸ì…˜
- `tb_chat_messages` - ì±„íŒ… ë©”ì‹œì§€
- `tb_academic_document_metadata` - í•™ìˆ ë…¼ë¬¸ ë©”íƒ€ë°ì´í„°

## 7. ê´€ë¦¬ì ê¸°ëŠ¥ ì ìš© í˜„í™© ì—…ë°ì´íŠ¸ (2025-10-31)

ë³¸ ì ˆì€ ìµœê·¼ ë°˜ì˜ëœ ì‹œìŠ¤í…œê´€ë¦¬ì/ì§€ì‹ê´€ë¦¬ì í™”ë©´ì˜ ì‚¬ìš©ì ê´€ë¦¬, ì§€ì‹ ì»¨í…Œì´ë„ˆ ê´€ë¦¬, ê¶Œí•œ ìŠ¹ì¸ ê´€ë¦¬ ê¸°ëŠ¥ì˜ ì‹¤ì œ êµ¬í˜„ ìƒíƒœë¥¼ ìš”ì•½í•©ë‹ˆë‹¤. í™”ë©´ íë¦„, ì‚¬ìš© API, í”„ëŸ°íŠ¸ì—”ë“œ íŒŒì¼ ìœ„ì¹˜, ë°ì´í„° ê³„ì•½(í•„ë“œ ë§¤í•‘)ê³¼ ì˜ˆì™¸ ì²˜ë¦¬ ê¸°ì¤€ì„ ëª…í™•íˆ í•©ë‹ˆë‹¤.

### 7.1 ì§€ì‹ê´€ë¦¬ì í™”ë©´: ê¶Œí•œ ìŠ¹ì¸ Â· ì‚¬ìš©ì ê¶Œí•œ í˜„í™©

- í”„ëŸ°íŠ¸ì—”ë“œ íŒŒì¼
   - `frontend/src/pages/manager/PermissionApprovalManagement.tsx`
   - `frontend/src/pages/manager/UserPermissionManagement.tsx`
   - `frontend/src/services/managerService.ts`

- íƒ­ êµ¬ì„± (ê¶Œí•œ ìŠ¹ì¸ í™”ë©´)
   - ìŠ¹ì¸ ëŒ€ê¸°: ì»¨í…Œì´ë„ˆë³„ ëŒ€ê¸° ìš”ì²­ ëª©ë¡ ì¡°íšŒ ë° ìŠ¹ì¸/ê±°ë¶€
   - ê¶Œí•œ í˜„í™©: ì‚¬ìš©ìë³„ í˜„ì¬ ê¶Œí•œ í˜„í™© ì¡°íšŒ ë° í•„í„°ë§
   - ìŠ¹ì¸ ì´ë ¥: ê³¼ê±° ìŠ¹ì¸/ê±°ë¶€ ë‚´ì—­ ì¡°íšŒ(í™•ì¥ ì˜ˆì •)

- ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸
   - GET `/api/v1/permissions/all-user-permissions`
      - ì„¤ëª…: ì „ì²´ ì‚¬ìš©ì ê¶Œí•œ í˜„í™© ì¡°íšŒ
      - ì ‘ê·¼: ì§€ì‹ê´€ë¦¬ì/ì‹œìŠ¤í…œê´€ë¦¬ì (ë°±ì—”ë“œì—ì„œ ê´€ë¦¬ì ê¶Œí•œ í™•ì¸)
      - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ(í•µì‹¬ í•„ë“œ):
         - `user_emp_no`, `user_name`(HR.emp_nm), `department`(HR.dept_nm)
         - `container_id`, `container_name`
         - `permission_type` in {`admin`, `write`, `read`} (role_id ë§¤í•‘ ê²°ê³¼)
         - `granted_at`, `expires_date`
   - GET `/api/v1/permission-requests/pending`
      - ì„¤ëª…: ìŠ¹ì¸ ëŒ€ê¸° ê¶Œí•œ ìš”ì²­ ì¡°íšŒ
      - ì‘ë‹µ: `{ total: number, requests: RequestDto[] }` í˜•íƒœ(ëª©ë¡ê³¼ ì´ê±´ìˆ˜)

- ë°ì´í„° íë¦„ ìš”ì•½
   1) ê¶Œí•œ í˜„í™© íƒ­ ì§„ì… â†’ `managerService.getUserPermissions()` í˜¸ì¶œ
   2) ë°±ì—”ë“œ `PermissionService.list_all_permissions()`ê°€ HR ì¡°ì¸(emp_nm, dept_nm)ê³¼ ì»¨í…Œì´ë„ˆ/ì—­í•  ë§¤í•‘ ìˆ˜í–‰
   3) í”„ëŸ°íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©ì/ë¶€ì„œ/ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í•„í„° ë° ê²€ìƒ‰ ì œê³µ, íŒ€ì› ëª©ë¡ì€ ê¶Œí•œ ë ˆì½”ë“œì—ì„œ ìœ ë„(fallback)

- í•„ë“œ/íƒ€ì… ì •í•©ì„±
   - HR ìŠ¤í‚¤ë§ˆ: `TbSapHrInfo.emp_nm`, `TbSapHrInfo.dept_nm` ì‚¬ìš©
   - ê¶Œí•œ ë§Œë£Œì¼: `expires_date` ì‚¬ìš© (`valid_until` ì‚¬ìš© ê¸ˆì§€)
   - ì—­í• â†’ê¶Œí•œ ë§¤í•‘: `role_id` â†’ `permission_type` ë§¤í•‘ í‘œì¤€í™”
      - `ROLE_ADMIN` ê³„ì—´ â†’ `admin`
      - `ROLE_EDITOR`/`WRITE` ê³„ì—´ â†’ `write`
      - `ROLE_VIEWER`/`READ` ê³„ì—´ â†’ `read`

- ê´€ë¦¬ì ë²”ìœ„(ì§€ì‹ê´€ë¦¬ì ìŠ¤ì½”í”„)
   - ëª©í‘œ: â€œë¡œê·¸ì¸í•œ ì§€ì‹ê´€ë¦¬ìê°€ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆâ€ë¡œ ê²°ê³¼ ì œí•œ
   - í˜„í™©: í”„ëŸ°íŠ¸ í•„í„° ì ìš© ì™„ë£Œ, ë°±ì—”ë“œ ì¿¼ë¦¬ ë ˆë²¨ ì œí•œì€ ë‹¨ê³„ì  ë„ì… ì˜ˆì •
   - ì¡°ì¹˜: `list_all_permissions()`ì— ì»¨í…Œì´ë„ˆ-ê´€ë¦¬ì ë§¤í•‘ ì¡°ì¸ ì¶”ê°€í•˜ì—¬ ì„œë²„ ë‹¨ ì œí•œ ì˜ˆì •

### 7.2 ì§€ì‹ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ í™”ë©´(ì§€ì‹ê´€ë¦¬ì)

- ëª©ì : ë‹´ë‹¹ ì»¨í…Œì´ë„ˆ êµ¬ì¡°/ìƒíƒœ í™•ì¸, ì‚¬ìš©ì ê¶Œí•œ ì¡°íšŒ, ê¶Œí•œ ì •ì±… ì ìš©
- í™”ë©´ ì—°ê³„: ê¶Œí•œ ìŠ¹ì¸ íƒ­ê³¼ ìƒí˜¸ ì´ë™, ì»¨í…Œì´ë„ˆë³„ ê¶Œí•œ ë³´ê¸°ë¡œ ë”¥ë§í¬
- ê´€ë ¨ API(ì˜ˆ):
   - GET `/api/v1/containers/{id}`: ì»¨í…Œì´ë„ˆ ìƒì„¸(ìœ íš¨/ë¹„í™œì„±, ìƒÂ·í•˜ìœ„ ê²½ë¡œ)
   - GET `/api/v1/containers/{id}/permissions`: í•´ë‹¹ ì»¨í…Œì´ë„ˆ ê¶Œí•œ í˜„í™©(í™•ì¥ ì˜ˆì •)
   - POST `/api/v1/containers/{id}/permissions`: ê¶Œí•œ ë¶€ì—¬(ìŠ¹ì¸ ì ìš© ì‹œ ë‚´ë¶€ í˜¸ì¶œ)

### 7.3 ì‹œìŠ¤í…œê´€ë¦¬ì í™”ë©´: ì‚¬ìš©ì/ì»¨í…Œì´ë„ˆ ê´€ë¦¬ ê°œìš”

- ì‚¬ìš©ì ê´€ë¦¬
   - ê¸°ëŠ¥: ê³„ì •/ì—­í•  ê´€ë¦¬, ë¹„í™œì„±í™”, ì´ˆê¸°í™”, ê¶Œí•œ í˜„í™© ì ê²€(ì „ì‚¬)
   - ì°¸ê³  API: `/api/v1/users/*`, `/api/v1/permissions/*`

- ì»¨í…Œì´ë„ˆ ê´€ë¦¬
   - ê¸°ëŠ¥: ì»¨í…Œì´ë„ˆ ìƒì„±/ì´ë™/ë¹„í™œì„±í™”, ì¡°ì§(ERP) ì½”ë“œ ë§¤í•‘, ì •ì±… í…œí”Œë¦¿ ì ìš©
   - ì°¸ê³  API: `/api/v1/containers/*`

### 7.4 í”„ëŸ°íŠ¸ì—”ë“œ êµ¬í˜„ í¬ì¸íŠ¸

- ì„œë¹„ìŠ¤ ê³„ì¸µ
   - `managerService.getUserPermissions()`
      - `/api/v1/permissions/all-user-permissions` í˜¸ì¶œ í›„ ë‹¤ìŒ í•„ë“œë¡œ ë§¤í•‘:
         - `id`, `user_id`(=user_emp_no), `user_name`, `department`
         - `container_id`, `container_name`, `permission`
         - `granted_at`, `valid_until`(ì˜µì…”ë„, ë°±ì—”ë“œ `expires_date` ê¸°ë°˜)

- UI/UX
   - ìŠ¹ì¸ ëŒ€ê¸°/í˜„í™©/ì´ë ¥ íƒ­ ë¶„ë¦¬ë¡œ ë°ì´í„° ë¡œë”© ìµœì†Œí™”
   - ë¶€ì„œÂ·ì»¨í…Œì´ë„ˆÂ·ê¶Œí•œíƒ€ì… í•„í„°ì™€ í‚¤ì›Œë“œ ê²€ìƒ‰
   - ë°ì´í„° ì—†ìŒ ì‹œ íŒ€ì› ëª©ë¡ì„ ê¶Œí•œ ë ˆì½”ë“œì—ì„œ ìœ ë„í•˜ì—¬ ê³µë°± ë°©ì§€

### 7.5 ì˜ˆì™¸ ë° ë¡œê¹… í‘œì¤€

- ê¶Œí•œ/ìŠ¹ì¸ ì¡°íšŒ ì‹¤íŒ¨
   - 403 ê¶Œí•œ ë¶€ì¡±, 404 ë¦¬ì†ŒìŠ¤ ì—†ìŒ, 500 ë‚´ë¶€ ì˜¤ë¥˜ ë¡œê¹…
   - ê´€ë¦¬ì íƒ­: ì‚¬ìš©ì ë©”ì‹œì§€ ê°„ê²°í™” + ìƒì„¸ëŠ” ì½˜ì†”/ì„œë²„ ë¡œê·¸ë¡œ ë¶„ë¦¬

- ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜/ì´ê´€ ì‹œë‚˜ë¦¬ì˜¤
   - HR í•„ë“œ ë¶ˆì¼ì¹˜(emp_nm/dept_nm) ê°ì§€ ì‹œ ì„œë²„ í‘œì¤€í™” ë ˆì´ì–´ ë³´ì •
   - ë§Œë£Œ í•„ë“œ(`expires_date`) ëˆ„ë½ ë ˆì½”ë“œ: UIì—ì„œ `-` ì²˜ë¦¬

### 7.6 ì¶”í›„ ë³´ì™„ í•­ëª©

- ì„œë²„ ì¸¡ â€œê´€ë¦¬ì ìŠ¤ì½”í”„â€ ê°•ì œ í•„í„° ì™„ì„± ë° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€
- ìŠ¹ì¸ ì´ë ¥ íƒ­ API(í˜ì´ì§€ë„¤ì´ì…˜ í¬í•¨) ì •ì‹í™”
- ì»¨í…Œì´ë„ˆ ë‹¨ìœ„ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ API ê³µê°œ ë° í”„ëŸ°íŠ¸ ì—°ë™
- ì¼ê´„ ìŠ¹ì¸/ê¶Œí•œ í…œí”Œë¦¿ ì ìš© ë°°ì¹˜ UX ì¶”ê°€

---

*ğŸ“… ìµœì¢… ì—…ë°ì´íŠ¸: 2025ë…„ 10ì›” 31ì¼*  
*ğŸ“‹ ë¬¸ì„œ ë²„ì „: v3.1 (ê´€ë¦¬ì í™”ë©´/ê¶Œí•œ ìŠ¹ì¸ í˜„í™© ë°˜ì˜)*  
*ğŸ”§ ì‘ì„±ì: ABEKM ê°œë°œíŒ€*
