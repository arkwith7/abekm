# ë³„ì²¨01. IPBridge ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ (ì¬êµ¬ì„± v3.4)

ë¬¸ì„œ ë²„ì „: v3.4  
ìµœì¢… ì—…ë°ì´íŠ¸: 2025-11-21  
ì‘ì„±íŒ€: WKMS ê°œë°œíŒ€  
ì´ì „ ë²„ì „: v3.3 (ì„¹ì…˜ ê¸°ë°˜ ì„œìˆ ) â†’ ê´€ì í˜• êµ¬ì¡°ë¡œ ì¬í¸

## 1. ê°œìš”

### 1.1 ë¬¸ì„œ ëª©ì 
IPBridge(AI Based Enterprise Knowledge Management)ì˜ ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ë¥¼ ì„¸ ê°€ì§€ í•µì‹¬ ê´€ì (ì§€ì‹ ì»¨í…Œì´ë„ˆ / ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ / ì—­í•  ê¸°ë°˜ ê¶Œí•œ)ìœ¼ë¡œ ì¬êµ¬ì„±í•˜ì—¬ ë¹ ë¥¸ ì •ì‹  ëª¨ë¸ê³¼ ìš´ì˜Â·ê°œë°œ ì˜ì‚¬ê²°ì •ì„ ì§€ì›í•©ë‹ˆë‹¤.

### 1.2 ê¶Œí•œ ê´€ë¦¬ ë²”ìœ„ (3ëŒ€ ê´€ì )
1. ì§€ì‹ ì»¨í…Œì´ë„ˆ: ê³„ì¸µì  ì§€ì‹ ì €ì¥ì†Œ êµ¬ì¡° ë° ìƒì„±/ìƒì†/ê´€ë¦¬ ë²”ìœ„
2. ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ: ë‹¨ì¼ ë¬¸ì„œ Access Levelê³¼ ëŒ€ìƒ ê¸°ë°˜ ê·œì¹™(Restricted)
3. ì—­í•  ê¸°ë°˜ ê¶Œí•œ: RBAC ì—­í• â†’ê¶Œí•œ ë§¤í•‘ ë° ìš°ì„ ìˆœìœ„ ê²°ì • ë¡œì§

### 1.3 ì¡°ì§ ë°ì´í„° Provider ê°œë…
ë²¤ë”(SAP ë“±)ì— ì¢…ì†ë˜ì§€ ì•Šë„ë¡ ì¸ì‚¬Â·ì¡°ì§ ì •ë³´ë¥¼ Providerë¡œ ì¼ë°˜í™”í•©ë‹ˆë‹¤.

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| emp_no | ì‚¬ìš©ì ì‹ë³„ì | MSS001 |
| emp_nm | ì‚¬ìš©ì ì´ë¦„ | ì •MS |
| dept_code | ë¶€ì„œ ì½”ë“œ | MS001 |
| dept_nm | ë¶€ì„œ ì´ë¦„ | MSì„œë¹„ìŠ¤íŒ€ |
| org_path | ì¡°ì§ ê²½ë¡œ | /CEOì§ì†/í´ë¼ìš°ë“œë³¸ë¶€/MSì„œë¹„ìŠ¤íŒ€ |
| position | ì§ì±… | íŒ€ì¥ |

íŠ¸ë¦¬ê±° ìœ í˜•: ìŠ¤ì¼€ì¤„(ì •ê¸°), ì´ë²¤íŠ¸(ì›¹í›…), ìˆ˜ë™(API) ë³‘í–‰ ê°€ëŠ¥. ë³€ê²½(ì…ì‚¬/ì´ë™/í‡´ì‚¬/ì¡°ì§ê°œí¸)ì€ ê¶Œí•œ ì¬ë°°ì¹˜ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

### 1.4 ë¹ ë¥¸ íƒìƒ‰ ì¸ë±ìŠ¤
| ì„¹ì…˜ | ëª©ì  | í•µì‹¬ í‘œ | ì£¼ìš” ê²°ì • |
|------|------|--------|-----------|
| 2 ê´€ì  A | ì»¨í…Œì´ë„ˆ êµ¬ì¡°Â·ìƒì† | ê³„ì¸µ ê²½ë¡œ & ìƒì„± ê·œì¹™ | OWNER/MANAGER ìë™ ë¶€ì—¬ |
| 3 ê´€ì  B | ë¬¸ì„œ Access Level | Access Level 3ë‹¨ê³„ | Restricted ê·œì¹™ ì¹˜í™˜ ì €ì¥ |
| 4 ê´€ì  C | ì—­í•  & ê¶Œí•œ | ì—­í• â†’ê¶Œí•œ ë§¤í•‘ | ìš°ì„ ìˆœìœ„(ì§ì ‘ > í•˜í–¥ > ìƒí–¥ > ì—­í• ) |
| 5 í†µí•© í”„ë¡œì„¸ìŠ¤ | ìš”ì²­/ìŠ¹ì¸ & ë™ê¸°í™” | ìš”ì²­ í…Œì´ë¸” ìš”ì•½ | ìë™ íšŒìˆ˜Â·ì¬ë¶€ì—¬ |
| 6 ìš´ì˜/ê±°ë²„ë„ŒìŠ¤ | ëª¨ë‹ˆí„°Â·ê°ì‚¬Â·ìˆ˜ì • | ê°ì‚¬ ë¡œê·¸ ìš”ì†Œ | ê¶Œí•œ ëˆ„ìˆ˜ ëŒ€ì‘ |
| 7 UI/ë„êµ¬ | ëª¨ë‹¬Â·ëŒ€ì‹œë³´ë“œ | ì‚¬ìš©ì vs ê´€ë¦¬ì ë¹„êµ | ë‹¨ì¼ vs ë‹¤ì¤‘ ê·œì¹™ |
| 8 ë¡œë“œë§µ | í–¥í›„ ê°œì„  | ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„ | íŠ¸ëœì­ì…˜Â·ì¶”ê°€ ê¶Œí•œ íƒ€ì… |

## 2. ê´€ì  A: ì§€ì‹ ì»¨í…Œì´ë„ˆ (Hierarchy & Lifecycle)

### 2.1 ê³„ì¸µ êµ¬ì¡° ëª¨ë¸
```
ğŸ¢ ê¸°ì—… ì¡°ì§ (ROOT - COMPANY)
â”œâ”€â”€ ğŸ“ CEOì§ì† (DIVISION)
â”‚   â”œâ”€â”€ ğŸ“ ì¸ì‚¬ì „ëµíŒ€ (DEPARTMENT)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ì±„ìš©íŒ€ (TEAM)
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ ì±„ìš©ê°€ì´ë“œ.pdf (DOCUMENT)
â”‚   â”‚   â””â”€â”€ ğŸ“ êµìœ¡íŒ€
â”‚   â””â”€â”€ ğŸ“ ê¸°íšíŒ€
â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€
â”‚   â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì„œë¹„ìŠ¤íŒ€
â”‚   â””â”€â”€ ğŸ“ MSì„œë¹„ìŠ¤íŒ€
â””â”€â”€ ğŸ“ CTIì‚¬ì—…ë³¸ë¶€
    â”œâ”€â”€ ğŸ“ ì¸í”„ë¼ì»¨ì„¤íŒ…íŒ€
    â””â”€â”€ ğŸ“ Bizìš´ì˜1íŒ€
```

### 2.2 í•µì‹¬ ë°ì´í„° (ìš”ì•½)
| í•„ë“œ | ì˜ë¯¸ | ë¹„ê³  |
|------|------|------|
| container_id | ì»¨í…Œì´ë„ˆ ì‹ë³„ì | ê³„ì¸µ ê²½ë¡œ êµ¬ì„± ìš”ì†Œ |
| parent_container_id | ìƒìœ„ ID | ë£¨íŠ¸ NULL |
| external_org_code | Provider ì¡°ì§ ì½”ë“œ | ì´ì „ ëª…ì¹­ sap_org_code |
| hierarchy_level | ê¹Šì´ (ë£¨íŠ¸=1) | íƒìƒ‰ ìµœì í™” |
| hierarchy_path | ë£¨íŠ¸â†’í˜„ì¬ ê²½ë¡œ | ìƒì†Â·ì¡°íšŒ ìºì‹œ í‚¤ |
| container_type | COMPANY/DIVISION/... | ì •ì±… ë¶„ê¸° ê¸°ì¤€ |
| is_active | í™œì„± ìƒíƒœ | Y/N |

ìƒì† ìŠ¤ìº” ì„±ëŠ¥: `hierarchy_path`ë¥¼ í™œìš©í•´ ìƒìœ„ ì²´ì¸ ìºì‹œ â†’ ë°˜ë³µ DB íƒìƒ‰ ìµœì†Œí™”.

### 2.3 ìƒì„± & ìë™ ê¶Œí•œ ë¶€ì—¬ ê·œì¹™
| ë‹¨ê³„ | ì²˜ë¦¬ | ê²°ê³¼ |
|------|------|------|
| ì»¨í…Œì´ë„ˆ ìƒì„± | parent ì§€ì •, íƒ€ì… ì„¤ì • | ìƒˆ ID ë°œê¸‰ |
| ìƒì„±ì ê¶Œí•œ | OWNER ìë™ ë¶€ì—¬ | ê´€ë¦¬/í¸ì§‘ ìµœìš°ì„  |
| ìƒìœ„ ê´€ë¦¬ì ê¶Œí•œ | ìƒìœ„ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ì â†’ MANAGER ê¶Œí•œ í™•ì¥ | ê´€ë¦¬ ë²”ìœ„ í•˜í–¥ í™•ì¥ |
| ìƒí–¥ READ ë³´ì¥ (ì˜ˆì •) | ìƒì„±ìì—ê²Œ ìƒìœ„ ì²´ì¸ READ | ìƒìœ„ ë¬¸ë§¥ ì ‘ê·¼ ìš©ì´ |

ì˜ˆì™¸: PERSONAL ì»¨í…Œì´ë„ˆ ì‚­ì œ ì‹œ ë¬¸ì„œ 0ê±´ + OWNER í™•ì¸ í•„ìš”.

### 2.4 ìƒì† ë° ê´€ë¦¬ ë²”ìœ„ ì›ì¹™
| ì›ì¹™ | ì„¤ëª… | ì˜ˆ |
|------|------|----|
| ìƒí–¥ ìµœì†Œ READ | í•˜ìœ„ ê´€ë¦¬ì ìƒìœ„ ì»¨í…Œì´ë„ˆ READ | íŒ€ ê´€ë¦¬ì â†’ ë³¸ë¶€/ë£¨íŠ¸ READ |
| í•˜í–¥ ê´€ë¦¬ì í™•ì¥ | íŠ¹ì • ì»¨í…Œì´ë„ˆ MANAGER ê¶Œí•œì€ í•˜ìœ„ ì „ì²´ì— í™•ì¥ | ë³¸ë¶€ MANAGER â†’ í•˜ìœ„ ë¶€ì„œ/íŒ€ |
| ì§ì ‘ ê¶Œí•œ ìš°ì„  | ì§ì ‘ ë¶€ì—¬ > ìƒì† | MANAGER + READ ì¶©ëŒ ì‹œ MANAGER ìœ ì§€ |

### 2.5 ì¡°ì§ ë³€ê²½ ë™ê¸°í™”(Provider)
ì‚¬ë²ˆ/ë¶€ì„œ ì´ë™ ì´ë²¤íŠ¸ â†’ ê¶Œí•œ ì¬ë°°ì¹˜ íŒŒì´í”„ë¼ì¸:
1. ë³€ê²½ ìˆ˜ì§‘ (ìŠ¤ì¼€ì¤„/ì›¹í›…)
2. ì´ì „ ë¶€ì„œ ì§ì ‘ ê¶Œí•œ íšŒìˆ˜
3. ìƒˆ ë¶€ì„œ ê¸°ë³¸ ì—­í•  ê¶Œí•œ ë¶€ì—¬(Read ë“±)
4. ê°œì¸ ìƒì„± ìì‚°(ì†Œìœ  ë¬¸ì„œ)ì€ ìœ ì§€
5. ê°ì‚¬ ë¡œê·¸ ê¸°ë¡ + ì•Œë¦¼ ë°œì†¡

### 2.6 ìš´ì˜ ê³ ë ¤ ì‚¬í•­
- ìˆœí™˜ ë¶€ëª¨ ë°©ì§€(ì‚½ì… ì‹œ ê²€ì¦)
- ëŒ€ëŸ‰ ì¡°ì§ ê°œí¸ ì‹œ ë°°ì¹˜ íŠ¸ëœì­ì…˜ í•„ìš”
- ë¹„í™œì„± ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ì°¨ë‹¨(í•„í„° ì „ì²˜ë¦¬)

## 3. ê´€ì  B: ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ (Access Levels & Rules)

### 3.1 Access Level ì •ì˜
| í‘œì‹œ | ë‚´ë¶€ ê°’ | ë²”ìœ„ | ì €ì¥ í˜•íƒœ | ê¶Œí•œ íš¨ê³¼ | ë¹„ê³  |
|------|--------|------|----------|-----------|------|
| ê³µê°œ | public | ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ê°€ëŠ¥í•œ ì „ì²´ ì‚¬ìš©ì | ë‹¨ì¼ ë ˆì½”ë“œ | ì¡°íšŒ(ê²€ìƒ‰ ê²°ê³¼ í¬í•¨) | ê¸°ë³¸ ì˜µì…˜ |
| ì œí•œ ê³µê°œ | restricted | ì§€ì • ì‚¬ìš©ì/ë¶€ì„œ ì§‘í•© | â‰¥1 ë ˆì½”ë“œ(ëŒ€ìƒë³„) | ëŒ€ìƒë³„ view/download/edit | ë‹¤ì¤‘ ëŒ€ìƒ í—ˆìš©(ê´€ë¦¬ì) |
| ë¹„ê³µê°œ | private | ì†Œìœ ì + ê´€ë¦¬ì | ë‹¨ì¼ ë ˆì½”ë“œ | ì¼ë°˜ ì‚¬ìš©ì ì°¨ë‹¨ | ê°ì‚¬ ì ‘ê·¼ í—ˆìš© |

### 3.2 Restricted ê·œì¹™ í•„ë“œ
| í•„ë“œ | ì˜ë¯¸ | ì˜ˆì‹œ | ë¹„ê³  |
|------|------|------|------|
| rule_type | ëŒ€ìƒ ìœ í˜• | user/department | í™•ì¥ ì˜ˆì •(group) |
| target_id | ì‚¬ë²ˆ ë˜ëŠ” ë¶€ì„œëª… | MSS001 / MSì„œë¹„ìŠ¤íŒ€ | í‘œì¤€í™” í•„ìš” |
| permission_level | ì„¸ë¶€ ê¶Œí•œ | view/download/edit | ì¶”í›„ comment/external |
| is_inherited | ìƒì† ì—¬ë¶€ | 'N' | í˜„ì¬ ì§ì ‘ ì§€ì •ë§Œ |
| created_by/created_date | ê°ì‚¬ ì¶”ì  | EMP001 / ISO8601 | ë¡œê·¸ ê¸°ë°˜ ì •í•©ì„± |

### 3.3 ì—…ë¡œë“œ ì‹œ ì´ˆê¸° ì •ì±…
íŒŒì¼ ë©”íƒ€ë°ì´í„° + ê¶Œí•œ ì •ì±… ë™ì‹œ ì œì¶œ â†’ ì €ì¥ í›„ ì¸ë±ì‹± í ë“±ë¡.
ì˜¤ë¥˜ ì¡°ê±´: ì˜ëª»ëœ scope, ê¸ˆì§€ ì¡°í•©(PRIVATE+ì™¸ë¶€ê³µìœ ), ê³¼ê±° ë§Œë£Œì‹œê°.

### 3.4 ê¶Œí•œ ì„¤ì • ëª¨ë‹¬ ë¹„êµ(ìš”ì•½)
ìì„¸í•œ ë¹„êµí‘œëŠ” 7.1ì„ ì°¸ì¡°í•˜ì„¸ìš”. í•µì‹¬ ì°¨ì´ë§Œ ìš”ì•½í•©ë‹ˆë‹¤.
- ì‚¬ìš©ì ëª¨ë‹¬: ë‹¨ì¼ Restricted ê·œì¹™, ì§ì ‘ ì…ë ¥ ì¤‘ì‹¬, ì €ì¥ ì‹œ ì „ì²´ ì¹˜í™˜
- ê´€ë¦¬ì ëª¨ë‹¬: ë‹¤ì¤‘ ê·œì¹™(ì‚¬ìš©ì/ë¶€ì„œ í˜¼í•©), ê²€ìƒ‰ ì§€ì›, ì €ì¥ ì „ ë³€ê²½ ê²½ê³  í‘œì‹œ

### 3.5 ì €ì¥ íŒ¨í„´ (ì›ì ì¹˜í™˜)
1. ê¸°ì¡´ ê·œì¹™ ì¡°íšŒ â†’ ì „ì²´ ì‚­ì œ(ë¬´ì‹œ ê°€ëŠ¥í•œ ì‚­ì œ ì˜¤ë¥˜ ë¡œê¹…)
2. ìƒˆ ìƒíƒœ ê¸°ë°˜ ì‚½ì…(public/private ë‹¨ì¼ / restricted Nê±´)
3. ìµœì¢… ì¡°íšŒ ë™ê¸°í™” â†’ UI ë°˜ì˜
ì¥ì : ë³‘í•© ì¶©ëŒ ì œê±° / ë‹¨ìˆœ ë¡œì§ / ê°ì‚¬ ëª…í™•. ë‹¨ì : ëŒ€ëŸ‰ ê·œì¹™ ì‹œ ìˆœê°„ì  ê³µë°±(íŠ¸ëœì­ì…˜ ê°œì„  ì˜ˆì •).

### 3.6 ê¶Œí•œ ìš”ì²­ê³¼ ë¬¸ì„œ ì ‘ê·¼ ì—°ê²°
ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸ ì™„ë£Œ ì‹œ:
- ì»¨í…Œì´ë„ˆ ê¶Œí•œ ë ˆì½”ë“œ ìƒì„± â†’ ë¬¸ì„œ ì¡°íšŒ ê°€ëŠ¥
- ë¬¸ì„œ access_levelì´ privateì¸ ê²½ìš°ì—ë„ ê´€ë¦¬ì/ì†Œìœ ì ìŠ¹ì¸ í›„ Read í—ˆìš©(ì§ì ‘ ê¶Œí•œ ìš°ì„ )

## 4. ê´€ì  C: ì—­í•  ê¸°ë°˜ ê¶Œí•œ (RBAC & Priority)

### 4.1 ì—­í•  ëª©ë¡
| ì—­í•  | ì„¤ëª… | ëŒ€í‘œ ê¶Œí•œ ë²”ìœ„ | íŠ¹ìˆ˜ ê¶Œí•œ |
|------|------|---------------|-----------|
| SYSTEM_ADMIN | ì „ì‚¬ ìµœê³  ê´€ë¦¬ì | ì „ì²´ ì»¨í…Œì´ë„ˆ/ë¬¸ì„œ | ëª¨ë“  ìš”ì²­ ìŠ¹ì¸, ì„¤ì • ë³€ê²½ |
| ADMIN | ì „ì‚¬ ë˜ëŠ” ì§€ì • ë²”ìœ„ ê´€ë¦¬ì | ë‹¤ìˆ˜ ì»¨í…Œì´ë„ˆ | ì—­í•  ë¶€ì—¬/íšŒìˆ˜ |
| MANAGER | ì§€ì • ì»¨í…Œì´ë„ˆ ê³„ì¸µ ê´€ë¦¬ | ê´€ë¦¬ ì»¨í…Œì´ë„ˆ + í•˜ìœ„ | ìš”ì²­ ìŠ¹ì¸/ê¶Œí•œ ìˆ˜ì • |
| OWNER | ìƒì„±/ì†Œìœ  ë‹¨ìœ„ ìµœê³  ê¶Œí•œ | í•´ë‹¹ ì»¨í…Œì´ë„ˆ/ë¬¸ì„œ | ì—…ë¡œë“œ, í¸ì§‘, ì‚­ì œ |
| EDITOR | í¸ì§‘ì | ì»¨í…Œì´ë„ˆ ë‚´ ë¬¸ì„œ í¸ì§‘ | - |
| VIEWER | ì¡°íšŒì | ì½ê¸°/ê²€ìƒ‰ | - |

### 4.2 ì—­í• â†’ê¶Œí•œ ë§¤í•‘ (ë¦¬ì†ŒìŠ¤ ìœ í˜•)
| role_id | DOCUMENT | CONTAINER | SEARCH | CHAT | ê¸°ë³¸ ì œê³µ |
|---------|----------|-----------|--------|------|----------|
| SYSTEM_ADMIN | read/write/delete/admin | admin | all | all | Y |
| ADMIN | read/write/admin | admin | all | manage | Y |
| MANAGER | read/write | manage | scoped | moderate | Y |
| OWNER | read/write/delete | manage | scoped | moderate | Y |
| EDITOR | read/write | - | scoped | - | Y |
| VIEWER | read | - | scoped | - | Y |

### 4.3 ê¶Œí•œ í‰ê°€ ìš°ì„ ìˆœìœ„
1. ì§ì ‘ ê¶Œí•œ (ë¬¸ì„œ/ì»¨í…Œì´ë„ˆ ëª…ì‹œ)  
2. ê´€ë¦¬ì í•˜í–¥ ìƒì† (MANAGER/OWNER)  
3. ìƒí–¥ READ (í•˜ìœ„ ê´€ë¦¬ì â†’ ìƒìœ„ ì»¨í…Œì´ë„ˆ)  
4. ì—­í•  ê¸°ë³¸ ë§¤í•‘  
5. ë¯¸ì¶©ì¡± ì‹œ ê±°ë¶€

### 4.4 ê´€ë¦¬ ë²”ìœ„ ê³„ì‚° (ìš”ì•½)
`get_managed_container_ids(emp_no)`:
| ë‹¨ê³„ | ë¡œì§ | ê²°ê³¼ |
|------|------|------|
| ì‹œìŠ¤í…œ ê´€ë¦¬ì | SYSTEM_ADMIN ì—¬ë¶€ ê²€ì‚¬ | ì „ì²´ ì¡°íšŒ(ë¹ˆ í•„í„°) |
| ë£¨íŠ¸ ì¡°íšŒ | ê´€ë¦¬ì ì—­í•  ê°€ì§„ ì»¨í…Œì´ë„ˆ ì‹ë³„ | root set êµ¬ì„± |
| í•˜í–¥ í™•ì¥ | ê° root í•˜ìœ„ ì¬ê·€ ìˆ˜ì§‘ | ë²”ìœ„ í•©ì§‘í•© |
| ë°˜í™˜ | ë¦¬ìŠ¤íŠ¸ ì •ë ¬/ì¤‘ë³µ ì œê±° | ê´€ë¦¬ ê°€ëŠ¥í•œ ID ëª©ë¡ |

### 4.5 ìƒì„± ì‹œ ê¶Œí•œ ë¶€ì—¬ ìƒí˜¸ì‘ìš©
- OWNER ë¶€ì—¬ í›„ MANAGER í•˜í–¥ í™•ì¥
- ìƒí–¥ READ ì˜ˆì • ê¸°ëŠ¥ìœ¼ë¡œ ë¬¸ë§¥ íƒìƒ‰ì„± í–¥ìƒ

## 5. ê´€ì  í†µí•© í”„ë¡œì„¸ìŠ¤

### 5.1 ê¶Œí•œ ìš”ì²­/ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°(ìš”ì•½)
| ë‹¨ê³„ | ì„¤ëª… | ì£¼ì²´ |
|------|------|------|
| ìš”ì²­ ìƒì„± | ì ‘ê·¼ ì‹¤íŒ¨ í›„ ìš”ì²­ ëª¨ë‹¬ | ì‚¬ìš©ì |
| ìŠ¹ì¸ì ì‹ë³„ | ì»¨í…Œì´ë„ˆ ê´€ë¦¬ì/OWNER | ì‹œìŠ¤í…œ |
| ëŒ€ê¸°ì—´ í‘œì‹œ | ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ | ê´€ë¦¬ì |
| ìŠ¹ì¸/ê±°ë¶€ | ê¶Œí•œ ë ˆì½”ë“œ ìƒì„± ë˜ëŠ” ì¢…ë£Œ | ê´€ë¦¬ì |
| ê²°ê³¼ í†µë³´ | ì•Œë¦¼/ìƒíƒœ ê°±ì‹  | ì‹œìŠ¤í…œ |

ìš”ì²­ í…Œì´ë¸” ì£¼ìš” í•„ë“œ: requester_emp_no, container_id, requested_permission, justification, request_status(pending/approved/rejected), approver_emp_no, approval_date.

### 5.2 ìë™ ì¡°ì§ ë™ê¸°í™” (ì´ë™/í‡´ì‚¬)
| ì´ë²¤íŠ¸ | ì²˜ë¦¬ | ê²°ê³¼ |
|--------|------|------|
| ë¶€ì„œ ì´ë™ | ì´ì „ ê¶Œí•œ íšŒìˆ˜ / ìƒˆ ë¶€ì„œ ê¸°ë³¸ ê¶Œí•œ ë¶€ì—¬ | ìµœì†Œ ê¶Œí•œ ë³´ì¥ |
| ì§ë¬´ ë³€ê²½ | ì—­í•  ì¬í‰ê°€ | ì—­í•  ì—…ë°ì´íŠ¸ |
| í‡´ì‚¬ | ëª¨ë“  í™œì„± ê¶Œí•œ ë¹„í™œì„±í™” | ì ‘ê·¼ ì°¨ë‹¨ |

### 5.3 ê¶Œí•œ í‰ê°€ ì•Œê³ ë¦¬ì¦˜ (í†µí•©)
1. ì§ì ‘ ë¬¸ì„œ ê¶Œí•œ â†’ í—ˆìš© ì‹œ ì¢…ë£Œ
2. ì»¨í…Œì´ë„ˆ ì§ì ‘ ê¶Œí•œ â†’ í—ˆìš© ì‹œ ì¢…ë£Œ
3. ìƒìœ„ ì²´ì¸ ìƒì†(inherited) í™•ì¸
4. ì—­í•  ê¸°ë°˜ ë§¤í•‘ ì¡°íšŒ
5. ë§Œë£Œ(valid_until) í™•ì¸ í›„ ìµœì¢… ê²°ì •

### 5.4 ì—…ë¡œë“œ ê¶Œí•œ í™•ì¸
í—ˆìš© ë ˆë²¨: OWNER, ADMIN, MANAGER, EDITOR, CONTRIBUTOR, MEMBER_DEPT  
ê²€ì¦ ì‹¤íŒ¨ ì‹œ: í˜„ì¬ ê¶Œí•œ ë ˆë²¨ í¬í•¨í•œ ê±°ë¶€ ë©”ì‹œì§€ ë°˜í™˜.

## 6. ìš´ì˜ ë° ê±°ë²„ë„ŒìŠ¤

### 6.1 ê°ì‚¬ & ëª¨ë‹ˆí„°ë§
- ë³€ê²½ ë¡œê·¸: ë¶€ì—¬ì, ì´ì „/í˜„ì¬ ìƒíƒœ, íƒ€ì„ìŠ¤íƒ¬í”„
- ì ‘ê·¼ í†µê³„: ë¬¸ì„œ/ì‚¬ìš©ìë³„ ë¹ˆë„, ê³¼ì‰ ê¶Œí•œ íƒì§€
- ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì£¼ê¸° ê²€ì‚¬

### 6.2 ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ìš”ì•½
| ìŠ¤í¬ë¦½íŠ¸ | ëª©ì  | ì£¼ìš” ë™ì‘ |
|---------|------|-----------|
| add_admin_permissions_to_user_containers.py | USER_ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ | ADMIN001 ê¶Œí•œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ìƒì„± |
| check_ms_permissions.py | íŠ¹ì • íŒ€ ê¶Œí•œ ì •í•© | OWNER ê¶Œí•œ êµì²´ + í•˜ìœ„ VIEWER ë¶€ì—¬ |
| fix_chunk_counts.py | ë¬¸ì„œ ì²­í¬ ìˆ˜ ì •í•© | ì‹¤ì œ ì²­í¬ ìˆ˜ ê³„ì‚° í›„ 0â†’ì‹¤ê°’ ì—…ë°ì´íŠ¸ |

### 6.3 ì„±ëŠ¥/ì •í•© ê°œì„  ì‚¬ë¡€
- chunk_count ì—…ë°ì´íŠ¸ ëˆ„ë½ â†’ íŒŒì´í”„ë¼ì¸ ì™„ë£Œ ì‹œ í†µê³„ ë°˜ì˜ ë¡œì§ ì¶”ê°€
- ê´€ê³„ ë¡œë”© None í‘œê¸° â†’ selectinloadë¡œ N+1 ìµœì†Œí™”
- íƒ€ì… ë³€í™˜ ì˜¤ë¥˜(integer vs string) â†’ ì—”ë“œí¬ì¸íŠ¸ int ìºìŠ¤íŒ… í†µì¼

### 6.4 íŒŒì¼ ë·°ì–´ & í•œê¸€ íŒŒì¼ëª… ì²˜ë¦¬
SAS URL ìƒì„± ì‹œ blob ê²½ë¡œ/í—¤ë” ì¸ì½”ë”© ë¶ˆì¼ì¹˜ ë¬¸ì œ â†’ íŒŒì¼ëª… ì¸ì½”ë”©/ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì •ê·œí™” í›„ RedirectResponse(307) ì ìš©.

## 7. UI ë° ê´€ë¦¬ ë„êµ¬

### 7.1 ì ‘ê·¼ ê¶Œí•œ ì„¤ì • ëª¨ë‹¬ ë¹„êµ
| í•­ëª© | ì‚¬ìš©ì ëª¨ë‹¬ | ê´€ë¦¬ì ëª¨ë‹¬ |
|------|------------|------------|
| ëŒ€ìƒ | ì—…ë¡œë”/ì†Œìœ ì | ì§€ì‹ê´€ë¦¬ì/ì‹œìŠ¤í…œê´€ë¦¬ì |
| ì œí•œ ê·œì¹™ | ë‹¨ì¼ | ë‹¤ì¤‘(User+Dept í˜¼í•©) |
| ê²€ìƒ‰ | ì§ì ‘ ì‚¬ë²ˆ/ë¶€ì„œ ì…ë ¥ | ì‚¬ìš©ì ê²€ìƒ‰ API ì§€ì› |
| ë³€ê²½ ê°ì§€ | ì—†ìŒ | hasChanges ë°°ì§€ í‘œì‹œ |
| ì—ëŸ¬ ì²˜ë¦¬ | ëŒ€ìƒ ë¯¸ì…ë ¥ ì•Œë¦¼ | ë¹ˆ Restricted ì €ì¥ ì°¨ë‹¨ |

### 7.2 ê¶Œí•œ ìš”ì²­ í™”ë©´
- ì‚¬ìš©ì ì „ìš©: ë‚˜ì˜ ìš”ì²­ ëª©ë¡ (í•„í„° status/container/date)
- ê´€ë¦¬ì í™”ë©´: ìŠ¹ì¸ ëŒ€ê¸° / ê¶Œí•œ í˜„í™© / ì´ë ¥ íƒ­
- ìƒíƒœ ë¼ë²¨: PENDING/APPROVED/REJECTED/CANCELLED â†’ ë¡œì»¬ë¼ì´ì¦ˆ ë°°ì§€ í‘œì‹œ

### 7.3 ë¬¸ì„œ ì—…ë¡œë“œ ê¶Œí•œ ì„¤ì • UI (ìš”ì•½)
| ì˜µì…˜ | ê³µìœ  ë²”ìœ„ | ìë™ ê¶Œí•œ ëŒ€ìƒ | ëŒ€í‘œ ì‚¬ìš© ì‚¬ë¡€ |
|------|----------|---------------|---------------|
| ë‚˜ë§Œ ë³´ê¸° | PRIVATE | ë³¸ì¸ | ê°œì¸ ì´ˆì•ˆ |
| íŒ€ ê³µìœ  | TEAM | íŒ€ ì „ì²´ | íŒ€ ì—…ë¬´ ë¬¸ì„œ |
| ë¶€ì„œ ê³µìœ  | DEPARTMENT | ë¶€ì„œ ì „ì²´ | ë¶€ì„œ ì •ì±… |
| ë³¸ë¶€ ê³µìœ  | DIVISION | ë³¸ë¶€ ì „ì²´ | ê°€ì´ë“œë¼ì¸ |
| ì „ì‚¬ ê³µìœ  | COMPANY | ì „ ì§ì› | ê³µí†µ ê·œì • |

## 8. í–¥í›„ ê°œì„  ë¡œë“œë§µ
| í•­ëª© | ìš°ì„ ìˆœìœ„ | ì„¤ëª… |
|------|---------|------|
| ë‹¤ì¤‘ ê·œì¹™ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ | ë†’ìŒ | ì‚­ì œâ†’ì‚½ì… ê³µë°± ì œê±°, ì›ìì„± í™•ë³´ |
| ìƒí–¥ READ ìë™í™” êµ¬í˜„ | ë†’ìŒ | ê´€ë¦¬ì ìƒìœ„ ë¬¸ë§¥ ì ‘ê·¼ í‘œì¤€í™” |
| ë¶€ì„œ ìë™ì™„ì„±/ì½”ë“œ í‘œì¤€í™” | ì¤‘ê°„ | Provider ì¡°ì§ ì½”ë“œ ê¸°ë°˜ ê²€ìƒ‰ |
| ìƒˆë¡œìš´ permission_level | ì¤‘ê°„ | comment, share_external ë“± í™•ì¥ |
| ëŒ€ìƒ ì¤‘ë³µ ë°©ì§€ ë¡œì§ | ì¤‘ê°„ | Restricted ì¤‘ë³µ ë ˆì½”ë“œ ì°¨ë‹¨ |
| ë³€ê²½ ì´ë ¥ UI | ë‚®ìŒ | ê·œì¹™ Diff íƒ€ì„ë¼ì¸ |
| ìƒì† í”Œë˜ê·¸ í™•ì¥ | ë‚®ìŒ | ìƒìœ„ ì •ì±… í•˜í–¥ ì ìš© ì‹œ ì‹œê°í™” |

## ë¶€ë¡ A. ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìš”ì•½
| í…Œì´ë¸” | ëª©ì  | í•µì‹¬ í•„ë“œ (ìš”ì•½) |
|--------|------|------------------|
| tb_knowledge_containers | ì»¨í…Œì´ë„ˆ ê³„ì¸µ | container_id, parent_container_id, external_org_code, hierarchy_path |
| tb_container_permissions | ì»¨í…Œì´ë„ˆ ê¶Œí•œ | permission_id, container_id, user_id, permission_type, is_inherited |
| tb_user_roles | ì‚¬ìš©ì ì—­í•  í• ë‹¹ | role_assignment_id, user_id, role_id, container_id |
| tb_role_permissions | ì—­í• â†’ê¶Œí•œ ì •ì˜ | role_permission_id, role_id, permission_type, resource_type |
| tb_permission_requests | ê¶Œí•œ ìš”ì²­ | request_id, requester_emp_no, container_id, requested_permission, request_status |

## ë¶€ë¡ B. ìš©ì–´ ì‚¬ì „
| ìš©ì–´ | ì •ì˜ | êµ¬ë¶„ |
|------|------|------|
| Access Level | ë¬¸ì„œ ê³µê°œ ë²”ìœ„(public/restricted/private) | ë¬¸ì„œ ë‹¨ìœ„ |
| permission_level | Restricted ê·œì¹™ ë‚´ë¶€ ì„¸ë¶€ ê¶Œí•œ(view/download/edit) | ë¬¸ì„œ ê·œì¹™ |
| role_id | RBAC ì—­í•  (ADMIN/MANAGER ë“±) | ì‚¬ìš©ì-ì»¨í…Œì´ë„ˆ ê´€ê³„ |
| ì§ì ‘ ê¶Œí•œ | ëª…ì‹œì ìœ¼ë¡œ ë ˆì½”ë“œë¡œ ë¶€ì—¬ëœ ê¶Œí•œ | ìµœê³  ìš°ì„  |
| ìƒì† ê¶Œí•œ | ìƒìœ„/í•˜ìœ„ í™•ì¥ì—ì„œ íŒŒìƒëœ ê¶Œí•œ | is_inherited='Y' |
| Provider | ì¡°ì§ ë°ì´í„° ê³µê¸‰ì (SAP/Workday ë“±) | ì™¸ë¶€ ì—°ë™ |

## ë¶€ë¡ C. ì‹œë‚˜ë¦¬ì˜¤ ìš”ì•½
| ì‹œë‚˜ë¦¬ì˜¤ | íë¦„ | ê²°ê³¼ |
|----------|------|------|
| ë¬¸ì„œ ì—…ë¡œë“œ(íŒ€ ê³µìœ ) | ì—…ë¡œë” â†’ íŒ€ ê³µìœ  ì„ íƒ â†’ ì €ì¥ | íŒ€ ì „ì²´ ì¡°íšŒ/ë‹¤ìš´ë¡œë“œ í—ˆìš© |
| ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸ | ì‚¬ìš©ì ìš”ì²­ â†’ ê´€ë¦¬ì ê²€í†  â†’ ìŠ¹ì¸ | ê¶Œí•œ ë ˆì½”ë“œ ìƒì„± í›„ ì¦‰ì‹œ ì ‘ê·¼ |
| í”„ë¡œì íŠ¸ ì„ì‹œ ê¶Œí•œ | ì„ì‹œ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ë‹¤ì–‘í•œ ë¶€ì„œ ì°¸ì—¬ â†’ ê¸°ê°„ ì¢…ë£Œ ìë™ íšŒìˆ˜ | ê¸°ê°„ ì œí•œ í˜‘ì—… ì•ˆì „ì„± |
| ë¶€ì„œ ì´ë™ ì²˜ë¦¬ | ì´ë™ ì´ë²¤íŠ¸ ê°ì§€ â†’ ì´ì „ ê¶Œí•œ íšŒìˆ˜ + ìƒˆ ë¶€ì„œ ê¸°ë³¸ ê¶Œí•œ ë¶€ì—¬ | ìµœì†Œ ê¶Œí•œ ì›ì¹™ ìœ ì§€ |
| ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± | ê°œì¸ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ OWNER ë¶€ì—¬ + ì‹œìŠ¤í…œ ADMIN ê¶Œí•œ ì¶”ê°€ | ê°œì¸ ì§€ì‹ ê³µê°„ í™•ë³´ |

---
ë³¸ ì¬êµ¬ì„± ë²„ì „(v3.4)ì€ ê¸°ì¡´ ë‹¨ì¼ íë¦„ ì¤‘ì‹¬ ë¬¸ì„œë¥¼ ê´€ì Â·ìš´ì˜Â·ë¶€ë¡ ì²´ê³„ë¡œ ì¬ë°°ì¹˜í•˜ì—¬ íƒìƒ‰ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. ì¶”ê°€ ìš”êµ¬(ì˜ˆ: API ìƒì„¸ ë¶€ë¡ ë¶„ë¦¬, ë‹¤ì´ì–´ê·¸ë¨ ì¶”ê°€)ê°€ ìˆìœ¼ë©´ í›„ì† ê°œì •ì—ì„œ ë°˜ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.
# ë³„ì²¨01. IPBridge ê¶Œí•œ ê´€ë¦¬ ì²´ê³„

## 1. ê°œìš”

### 1.1 ë¬¸ì„œ ëª©ì 

ë³¸ ë¬¸ì„œëŠ” IPBridge(AI Based Enterprise Knowledge Management)ì˜ ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì§€ì‹ë§µ êµ¬ì¡°ì— ë”°ë¥¸ ê³„ì¸µì  ê¶Œí•œ ê´€ë¦¬ì™€ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´(RBAC) ì‹œìŠ¤í…œì„ ìƒì„¸íˆ ê¸°ìˆ í•©ë‹ˆë‹¤.

### 1.2 ê¶Œí•œ ê´€ë¦¬ ë²”ìœ„

- **ì§€ì‹ ì»¨í…Œì´ë„ˆ**: ê³„ì¸µì  êµ¬ì¡°ì˜ ì§€ì‹ ì €ì¥ì†Œ ê¶Œí•œ ê´€ë¦¬
- **ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ**: íŒŒì¼ë³„ ì„¸ë¶„í™”ëœ ì ‘ê·¼ ê¶Œí•œ ì œì–´
- **ì—­í•  ê¸°ë°˜ ê¶Œí•œ**: ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ ì²´ê³„ì  ê¶Œí•œ í• ë‹¹
- **ì¡°ì§ ë°ì´í„° ì—°ë™ ê¶Œí•œ**: HR/ERP ì¡°ì§ ë°ì´í„°(Provider) ê¸°ë°˜ ìë™ ë™ê¸°í™”

### 1.3 ì¡°ì§ ë°ì´í„° Provider ê°œë…

ë³¸ ë¬¸ì„œëŠ” íŠ¹ì • ë²¤ë”(SAP ë“±)ì— ì¢…ì†ë˜ì§€ ì•Šë„ë¡ ì¡°ì§ ë°ì´í„° ì—°ë™ì„ "Provider"ë¡œ ì¼ë°˜í™”í•©ë‹ˆë‹¤.

- ëª©ì : ì¸ì‚¬/ì¡°ì§ ì •ë³´ì˜ ë³€ê²½ì„ ê¶Œí•œ êµ¬ì¡°ì— ìë™ ë°˜ì˜(ì…ì‚¬/ì´ë™/í‡´ì‚¬, ì¡°ì§ ê°œí¸)
- ì˜ˆì‹œ Provider: SAP, Workday, Active Directory, CSV/ETL ë“±
- ì—°ë™ ë°©ì‹: ìŠ¤ì¼€ì¤„ëŸ¬, ì›¹í›…, ìˆ˜ë™ íŠ¸ë¦¬ê±°(API) ì¤‘ íƒì¼ ë˜ëŠ” ë³‘í–‰

Provider ì¸í„°í˜ì´ìŠ¤(ë…¼ë¦¬ ëª¨ë¸):

| í•„ë“œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `emp_no` | ì‚¬ìš©ì ì‹ë³„ì | MSS001 |
| `emp_nm` | ì‚¬ìš©ì ì´ë¦„ | ì •MS |
| `dept_code` | ë¶€ì„œ ì½”ë“œ | MS001 |
| `dept_nm` | ë¶€ì„œ ì´ë¦„ | MSì„œë¹„ìŠ¤íŒ€ |
| `org_path` | ìµœìƒìœ„â†’í•˜ìœ„ ì¡°ì§ ê²½ë¡œ | /CEOì§ì†/í´ë¼ìš°ë“œë³¸ë¶€/MSì„œë¹„ìŠ¤íŒ€ |
| `position` | ì§ì±…/ì§ìœ„ | íŒ€ì¥ |

íŠ¸ë¦¬ê±° ìœ í˜•: ì •ê¸° ë™ê¸°í™”(ìŠ¤ì¼€ì¤„), ì´ë²¤íŠ¸ ê¸°ë°˜(ì›¹í›…), ìˆ˜ë™ ë™ê¸°í™”(API í˜¸ì¶œ)ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.

## 2. ì§€ì‹ë§µ ê³„ì¸µ êµ¬ì¡°

### 2.1 ì§€ì‹ë§µ ê³„ì¸µ ì •ì˜

```
ğŸ¢ ê¸°ì—… ì¡°ì§ (ROOT - COMPANY ë ˆë²¨)
â”œâ”€â”€ ğŸ“ CEOì§ì† (DIVISION ë ˆë²¨)
â”‚   â”œâ”€â”€ ğŸ“ ì¸ì‚¬ì „ëµíŒ€ (DEPARTMENT ë ˆë²¨)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ ì±„ìš©íŒ€ (TEAM ë ˆë²¨)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ì±„ìš©ê°€ì´ë“œ.pdf (DOCUMENT ë ˆë²¨)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ë©´ì ‘í‰ê°€í‘œ.xlsx (DOCUMENT ë ˆë²¨)
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ ì‹ ì…ì‚¬ì›êµìœ¡.pptx (DOCUMENT ë ˆë²¨)
â”‚   â”‚   â””â”€â”€ ğŸ“ êµìœ¡íŒ€
â”‚   â””â”€â”€ ğŸ“ ê¸°í™•íŒ€
â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€
â”‚   â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì„œë¹„ìŠ¤íŒ€
â”‚   â””â”€â”€ ğŸ“ MSì„œë¹„ìŠ¤íŒ€
â””â”€â”€ ğŸ“ CTIì‚¬ì—…ë³¸ë¶€
    â”œâ”€â”€ ğŸ“ ì¸í”„ë¼ì»¨ì„¤íŒ…íŒ€
    â””â”€â”€ ğŸ“ Bizìš´ì˜1íŒ€
```

### 2.2 ê¶Œí•œ ìƒì† ë©”ì»¤ë‹ˆì¦˜

- **í•˜í–¥ ìƒì†**: ìƒìœ„ ì»¨í…Œì´ë„ˆ ê¶Œí•œì´ í•˜ìœ„ë¡œ ì„ íƒì  ìƒì†
- **ì§ì ‘ ê¶Œí•œ**: íŠ¹ì • ì»¨í…Œì´ë„ˆ/ë¬¸ì„œì— ì§ì ‘ ë¶€ì—¬ëœ ê¶Œí•œì´ ìµœìš°ì„ 
- **ì—­í•  ê¸°ë°˜**: ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ ê¸°ë³¸ ê¶Œí•œ ìë™ ë¶€ì—¬

## 3. ê¶Œí•œ ê´€ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 3.1 í•µì‹¬ ê¶Œí•œ ê´€ë¦¬ í…Œì´ë¸”

#### 3.1.1 ì§€ì‹ ì»¨í…Œì´ë„ˆ í…Œì´ë¸” (tb_knowledge_containers)

ì§€ì‹ ì»¨í…Œì´ë„ˆëŠ” ì¡°ì§/ì§€ì‹ ë‹¨ìœ„ë¥¼ ê³„ì¸µì ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ê¸°ë³¸ ì—”í„°í‹°ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ê° ì»¬ëŸ¼ì˜ ëª©ì ê³¼ ì˜ë¯¸ì…ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `container_id` | VARCHAR(50) | PK | ì»¨í…Œì´ë„ˆ ê³ ìœ  ì‹ë³„ì |
| `container_name` | VARCHAR(200) | Y | í‘œì‹œëª…(ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ì´ë¦„) |
| `parent_container_id` | VARCHAR(50) | N | ìƒìœ„ ì»¨í…Œì´ë„ˆ ID. ë£¨íŠ¸ëŠ” NULL |
| `external_org_code` | VARCHAR(20) | N | ì¡°ì§ ë°ì´í„° Provider ì½”ë“œ ë§¤í•‘ ê°’(ì˜ˆ: SAP/AD/Workday) |
| `container_type` | VARCHAR(20) | Y | COMPANY / DIVISION / DEPARTMENT / TEAM ë“± ìœ í˜• êµ¬ë¶„ |
| `hierarchy_level` | INTEGER | Y | ë£¨íŠ¸(1)ë¶€í„° ì‹œì‘í•˜ëŠ” ê¹Šì´ ë ˆë²¨ |
| `hierarchy_path` | VARCHAR(500) | N | ë£¨íŠ¸ë¶€í„° í˜„ì¬ê¹Œì§€ì˜ ê²½ë¡œ ë¬¸ìì—´ (ì˜ˆ: /COMPANY/DIVISION/DEPT/TEAM) |
| `is_active` | CHAR(1) | Y | í™œì„± ì—¬ë¶€ (Y/N) |
| `created_date` | TIMESTAMPTZ | ìë™ | ìƒì„± ì‹œê° |

ì£¼ìš” íŠ¹ì§•: ìƒìœ„-í•˜ìœ„ êµ¬ì¡° íŒŒì•…ì„ ìœ„í•œ ê²½ë¡œ(`hierarchy_path`)ë¥¼ ìœ ì§€í•˜ê³ , ì¡°ì§ ì—°ë™ ì‹œ Provider ì½”ë“œ(`external_org_code`)ë¥¼ ì´ìš©í•˜ì—¬ ìë™ ê¶Œí•œ ë™ê¸°í™” ê°€ëŠ¥.

ìš©ì–´ ì£¼ì˜: í˜„ì¬ êµ¬í˜„ ì¼ë¶€ì—ì„œ ì»¬ëŸ¼ëª…ì´ `sap_org_code`ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë‚˜, ë³¸ ë¬¸ì„œì—ì„œëŠ” ì¼ë°˜í™” ëª…ì¹­ì¸ `external_org_code`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### 3.1.2 ì»¨í…Œì´ë„ˆë³„ ê¶Œí•œ í…Œì´ë¸” (tb_container_permissions)

ì»¨í…Œì´ë„ˆ ë‹¨ìœ„ë¡œ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ í˜¹ì€ ìƒì†ëœ ê¶Œí•œì„ ì €ì¥í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `permission_id` | SERIAL | PK | ê¶Œí•œ ë ˆì½”ë“œ ê³ ìœ  ID |
| `container_id` | VARCHAR(50) | Y | ëŒ€ìƒ ì»¨í…Œì´ë„ˆ ID |
| `user_id` | VARCHAR(50) | Y | ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ì ID(ì‚¬ë²ˆ ë“±) |
| `permission_type` | VARCHAR(20) | Y | READ / WRITE / DELETE / ADMIN êµ¬ë¶„ |
| `is_inherited` | CHAR(1) | Y | ìƒìœ„ ì»¨í…Œì´ë„ˆë¡œë¶€í„° ìƒì† ì—¬ë¶€ (Y/N) |
| `granted_by` | VARCHAR(50) | N | ê¶Œí•œ ë¶€ì—¬ì ID |
| `valid_from` | TIMESTAMPTZ | ìë™ | ê¶Œí•œ ìœ íš¨ ì‹œì‘ ì‹œì  |
| `valid_until` | TIMESTAMPTZ | N | ë§Œë£Œ ì‹œì  (NULLì´ë©´ ë¬´ê¸°í•œ) |
| `is_active` | CHAR(1) | Y | í™œì„± ì—¬ë¶€ |

ê¶Œí•œ ì¶©ëŒ ì²˜ë¦¬: ë™ì¼ ì‚¬ìš©ìì—ê²Œ ì—¬ëŸ¬ ë ˆë²¨ ê¶Œí•œì´ ì¡´ì¬í•  ê²½ìš° ê°€ì¥ ë†’ì€ ìˆ˜ì¤€(ADMIN > DELETE > WRITE > READ)ì„ ìµœì¢… ì ìš©.

#### 3.1.3 ì‚¬ìš©ì ì—­í•  í…Œì´ë¸” (tb_user_roles)

ì‚¬ìš©ìë³„ë¡œ ì—­í• (RBAC)ì„ ì§€ì •í•˜ì—¬ ê¸°ë³¸ ê¶Œí•œ ì„¸íŠ¸ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `role_assignment_id` | SERIAL | PK | ì—­í•  í• ë‹¹ ë ˆì½”ë“œ ID |
| `user_id` | VARCHAR(50) | Y | ì‚¬ìš©ì ID |
| `role_id` | VARCHAR(20) | Y | ADMIN / MANAGER / EDITOR / VIEWER ë“± ì—­í•  ì½”ë“œ |
| `container_id` | VARCHAR(50) | N | íŠ¹ì • ì»¨í…Œì´ë„ˆ ë²”ìœ„ ë‚´ ì—­í• ì¼ ê²½ìš° ì§€ì • (ì „ì‚¬ ì—­í• ì€ NULL ê°€ëŠ¥) |
| `assigned_by` | VARCHAR(50) | N | ì—­í• ì„ ë¶€ì—¬í•œ ê´€ë¦¬ì ID |
| `assigned_date` | TIMESTAMPTZ | ìë™ | ë¶€ì—¬ ì¼ì‹œ |
| `is_active` | CHAR(1) | Y | í™œì„± ì—¬ë¶€ |

ì—­í• ê³¼ ê¶Œí•œ ë§¤í•‘ì€ ë³„ë„ í…Œì´ë¸”(`tb_role_permissions`)ì„ í†µí•´ ê´€ë¦¬í•˜ë©°, ë™ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥.

#### 3.1.4 ì—­í• ë³„ ê¶Œí•œ ì •ì˜ í…Œì´ë¸” (tb_role_permissions)

ì—­í• ë³„ë¡œ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ ìœ í˜•ì— ì–´ë–¤ ê¶Œí•œì´ ê¸°ë³¸ í¬í•¨ë˜ëŠ”ì§€ ì •ì˜í•©ë‹ˆë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `role_permission_id` | SERIAL | PK | ì—­í• -ê¶Œí•œ ì •ì˜ ë ˆì½”ë“œ ID |
| `role_id` | VARCHAR(20) | Y | ì—­í•  ì½”ë“œ |
| `permission_type` | VARCHAR(20) | Y | ê¶Œí•œ ì¢…ë¥˜ (READ ë“±) |
| `resource_type` | VARCHAR(20) | Y | DOCUMENT / CONTAINER / SEARCH / CHAT êµ¬ë¶„ |
| `is_default` | CHAR(1) | Y | ê¸°ë³¸ í¬í•¨ ì—¬ë¶€ (Y = ê¸°ë³¸ ì œê³µ) |
| `created_date` | TIMESTAMPTZ | ìë™ | ìƒì„± ì¼ì‹œ |

ì´ ì •ì˜ë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì—­í• ì„ ë¶€ì—¬í•˜ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ ë²”ìœ„ ë‚´ ê¸°ë³¸ ê¶Œí•œì´ ìë™ í™œì„±í™”ë©ë‹ˆë‹¤.

## 4. ì§€ì‹ìƒì„±ì ê¶Œí•œ ê´€ë¦¬ ì‹œë‚˜ë¦¬ì˜¤

### 4.1 íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì ‘ê·¼ ë²”ìœ„ ì„¤ì •

#### 4.1.1 ì ‘ê·¼ ë²”ìœ„ ì˜µì…˜

| ì„¤ì • ì˜µì…˜     | ì ‘ê·¼ ë²”ìœ„      | ìë™ ê¶Œí•œ ë¶€ì—¬ ëŒ€ìƒ | ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤      |
| --------- | ---------- | ----------- | ------------ |
| **ë‚˜ë§Œ ë³´ê¸°** | PRIVATE    | ë³¸ì¸ë§Œ         | ê°œì¸ ì‘ì—… ë¬¸ì„œ, ì´ˆì•ˆ |
| **íŒ€ ê³µìœ **  | TEAM       | ê°™ì€ íŒ€ ì „ì²´     | íŒ€ ë‚´ë¶€ ì—…ë¬´ ë§¤ë‰´ì–¼  |
| **ë¶€ì„œ ê³µìœ ** | DEPARTMENT | ê°™ì€ ë¶€ì„œ ì „ì²´    | ë¶€ì„œ ì •ì±… ë¬¸ì„œ     |
| **ë³¸ë¶€ ê³µìœ ** | DIVISION   | ê°™ì€ ë³¸ë¶€ ì „ì²´    | ë³¸ë¶€ ì°¨ì› ê°€ì´ë“œë¼ì¸  |
| **ì „ì‚¬ ê³µìœ ** | COMPANY    | ì „ ì§ì›        | ì „ì‚¬ ê³µí†µ ì–‘ì‹, ê·œì • |

#### 4.1.2 ì„¸ë¶„í™”ëœ ê¶Œí•œ ì œì–´

- **ì½ê¸°**: ë¬¸ì„œ ì¡°íšŒ, ê²€ìƒ‰ ê²°ê³¼ í¬í•¨
- **ë‹¤ìš´ë¡œë“œ**: íŒŒì¼ ë‹¤ìš´ë¡œë“œ í—ˆìš©
- **ëŒ“ê¸€**: ë¬¸ì„œì— ëŒ“ê¸€ ì‘ì„± í—ˆìš©
- **ì™¸ë¶€ê³µìœ **: ì‹œìŠ¤í…œ ì™¸ë¶€ë¡œ ê³µìœ  í—ˆìš©
- **ê¶Œí•œ ë§Œë£Œ**: ì¼ì • ê¸°ê°„ í›„ ìë™ ê¶Œí•œ íšŒìˆ˜

### 4.2 ì§€ì‹ìƒì„±ì ê¶Œí•œ ê´€ë¦¬ UI ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ íŒŒì¼ ì—…ë¡œë“œ - ì ‘ê·¼ ê¶Œí•œ ì„¤ì •                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  íŒŒì¼: ì±„ìš©ê°€ì´ë“œ.pdf                              â”‚
â”‚  ì¹´í…Œê³ ë¦¬: ì¸ì‚¬ > ì±„ìš©                             â”‚
â”‚                                                 â”‚
â”‚  ğŸ”’ ì ‘ê·¼ ë²”ìœ„ ì„¤ì •:                                â”‚
â”‚  â—‹ ë‚˜ë§Œ ë³´ê¸° (ë¹„ê³µê°œ)                              â”‚
â”‚  â— íŒ€ ê³µìœ  (ì±„ìš©íŒ€)                 ğŸ‘¥ 5ëª…         â”‚
â”‚  â—‹ ë¶€ì„œ ê³µìœ  (ì¸ì‚¬íŒ€)               ğŸ‘¥ 23ëª…        â”‚
â”‚  â—‹ ë³¸ë¶€ ê³µìœ  (ê²½ì˜ì§€ì›ë³¸ë¶€)         ğŸ‘¥ 89ëª…        â”‚
â”‚  â—‹ ì „ì‚¬ ê³µìœ  (ì „ì²´ ì§ì›)            ğŸ‘¥ 1,247ëª…     â”‚
â”‚                                                 â”‚
â”‚  ğŸ¯ ì„¸ë¶€ ê¶Œí•œ ì„¤ì •:                                â”‚
â”‚  âœ… ì½ê¸°    âœ… ë‹¤ìš´ë¡œë“œ    âŒ ëŒ“ê¸€    âŒ ì™¸ë¶€ê³µìœ      â”‚
â”‚                                                 â”‚
â”‚  ğŸ‘¤ íŠ¹ì • ì‚¬ìš©ì ì¶”ê°€:                              â”‚
â”‚  [ê²€ìƒ‰: ì´ë¦„ ë˜ëŠ” ì‚¬ë²ˆ]              [+ ì¶”ê°€]       â”‚
â”‚                                                 â”‚
â”‚  â° ê¶Œí•œ ë§Œë£Œ ì„¤ì •:                                â”‚
â”‚  â—‹ ë¬´ì œí•œ    â— 1ë…„    â—‹ ì‚¬ìš©ì ì§€ì •: [____]       â”‚
â”‚                                                 â”‚
â”‚         [ì·¨ì†Œ]              [ì—…ë¡œë“œ ë° ê¶Œí•œì„¤ì •]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5. ì§€ì‹ê´€ë¦¬ì ê¶Œí•œ ê´€ë¦¬ ì‹œë‚˜ë¦¬ì˜¤

### 5.1 ì§€ì‹ê´€ë¦¬ì ì—­í• ë³„ ê¶Œí•œ ë²”ìœ„

| ì—­í•            | ê¶Œí•œ ë²”ìœ„ | ì£¼ìš” ê¸°ëŠ¥                  | ê´€ë¦¬ ëŒ€ìƒ          |
| ------------ | ----- | ---------------------- | -------------- |
| **íŒ€ ì§€ì‹ê´€ë¦¬ì**  | íŒ€ ë ˆë²¨  | íŒ€ ë‚´ ë¬¸ì„œ í’ˆì§ˆ ê´€ë¦¬, ë¶„ë¥˜ ì²´ê³„ ê´€ë¦¬ | ì†Œì† íŒ€ ì»¨í…Œì´ë„ˆ      |
| **ë¶€ì„œ ì§€ì‹ê´€ë¦¬ì** | ë¶€ì„œ ë ˆë²¨ | ë¶€ì„œ ì§€ì‹ ì •ì±… ìˆ˜ë¦½, ì ‘ê·¼ ê¶Œí•œ ìŠ¹ì¸  | ì†Œì† ë¶€ì„œ + í•˜ìœ„ íŒ€ë“¤  |
| **ë³¸ë¶€ ì§€ì‹ê´€ë¦¬ì** | ë³¸ë¶€ ë ˆë²¨ | ë³¸ë¶€ ì§€ì‹ ì „ëµ ìˆ˜ë¦½, ë¶€ì„œê°„ í˜‘ì—… ê´€ë¦¬ | ì†Œì† ë³¸ë¶€ + í•˜ìœ„ ë¶€ì„œë“¤ |
| **ì „ì‚¬ ì§€ì‹ê´€ë¦¬ì** | ì „ì‚¬ ë ˆë²¨ | ì „ì‚¬ ì§€ì‹ ê±°ë²„ë„ŒìŠ¤, ë³´ì•ˆ ì •ì±… ìˆ˜ë¦½   | ì „ì²´ ì‹œìŠ¤í…œ         |

### 5.2 ì§€ì‹ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ UI ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—ï¸ ì¸ì‚¬íŒ€ ì§€ì‹ì»¨í…Œì´ë„ˆ ê´€ë¦¬ - ê¹€ì§€ì‹ (ë¶€ì„œ ì§€ì‹ê´€ë¦¬ì)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ì»¨í…Œì´ë„ˆ í˜„í™©:                                              â”‚
â”‚  ì´ ë¬¸ì„œ: 1,247ê°œ  í™œì„± ì‚¬ìš©ì: 67ëª…  ëŒ€ê¸° ê¶Œí•œ ìš”ì²­: 8ê±´         â”‚
â”‚                                                               â”‚
â”‚  ğŸ“ í•˜ìœ„ ì»¨í…Œì´ë„ˆ êµ¬ì¡°:                                         â”‚
â”‚  â”œâ”€â”€ ğŸ“ ì±„ìš©íŒ€ (ë¬¸ì„œ 324ê°œ, ì‚¬ìš©ì 12ëª…)    [ê´€ë¦¬] [ê¶Œí•œë³´ê¸°]     â”‚
â”‚  â”œâ”€â”€ ğŸ“ êµìœ¡íŒ€ (ë¬¸ì„œ 198ê°œ, ì‚¬ìš©ì 8ëª…)     [ê´€ë¦¬] [ê¶Œí•œë³´ê¸°]     â”‚
â”‚  â”œâ”€â”€ ğŸ“ í‰ê°€íŒ€ (ë¬¸ì„œ 156ê°œ, ì‚¬ìš©ì 15ëª…)    [ê´€ë¦¬] [ê¶Œí•œë³´ê¸°]     â”‚
â”‚  â””â”€â”€ ğŸ“ ë³µë¦¬í›„ìƒíŒ€ (ë¬¸ì„œ 89ê°œ, ì‚¬ìš©ì 7ëª…)   [ê´€ë¦¬] [ê¶Œí•œë³´ê¸°]     â”‚
â”‚                                                               â”‚
â”‚  ğŸ”” ê¶Œí•œ ìš”ì²­ ëŒ€ê¸° ëª©ë¡:                                        â”‚
â”‚  â€¢ ì´ë§ˆì¼€íŒ… â†’ ì±„ìš©ê°€ì´ë“œ.pdf ì½ê¸° ê¶Œí•œ          [ìŠ¹ì¸] [ê±°ë¶€]     â”‚
â”‚  â€¢ ì˜ì—…íŒ€ â†’ ì¸ì‚¬í‰ê°€ì–‘ì‹.xlsx ì½ê¸° ê¶Œí•œ (íŒ€ ì „ì²´) [ìŠ¹ì¸] [ê±°ë¶€]     â”‚
â”‚  â€¢ ë°•ì‹ ì… â†’ êµìœ¡ìë£Œ í´ë” ì ‘ê·¼ ê¶Œí•œ             [ìŠ¹ì¸] [ê±°ë¶€]     â”‚
â”‚                                                               â”‚
â”‚  âš¡ ë¹ ë¥¸ ì‘ì—…:                                                â”‚
â”‚  [ì‹ ê·œ í”„ë¡œì íŠ¸ íŒ€ ê¶Œí•œ ì„¤ì •] [ë¶€ì„œ ì´ë™ì ê¶Œí•œ ì—…ë°ì´íŠ¸]          â”‚
â”‚  [ëŒ€ëŸ‰ ê¶Œí•œ ì¼ê´„ ë³€ê²½]        [ê¶Œí•œ ì •ì±… í…œí”Œë¦¿ ì ìš©]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. ê¶Œí•œ í™•ì¸ í”„ë¡œì„¸ìŠ¤

### 6.1 íŒŒì¼ ì ‘ê·¼ ì‹œ ê¶Œí•œ í™•ì¸ ì•Œê³ ë¦¬ì¦˜

íŒŒì¼ ì ‘ê·¼ ê¶Œí•œì€ ë‹¤ìŒ ìˆœì„œë¡œ í‰ê°€í•˜ì—¬ ê°€ì¥ ë¨¼ì € ë§Œì¡±í•˜ëŠ” ì¡°ê±´ì—ì„œ í—ˆìš©ë©ë‹ˆë‹¤.

1. ì§ì ‘ ê¶Œí•œ: ë¬¸ì„œ ìì²´ì— ì‚¬ìš©ìì—ê²Œ ëª…ì‹œì ìœ¼ë¡œ ë¶€ì—¬ëœ ê¶Œí•œ ì¡´ì¬ ì—¬ë¶€ ê²€ì‚¬
2. ë™ì¼ ì»¨í…Œì´ë„ˆ ê¶Œí•œ: ë¬¸ì„œê°€ ì†í•œ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ê¶Œí•œì´ ìš”ì²­ ì•¡ì…˜ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸
3. ìƒìœ„ ì»¨í…Œì´ë„ˆ ìƒì†: ìƒìœ„ ê³„ì¸µìœ¼ë¡œ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ë©° ìƒì†ëœ(inherited) ê¶Œí•œì´ ìˆëŠ”ì§€ íƒìƒ‰
4. ì—­í•  ê¸°ë°˜ ê¶Œí•œ: ì‚¬ìš©ìì—ê²Œ ë¶€ì—¬ëœ ì—­í• (RBAC)ì´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ ìœ í˜•(DOCUMENT)ì— ëŒ€í•´ ìš”êµ¬ ì•¡ì…˜ì„ í—ˆìš©í•˜ëŠ”ì§€ í‰ê°€
5. ìµœì¢… ê²°ì •: ìœ„ ëª¨ë“  ë‹¨ê³„ì—ì„œ í—ˆìš©ë˜ì§€ ì•Šìœ¼ë©´ ì ‘ê·¼ ê±°ë¶€

ì„±ëŠ¥ ìµœì í™”: ìƒìœ„ ì»¨í…Œì´ë„ˆ íƒìƒ‰ ì‹œ ê³„ì¸µ ê²½ë¡œë¥¼ ìºì‹œí•˜ì—¬ ë°˜ë³µ ì¡°íšŒ ë¹„ìš© ìµœì†Œí™”.

### 6.2 ê¶Œí•œ í™•ì¸ ë¡œì§ (ë°ì´í„°ë² ì´ìŠ¤ ê´€ì )

ì»¨í…Œì´ë„ˆ ê¶Œí•œ í™•ì¸ì€ ë‹¤ìŒ ì ˆì°¨ë¡œ DB ë ˆë²¨ì—ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

1. ì§ì ‘ ë§¤ì¹­: ìš”ì²­ ì‚¬ìš©ì / ì»¨í…Œì´ë„ˆ / ê¶Œí•œ ìœ í˜•ì´ í™œì„± ë ˆì½”ë“œì¸ì§€ ì¡°íšŒ
2. ìƒí–¥ íƒìƒ‰: í˜„ì¬ ì»¨í…Œì´ë„ˆì˜ `parent_container_id`ë¥¼ ë”°ë¼ ìƒìœ„ë¡œ ì´ë™í•˜ë©° ìƒì†(`is_inherited = 'Y'`)ëœ ë™ì¼ ê¶Œí•œì´ ìˆëŠ”ì§€ ë°˜ë³µ ê²€ì‚¬
3. ê¸°ê°„ ì¡°ê±´: `valid_until`ì´ ì„¤ì •ëœ ê²½ìš° í˜„ì¬ ì‹œê° ê¸°ì¤€ ìœ íš¨ì„± ì¬í™•ì¸
4. ì²« ë§¤ì¹­ ì¦‰ì‹œ ì¢…ë£Œ: ì–´ëŠ ë‹¨ê³„ì—ì„œë“  ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ TRUE ë°˜í™˜
5. ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ FALSE ë°˜í™˜

ì¶”ê°€ ê³ ë ¤ì‚¬í•­: ìƒìœ„ ì´ë™ ë£¨í”„ëŠ” ìµœëŒ€ ê³„ì¸µ ê¹Šì´ ì œí•œì„ ë‘ì–´ ë¹„ì •ìƒ ìˆœí™˜ êµ¬ì¡°ë¡œ ì¸í•œ ë¬´í•œ ë£¨í”„ë¥¼ ì˜ˆë°©.

## 7. ì¡°ì§ ë°ì´í„° ì—°ë™ ìë™ ê¶Œí•œ ê´€ë¦¬

### 7.1 ì¡°ì§ë„ ë³€ê²½ ì‹œ ìë™ ê¶Œí•œ ì—…ë°ì´íŠ¸

#### 7.1.1 ì§ì› ë¶€ì„œ ì´ë™ ì‹œë‚˜ë¦¬ì˜¤

```
ğŸ”„ ì¡°ì§ê°œí¸: ê¹€ì‹ ì… (ë§ˆì¼€íŒ…íŒ€ â†’ ì¸ì‚¬íŒ€ ì´ë™)
â”œâ”€â”€ ğŸ“¡ ì¡°ì§ ë°ì´í„° ì—°ë™: ë¶€ì„œ ì´ë™ ì •ë³´ ìë™ ê°ì§€
â”œâ”€â”€ ğŸ”’ ê¶Œí•œíšŒìˆ˜: ë§ˆì¼€íŒ…íŒ€ ê´€ë ¨ ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ ìë™ íšŒìˆ˜
â”œâ”€â”€ ğŸ”“ ê¶Œí•œë¶€ì—¬: ì¸ì‚¬íŒ€ ê´€ë ¨ ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ ìë™ ë¶€ì—¬
â””â”€â”€ ğŸ“§ ì•Œë¦¼ë°œì†¡: ê¶Œí•œ ë³€ê²½ ë‚´ì—­ ë³¸ì¸ ë° ê´€ë¦¬ìì—ê²Œ í†µì§€
```

#### 7.1.2 ìë™ ê¶Œí•œ ë™ê¸°í™” í”„ë¡œì„¸ìŠ¤

ë¶€ì„œ ì´ë™ ë°œìƒ ì‹œ ì‹œìŠ¤í…œì€ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìë™ ì‹¤í–‰í•˜ì—¬ ê¶Œí•œì„ ì •í™•íˆ ì¬ë°°ì¹˜í•©ë‹ˆë‹¤.

1. ì´ì „ ë¶€ì„œ ê¶Œí•œ íšŒìˆ˜: ì´ë™ ì „ ì¡°ì§(ì»¨í…Œì´ë„ˆ)ê³¼ ì§ì ‘ ì—°ê²°ëœ ì½ê¸°/ì“°ê¸°/ê´€ë¦¬ ê¶Œí•œì„ ë¹„í™œì„±í™”í•˜ì—¬ ì •ë³´ ì ‘ê·¼ ë²”ìœ„ë¥¼ ì¶•ì†Œ
2. ìƒˆ ë¶€ì„œ ê¸°ë³¸ ê¶Œí•œ ë¶€ì—¬: í‘œì¤€ ì—­í•  ë§¤í•‘ì— ë”°ë¼ ìƒˆ ì¡°ì§ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ìµœì†Œ ê¸°ë³¸ ê¶Œí•œ(Read ë“±)ì„ ì¦‰ì‹œ ë¶€ì—¬
3. ê°œì¸ ìƒì„± ìì‚° ìœ ì§€: ì‚¬ìš©ìê°€ ìƒì„±í•œ ë¬¸ì„œë‚˜ ê°œì¸ ì—°êµ¬ ë…¸íŠ¸ ë“± ì†Œìœ  ê¸°ë°˜ ê¶Œí•œì€ ì´ë™ê³¼ ë¬´ê´€í•˜ê²Œ ì§€ì†
4. ë³€ê²½ ì´ë ¥ ê¸°ë¡: ê¶Œí•œ ë³€ê²½ ì‚¬ìœ , ì´ì „/í˜„ì¬ ì¡°ì§, ì²˜ë¦¬ ì‹œê°ì„ ê°ì‚¬ ë¡œê·¸ì— ì €ì¥í•˜ì—¬ ì¶”ì  ê°€ëŠ¥ì„± í™•ë³´
5. ì•Œë¦¼ ë°œì†¡: ë‹¹ì‚¬ìì™€ í•´ë‹¹ ì¡°ì§ ê´€ë¦¬ì(ì§€ì‹ê´€ë¦¬ì)ì—ê²Œ ê¶Œí•œ ë³€ê²½ ë‚´ì—­ì„ ì•Œë¦¼ ì±„ë„(ì´ë©”ì¼/ë‚´ë¶€ ë©”ì‹œì§€)ë¡œ í†µì§€

ì˜ˆì™¸ ì²˜ë¦¬: ë³µìˆ˜ í”„ë¡œì íŠ¸ ì„ì‹œ ê¶Œí•œì´ ë‚¨ì•„ ìˆëŠ” ê²½ìš° í”„ë¡œì íŠ¸ ì¢…ë£Œ ì¡°ê±´ì„ ìš°ì„  í‰ê°€ í›„ íšŒìˆ˜ ì—¬ë¶€ ê²°ì •.

## 8. ì‹¤ì œ ì—…ë¬´ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

### 8.1 ì‹œë‚˜ë¦¬ì˜¤ 1: ì±„ìš©íŒ€ ì§ì›ì˜ ë¬¸ì„œ ì—…ë¡œë“œ

```
ğŸ‘¤ ê¹€ì±„ìš© (ì±„ìš©íŒ€) â†’ ğŸ“„ "2025ë…„ ì±„ìš©ê°€ì´ë“œ.pdf" ì—…ë¡œë“œ
â”œâ”€â”€ ğŸ¯ ì ‘ê·¼ë²”ìœ„: "íŒ€ ê³µìœ " ì„ íƒ
â”œâ”€â”€ ğŸ”’ ê¶Œí•œì„¤ì •: ì½ê¸°+ë‹¤ìš´ë¡œë“œ í—ˆìš©
â”œâ”€â”€ ğŸ‘¥ ìë™ê¶Œí•œ: ì±„ìš©íŒ€ 5ëª… ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥
â””â”€â”€ ğŸ“ˆ ê²°ê³¼: íŒ€ ë‚´ë¶€ì—ì„œë§Œ í™œìš©ë˜ëŠ” ì—…ë¬´ ë¬¸ì„œë¡œ ë¶„ë¥˜
```

### 8.2 ì‹œë‚˜ë¦¬ì˜¤ 2: ë¶€ì„œ ì§€ì‹ê´€ë¦¬ìì˜ ê¶Œí•œ ìŠ¹ì¸

```
ğŸ‘¨â€ğŸ’¼ ê¹€ì§€ì‹ (ì¸ì‚¬íŒ€ ì§€ì‹ê´€ë¦¬ì) 
â”œâ”€â”€ ğŸ”” ê¶Œí•œìš”ì²­: ì˜ì—…íŒ€ â†’ ì±„ìš©ê°€ì´ë“œ ì½ê¸° ê¶Œí•œ ìš”ì²­
â”œâ”€â”€ ğŸ“‹ ê²€í† ê³¼ì •: ì—…ë¬´ ì—°ê´€ì„± ë° ë³´ì•ˆ ë“±ê¸‰ í™•ì¸
â”œâ”€â”€ âœ… ìŠ¹ì¸ì²˜ë¦¬: ì˜ì—…íŒ€ì— ì½ê¸° ê¶Œí•œ ë¶€ì—¬ (30ì¼ ì œí•œ)
â””â”€â”€ ğŸ“Š ëª¨ë‹ˆí„°ë§: ì ‘ê·¼ ë¡œê·¸ ë° ì‚¬ìš© í†µê³„ ì¶”ì 
```

### 8.3 ì‹œë‚˜ë¦¬ì˜¤ 3: í”„ë¡œì íŠ¸ ê¸°ë°˜ ì„ì‹œ ê¶Œí•œ

```
ğŸš€ ì‹ ê·œ í”„ë¡œì íŠ¸: "2025 ì‹ ì…ì‚¬ì› ì±„ìš© í”„ë¡œì íŠ¸"
â”œâ”€â”€ ğŸ“ ì„ì‹œ ì»¨í…Œì´ë„ˆ: í”„ë¡œì íŠ¸ ì „ìš© ì§€ì‹ ê³µê°„ ìƒì„±
â”œâ”€â”€ ğŸ‘¥ íŒ€ êµ¬ì„±: ì¸ì‚¬íŒ€ 3ëª… + ë§ˆì¼€íŒ…íŒ€ 2ëª… + ì™¸ë¶€ ì»¨ì„¤í„´íŠ¸ 1ëª…
â”œâ”€â”€ â° ê¶Œí•œ ê¸°ê°„: í”„ë¡œì íŠ¸ ê¸°ê°„ (6ê°œì›”) ë™ì•ˆë§Œ ìœ íš¨
â”œâ”€â”€ ğŸ”’ ì ‘ê·¼ ì œì–´: í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
â””â”€â”€ ğŸ—‘ï¸ ìë™ ì •ë¦¬: í”„ë¡œì íŠ¸ ì¢…ë£Œ ì‹œ ì„ì‹œ ê¶Œí•œ ìë™ íšŒìˆ˜
```

## 9. ê¶Œí•œ ê´€ë¦¬ API ì„¤ê³„

### 9.1 ì»¨í…Œì´ë„ˆ ê´€ë¦¬ API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸                                              | HTTP ë©”ì„œë“œ | ê¸°ëŠ¥         | ì„¤ëª…           |
| -------------------------------------------------- | -------- | ---------- | ------------ |
| `/api/admin/containers`                            | GET      | ì»¨í…Œì´ë„ˆ ëª©ë¡ ì¡°íšŒ | ê³„ì¸µì  êµ¬ì¡°ë¡œ ë°˜í™˜   |
| `/api/admin/containers`                            | POST     | ì»¨í…Œì´ë„ˆ ìƒì„±    | ìƒˆ ì§€ì‹ ì»¨í…Œì´ë„ˆ ìƒì„± |
| `/api/admin/containers/{id}/permissions`           | GET      | ì»¨í…Œì´ë„ˆ ê¶Œí•œ ëª©ë¡ | ì‚¬ìš©ìë³„ ê¶Œí•œ í˜„í™©   |
| `/api/admin/containers/{id}/permissions`           | POST     | ê¶Œí•œ ë¶€ì—¬      | ì‚¬ìš©ìì—ê²Œ ê¶Œí•œ í• ë‹¹  |
| `/api/admin/containers/{id}/permissions/{user_id}` | DELETE   | ê¶Œí•œ ì‚­ì œ      | íŠ¹ì • ì‚¬ìš©ì ê¶Œí•œ íšŒìˆ˜ |
| `/api/admin/containers/{id}/sync`                  | POST     | ì¡°ì§ ë°ì´í„° Provider ë™ê¸°í™” | ì¡°ì§ë„ ë³€ê²½ì‚¬í•­ ë°˜ì˜  |

### 9.2 ë¬¸ì„œ ì—…ë¡œë“œ ì‹œ ê¶Œí•œ ì„¤ì • API

ë¬¸ì„œ ì—…ë¡œë“œ ìš”ì²­ì€ íŒŒì¼ ë©”íƒ€ë°ì´í„°ì™€ ì´ˆê¸° ê¶Œí•œ ì •ì±…ì„ í•¨ê»˜ ì „ë‹¬í•˜ì—¬ ì €ì¥ê³¼ ë™ì‹œì— ì ‘ê·¼ ë²”ìœ„ë¥¼ í™•ì •í•©ë‹ˆë‹¤. ì£¼ìš” í•„ë“œ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

| í•„ë“œ | ìœ í˜• | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `file` | STRING | Y | ì—…ë¡œë“œ ëŒ€ìƒ íŒŒì¼ëª… ë˜ëŠ” ì‹ë³„ì |
| `permissions.access_scope` | ENUM | Y | PRIVATE / TEAM / DEPARTMENT / DIVISION / COMPANY ì¤‘ ì„ íƒëœ ê³µìœ  ë²”ìœ„ |
| `permissions.permissions` | ARRAY(ENUM) | Y | í—ˆìš© ê¶Œí•œ ëª©ë¡ (READ, DOWNLOAD, EDIT ë“±) |
| `permissions.expires_at` | DATETIME | N | ê¶Œí•œ ë§Œë£Œ ì‹œê° (ì§€ì • ì‹œ ìë™ íšŒìˆ˜) |
| `permissions.specific_users` | ARRAY(STRING) | N | ê¸°ë³¸ ë²”ìœ„ ì™¸ ì¶”ê°€ë¡œ ê¶Œí•œì„ ë¶€ì—¬í•  ê°œë³„ ì‚¬ìš©ì ID ë¦¬ìŠ¤íŠ¸ |
| `permissions.inherit_to_children` | BOOLEAN | N | í•˜ìœ„ ì»¨í…Œì´ë„ˆ(ìˆì„ ê²½ìš°)ë¡œ ë™ì¼ ê¶Œí•œì„ í•˜í–¥ ì ìš©í• ì§€ ì—¬ë¶€ |

ë™ì‘ ê°œìš”: ìš”ì²­ ìˆ˜ì‹  í›„ íŒŒì¼ ì €ì¥ â†’ ê¶Œí•œ ì •ì±… ë ˆì½”ë“œ ìƒì„± â†’ ê²€ìƒ‰ ì¸ë±ì‹± í ë“±ë¡(ë¹„ë™ê¸°) â†’ ì‘ë‹µìœ¼ë¡œ ìµœì¢… ë¬¸ì„œ ì‹ë³„ì ë°˜í™˜.

ì˜¤ë¥˜ ì‹œë‚˜ë¦¬ì˜¤: ì˜ëª»ëœ ë²”ìœ„ ì½”ë“œ, í—ˆìš©ë˜ì§€ ì•Šì€ ê¶Œí•œ ì¡°í•©(ì˜ˆ: PRIVATE + ì™¸ë¶€ê³µìœ ), ë§Œë£Œ ì‹œê° ê³¼ê±° ì§€ì • ë“±ì€ 400 ì‘ë‹µ.

## 10. ê¶Œí•œ ê´€ë¦¬ ëª¨ë‹ˆí„°ë§ ë° ê°ì‚¬

### 10.1 ê¶Œí•œ ë³€ê²½ ì´ë ¥ ì¶”ì 

- ëª¨ë“  ê¶Œí•œ ë³€ê²½ì‚¬í•­ ì‹¤ì‹œê°„ ë¡œê¹…
- ê¶Œí•œ ë¶€ì—¬ì, ë³€ê²½ ë‚´ìš©, ë³€ê²½ ì¼ì‹œ ê¸°ë¡
- ê¶Œí•œ ë‚¨ìš© íŒ¨í„´ ìë™ ê°ì§€ ë° ì•Œë¦¼

### 10.2 ì ‘ê·¼ í†µê³„ ë° ë¶„ì„

- ë¬¸ì„œë³„/ì‚¬ìš©ìë³„ ì ‘ê·¼ ë¹ˆë„ ë¶„ì„
- ê¶Œí•œ ì‚¬ìš©ë¥  í†µê³„ ì œê³µ
- ë¶ˆí•„ìš”í•œ ê¶Œí•œ ì •ë¦¬ ê¶Œê³ ì‚¬í•­ ì œê³µ

### 10.3 ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜

- ìµœì†Œ ê¶Œí•œ ì›ì¹™ (Principle of Least Privilege) ì ìš©
- ì •ê¸°ì ì¸ ê¶Œí•œ ê²€í†  ë° ì •ë¦¬ í”„ë¡œì„¸ìŠ¤
- ë¯¼ê° ì •ë³´ ì ‘ê·¼ì— ëŒ€í•œ ì¶”ê°€ ìŠ¹ì¸ ì ˆì°¨

---

ì´ ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ë¥¼ í†µí•´ IPBridge ì‹œìŠ¤í…œì—ì„œëŠ” ì§€ì‹ìƒì„±ìì™€ ì§€ì‹ê´€ë¦¬ìê°€ ê°ìì˜ ì—­í• ì— ë§ëŠ” ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ì¡°ì§ ë°ì´í„° Providerì™€ ì—°ë™í•˜ì—¬ ìë™í™”ëœ ê¶Œí•œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## 11. ì‹¤ì œ êµ¬í˜„ ì—…ë°ì´íŠ¸ (2025-10-31)

ìµœê·¼ ë¦´ë¦¬ìŠ¤ì—ì„œ ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ê°€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì²´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

### 11.1 í‘œì¤€ ì—”ë“œí¬ì¸íŠ¸ ë° ì‘ë‹µ ìŠ¤í‚¤ë§ˆ

- GET `/api/v1/permissions/all-user-permissions`
    - ê¶Œí•œ í˜„í™© ì „ì²´ ë¦¬ìŠ¤íŠ¸(ê´€ë¦¬ ê¶Œí•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼)
    - ì‘ë‹µ í•µì‹¬ í•„ë“œ:
        - `user_emp_no`(ì‚¬ë²ˆ), `user_name`(HR.emp_nm), `department`(HR.dept_nm)
        - `container_id`, `container_name`
        - `permission_type` âˆˆ {`admin`, `write`, `read`}
        - `granted_at`, `expires_date`

- GET `/api/v1/permission-requests/pending`
    - ëŒ€ê¸° ìš”ì²­ ëª©ë¡: `{ total: number, requests: RequestDto[] }`
    - í˜ì´ì§€ë„¤ì´ì…˜/ì •ë ¬ì€ ì°¨ê¸° ë°˜ì˜ ì˜ˆì •

### 11.2 ì—­í• â†’ê¶Œí•œ íƒ€ì… ë§¤í•‘ ê·œì¹™

- `role_id` í‘œì¤€ ë§¤í•‘(ì„œë²„ì—ì„œ ë³€í™˜ í›„ `permission_type`ìœ¼ë¡œ ë°˜í™˜)
    - ADMIN ê³„ì—´ â†’ `admin`
    - EDITOR/WRITE ê³„ì—´ â†’ `write`
    - VIEWER/READ ê³„ì—´ â†’ `read`

### 11.3 ì¡°ì§ ë°ì´í„° ì—°ê³„ í•„ë“œ ì •í•©ì„±

- ì‚¬ìš©ì ì´ë¦„/ë¶€ì„œ(Provider ì¼ë°˜í™”):
    - `TbHrPeople.emp_nm` â†’ `user_name`
    - `TbHrPeople.dept_nm` â†’ `department`
    - ì°¸ê³ : í˜„ì¬ êµ¬í˜„ í…Œì´ë¸” ëª…ì¹­ì€ `TbSapHrInfo`ì´ë©°, ë¬¸ì„œì—ì„œëŠ” ì¼ë°˜í™”ëœ `TbHrPeople`ë¡œ í‘œê¸°í•©ë‹ˆë‹¤.

- ê¶Œí•œ ë§Œë£Œì¼:
    - `expires_date` ì‚¬ìš© (ì´ì „ `valid_until` ëª…ì¹­ ì‚¬ìš© ê¸ˆì§€)

### 11.4 ì§€ì‹ê´€ë¦¬ì ìŠ¤ì½”í”„(ê´€ë¦¬ ë²”ìœ„) ì ìš©

- ì •ì±…: â€œê´€ë¦¬ìê°€ ê´€ë¦¬í•˜ëŠ” ì»¨í…Œì´ë„ˆâ€ë¡œ ê¶Œí•œ ì¡°íšŒ/ìŠ¹ì¸ ë²”ìœ„ë¥¼ ì œí•œ
- í˜„í™©: í”„ëŸ°íŠ¸ í•„í„°ë¡œ ìš°ì„  ì ìš©, ì„œë²„ ì¿¼ë¦¬ ë ˆë²¨ ê°•ì œ ì œí•œ ë‹¨ê³„ì  ë„ì…(ì»¨í…Œì´ë„ˆ-ê´€ë¦¬ì ë§¤í•‘ ì¡°ì¸ ì¶”ê°€ ì˜ˆì •)

### 11.5 í”„ëŸ°íŠ¸ì—”ë“œ ì—°ë™ íŒŒì¼

- `frontend/src/services/managerService.ts` â†’ `/api/v1/permissions/all-user-permissions` ì—°ë™ ë° í•„ë“œ ë§¤í•‘
- `frontend/src/pages/manager/PermissionApprovalManagement.tsx` â†’ ìŠ¹ì¸ ëŒ€ê¸°/í˜„í™©/ì´ë ¥ íƒ­
- `frontend/src/pages/manager/UserPermissionManagement.tsx` â†’ ì‚¬ìš©ìë³„ ê¶Œí•œ í˜„í™©, í•„í„°/ê²€ìƒ‰

### 11.6 ì‚¬ìš©ì ê¶Œí•œ ì‹ ì²­ í˜„í™© í™”ë©´ (2025-11-05)

- ì‹ ê·œ ì‚¬ìš©ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸: `GET /api/v1/permission-requests/my-requests`
    - ì§€ì› íŒŒë¼ë¯¸í„°: `status`, `container_id`, `from_date`, `to_date`, `page`, `size`
    - ì‘ë‹µ ìŠ¤í‚¤ë§ˆ: `{ requests: PermissionRequestResponse[], total_count: number }`
    - ê° ìš”ì²­ í•­ëª©ì€ `request_id`, `container_name`, `requested_permission_level`, `request_reason`, `status`, `requested_at`, `processed_at`, `rejection_reason` ë“±ì„ í¬í•¨ (ISO8601 ë¬¸ìì—´)
- í”„ëŸ°íŠ¸ì—”ë“œ ì—°ë™: `frontend/src/services/permissionRequestService.ts`
    - Axios + `getAuthHeader()`ë¡œ JWT ì¸ì¦ í—¤ë” ìë™ ì²¨ë¶€
    - ë°±ì—”ë“œ ì‘ë‹µì„ `PermissionRequest` íƒ€ì…ìœ¼ë¡œ ì¬ë§¤í•‘í•˜ì—¬ UIì—ì„œ ì¼ê´€ëœ í•„ë“œëª… ì‚¬ìš© (`requested_permission_level` â†’ ë°°ì§€, `request_reason` â†’ í‘œ ì„¤ëª… ë“±)
    - ì¥ì•  ì‹œ ë¹ˆ ë°°ì—´ ë°˜í™˜ìœ¼ë¡œ UI ì•ˆì „ì„± í™•ë³´, ì½˜ì†” ë””ë²„ê·¸ ë¡œê·¸(`[UI DEBUG]`) ìœ ì§€
- í™”ë©´ êµ¬ì„±: `frontend/src/pages/user/PermissionRequestsPage.tsx`
    - í†µê³„ ì¹´ë“œ 4ì¢… (ì „ì²´/ëŒ€ê¸°/ìŠ¹ì¸/ê±°ë¶€) í´ë¼ì´ì–¸íŠ¸ ê³„ì‚°, Tailwind ê¸°ë°˜ ë°°ì§€ ì»´í¬ë„ŒíŠ¸(`getStatusBadge`, `getPermissionLevelBadge`)ë¡œ ì‹œê°í™”
    - ìƒíƒœ í•„í„° ë²„íŠ¼(`all`, `pending`, `approved`, `rejected`) ì¦‰ì‹œ ì ìš© ë° ë¹ˆ ìƒíƒœ ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ
    - í…Œì´ë¸” ì—´: ì‹ ì²­ì¼ì‹œ, ì»¨í…Œì´ë„ˆ, ìš”ì²­ ê¶Œí•œ, ì‹ ì²­ ì‚¬ìœ , ìƒíƒœ, ì²˜ë¦¬ì¼ì‹œ, ì²˜ë¦¬ ì‚¬ìœ 
- ìƒíƒœ/ë¼ë²¨ ë§¤í•‘ (ë¡œì»¬ë¼ì´ì¦ˆ ì ìš©)
    - `PENDING` â†’ "ìŠ¹ì¸ ëŒ€ê¸°"
    - `APPROVED` â†’ "ìŠ¹ì¸ë¨"
    - `REJECTED` â†’ "ê±°ë¶€ë¨"
    - `CANCELLED` â†’ "ì·¨ì†Œë¨"
- ê¶Œí•œ ë ˆë²¨ ë°°ì§€: VIEWER(ì½ê¸°), EDITOR(í¸ì§‘), MANAGER(ê´€ë¦¬), ADMIN(ê´€ë¦¬ì), OWNER(ì†Œìœ ì) â†’ Tailwind ìƒ‰ìƒ í† í°ìœ¼ë¡œ êµ¬ë¶„

## 12. ê¶Œí•œ ê´€ë¦¬ í•µì‹¬ ì›ì¹™ ë° ì ìš© ê·œì¹™ (2025-10-31)

### 12.1 ì‚¬ìš©ì ìœ í˜•ë³„ ê¶Œí•œ ë²”ìœ„ ì›ì¹™

#### 12.1.1 ì‹œìŠ¤í…œ ê´€ë¦¬ì (SYSTEM_ADMIN)

**ì •ì˜**: ì „ì²´ ì‹œìŠ¤í…œì— ëŒ€í•œ ìµœê³  ê¶Œí•œ ë³´ìœ ì

**íŠ¹ì„±**:
- ì‚¬ë²ˆ: `ADMIN001` (ì˜ˆ: ê¹€ê´€ë¦¬ì)
- ì—­í• : `SYSTEM_ADMIN` ë˜ëŠ” `ADMIN` (tb_user_roles.role_name)
- ê¶Œí•œ ë²”ìœ„: **ëª¨ë“  ì§€ì‹ ì»¨í…Œì´ë„ˆ**
- íŠ¹ë³„ ê¶Œí•œ:
  - ëª¨ë“  ì»¨í…Œì´ë„ˆ/ë¬¸ì„œ ì ‘ê·¼ ê°€ëŠ¥
  - ëª¨ë“  ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸/ê±°ë¶€ ê°€ëŠ¥
  - ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½ ê°€ëŠ¥
  - ì‚¬ìš©ì ì—­í•  ë¶€ì—¬/íšŒìˆ˜ ê°€ëŠ¥

**ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§**:
```python
# SYSTEM_ADMINì€ manager_emp_no í•„í„°ë§ì„ ì ìš©í•˜ì§€ ì•ŠìŒ
if user_role == 'SYSTEM_ADMIN':
    # ì „ì²´ ë°ì´í„° ì¡°íšŒ (í•„í„°ë§ ì—†ìŒ)
    permissions = await list_all_permissions(manager_emp_no=None)
else:
    # ì§€ì‹ê´€ë¦¬ìëŠ” ê´€ë¦¬ ë²”ìœ„ë§Œ ì¡°íšŒ
    permissions = await list_all_permissions(manager_emp_no=current_user.emp_no)
```

#### 12.1.2 ì§€ì‹ê´€ë¦¬ì (MANAGER)

**ì •ì˜**: íŠ¹ì • ì»¨í…Œì´ë„ˆ ê³„ì¸µì— ëŒ€í•œ ê´€ë¦¬ ê¶Œí•œ ë³´ìœ ì

**íŠ¹ì„±**:
- ì‚¬ë²ˆ: ì¼ë°˜ ì§ì› ì‚¬ë²ˆ (ì˜ˆ: ì •MS)
- ì—­í• : `MANAGER`, `OWNER` (íŠ¹ì • ì»¨í…Œì´ë„ˆì— ëŒ€í•œ)
- ê¶Œí•œ ë²”ìœ„: **ê´€ë¦¬ ì»¨í…Œì´ë„ˆ + ëª¨ë“  í•˜ìœ„ ì»¨í…Œì´ë„ˆ**
- íŠ¹ë³„ ê¶Œí•œ:
  - ê´€ë¦¬ ë²”ìœ„ ë‚´ ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸/ê±°ë¶€
  - ê´€ë¦¬ ë²”ìœ„ ë‚´ ì‚¬ìš©ì ê¶Œí•œ ì¡°íšŒ/ìˆ˜ì •
  - ê´€ë¦¬ ë²”ìœ„ ë‚´ ë¬¸ì„œ í’ˆì§ˆ ê´€ë¦¬

**ì˜ˆì‹œ**: ì •MS (MSì„œë¹„ìŠ¤íŒ€ ì§€ì‹ê´€ë¦¬ì)
- ì§ì ‘ ê´€ë¦¬ ì»¨í…Œì´ë„ˆ: `MSì„œë¹„ìŠ¤íŒ€`
- ìƒìœ„ ì»¨í…Œì´ë„ˆ: `í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€` â†’ `CEOì§ì†` (ë£¨íŠ¸)
- í•˜ìœ„ ì»¨í…Œì´ë„ˆ: (ì•„ì§ ì—†ìŒ, ìƒì„± ì‹œ ìë™ ê´€ë¦¬ ë²”ìœ„ í¬í•¨)

### 12.2 ì»¨í…Œì´ë„ˆ ê³„ì¸µ êµ¬ì¡° ë° ê¶Œí•œ ìƒì† ì›ì¹™

#### 12.2.1 ê³„ì¸µ êµ¬ì¡° ì˜ˆì‹œ

```
ğŸ¢ CEOì§ì† (ROOT - container_id: "CEOì§ì†")
â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€ (container_id: "í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€", parent_container_id: "CEOì§ì†")
â”‚   â”œâ”€â”€ ğŸ“ í´ë¼ìš°ë“œì„œë¹„ìŠ¤íŒ€ (parent_container_id: "í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€")
â”‚   â””â”€â”€ ğŸ“ MSì„œë¹„ìŠ¤íŒ€ (parent_container_id: "í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€")
â”‚       â”œâ”€â”€ ğŸ“ (ë¯¸ë˜ í•˜ìœ„íŒ€ 1)
â”‚       â””â”€â”€ ğŸ“ (ë¯¸ë˜ í•˜ìœ„íŒ€ 2)
â””â”€â”€ ğŸ“ CTIì‚¬ì—…ë³¸ë¶€ (parent_container_id: "CEOì§ì†")
    â””â”€â”€ ...
```

#### 12.2.2 ê¶Œí•œ ìƒì† ê·œì¹™

**ì›ì¹™ 1: ìƒí–¥ ì½ê¸° ê¶Œí•œ ìë™ ë¶€ì—¬**
- í•˜ìœ„ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ìëŠ” **ëª¨ë“  ìƒìœ„ ì»¨í…Œì´ë„ˆì— ìµœì†Œ READ ê¶Œí•œ** ìë™ ë¶€ì—¬
- ì˜ˆ: `MSì„œë¹„ìŠ¤íŒ€` ê´€ë¦¬ì ì •MS
  - `MSì„œë¹„ìŠ¤íŒ€`: MANAGER (ì§ì ‘ ë¶€ì—¬)
  - `í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€`: READ (ìë™ ë¶€ì—¬) â† **ìƒìœ„ ì»¨í…Œì´ë„ˆ**
  - `CEOì§ì†`: READ (ìë™ ë¶€ì—¬) â† **ë£¨íŠ¸ ì»¨í…Œì´ë„ˆ**

**ì›ì¹™ 2: í•˜í–¥ ê¶Œí•œ ìë™ í™•ì¥**
- íŠ¹ì • ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ê´€ë¦¬ ê¶Œí•œì€ **ëª¨ë“  í•˜ìœ„ ì»¨í…Œì´ë„ˆì— ìë™ ì ìš©**
- ì˜ˆ: `í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€` ê´€ë¦¬ì
  - `í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€`: MANAGER (ì§ì ‘ ë¶€ì—¬)
  - `í´ë¼ìš°ë“œì„œë¹„ìŠ¤íŒ€`: MANAGER (ìë™ í™•ì¥)
  - `MSì„œë¹„ìŠ¤íŒ€`: MANAGER (ìë™ í™•ì¥)
  - `MSì„œë¹„ìŠ¤íŒ€` ì•„ë˜ ë¯¸ë˜ í•˜ìœ„íŒ€: MANAGER (ìë™ í™•ì¥)

**ì›ì¹™ 3: ì§ì ‘ ê¶Œí•œ ìš°ì„  ì›ì¹™**
- ìƒì† ê¶Œí•œê³¼ ì§ì ‘ ê¶Œí•œì´ ì¶©ëŒí•  ê²½ìš° **ì§ì ‘ ë¶€ì—¬ëœ ê¶Œí•œ ìš°ì„ **
- ê¶Œí•œ ë ˆë²¨: ADMIN > MANAGER > WRITE > READ

#### 12.2.3 ê¶Œí•œ í™•ì¸ ìš°ì„ ìˆœìœ„

```
1ìˆœìœ„: ì§ì ‘ ê¶Œí•œ (tb_user_permissionsì— ëª…ì‹œì ìœ¼ë¡œ ê¸°ë¡ëœ ê¶Œí•œ)
2ìˆœìœ„: ê´€ë¦¬ì í•˜í–¥ ìƒì† (ìƒìœ„ ì»¨í…Œì´ë„ˆì˜ MANAGER/OWNER ê¶Œí•œ)
3ìˆœìœ„: ìƒí–¥ ì½ê¸° ê¶Œí•œ (í•˜ìœ„ ê´€ë¦¬ìì˜ ìƒìœ„ ì»¨í…Œì´ë„ˆ READ ê¶Œí•œ)
4ìˆœìœ„: ì—­í•  ê¸°ë°˜ ê¶Œí•œ (tb_user_rolesì˜ ê¸°ë³¸ ì—­í• )
```

### 12.3 ê´€ë¦¬ ë²”ìœ„ í•„í„°ë§ ë¡œì§

#### 12.3.1 ë°±ì—”ë“œ í•„í„°ë§ ì „ëµ

**get_managed_container_ids(manager_emp_no) ë™ì‘ ë°©ì‹**:

```python
async def get_managed_container_ids(manager_emp_no: str) -> List[str]:
    """
    ì§€ì‹ê´€ë¦¬ìê°€ ê´€ë¦¬í•˜ëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆ ID ì¡°íšŒ
    
    ë°˜í™˜ê°’:
    - ì‹œìŠ¤í…œ ê´€ë¦¬ì(SYSTEM_ADMIN): ë¹ˆ ë¦¬ìŠ¤íŠ¸ [] â†’ í•„í„°ë§ ì—†ìŒ
    - ì§€ì‹ê´€ë¦¬ì: [ê´€ë¦¬ ì»¨í…Œì´ë„ˆ + ëª¨ë“  í•˜ìœ„ ì»¨í…Œì´ë„ˆ]
    """
    
    # 1. ì‹œìŠ¤í…œ ê´€ë¦¬ì ì²´í¬
    if await is_system_admin(manager_emp_no):
        return []  # ë¹ˆ ë¦¬ìŠ¤íŠ¸ = ì „ì²´ ì¡°íšŒ (í•„í„°ë§ ì•ˆ í•¨)
    
    # 2. ê´€ë¦¬ì ê¶Œí•œì„ ê°€ì§„ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
    # role_id IN ('ADMIN', 'MANAGER', 'OWNER', 'SYSTEM_ADMIN')
    root_containers = await get_manager_root_containers(manager_emp_no)
    
    # 3. ê° ê´€ë¦¬ ì»¨í…Œì´ë„ˆì˜ í•˜ìœ„ ê³„ì¸µ ì¬ê·€ ì¡°íšŒ
    all_containers = set(root_containers)
    for root_id in root_containers:
        descendants = await get_all_descendants(root_id)
        all_containers.update(descendants)
    
    return list(all_containers)
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```python
# ì •MS (MSì„œë¹„ìŠ¤íŒ€ ê´€ë¦¬ì)
allowed_ids = await get_managed_container_ids("ì •MS")
# ë°˜í™˜: ["MSì„œë¹„ìŠ¤íŒ€", "MSì„œë¹„ìŠ¤íŒ€_í•˜ìœ„1", "MSì„œë¹„ìŠ¤íŒ€_í•˜ìœ„2", ...]

# ê¹€ê´€ë¦¬ì (SYSTEM_ADMIN)
allowed_ids = await get_managed_container_ids("ADMIN001")
# ë°˜í™˜: [] â†’ ë¹ˆ ë¦¬ìŠ¤íŠ¸ëŠ” "ì „ì²´ ì¡°íšŒ" ì˜ë¯¸
```

#### 12.3.2 í”„ë¡ íŠ¸ì—”ë“œ í•„í„°ë§ ë³´ì™„

- ë°±ì—”ë“œ í•„í„°ë§ì´ 1ì°¨ ë³´ì•ˆ ë ˆì´ì–´
- í”„ë¡ íŠ¸ì—”ë“œëŠ” UX ê°œì„ ìš© í´ë¼ì´ì–¸íŠ¸ í•„í„°ë§ ì œê³µ
- ë‘ ë ˆì´ì–´ ëª¨ë‘ ë™ì¼í•œ ë…¼ë¦¬ ì ìš©

### 12.4 ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸ ë²”ìœ„

#### 12.4.1 ìŠ¹ì¸ ê°€ëŠ¥ ë²”ìœ„ ê²°ì • ë¡œì§

```python
async def can_approve_request(approver_emp_no: str, request: PermissionRequest) -> bool:
    """
    ìŠ¹ì¸ìê°€ í•´ë‹¹ ìš”ì²­ì„ ìŠ¹ì¸í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
    
    ì¡°ê±´:
    1. ì‹œìŠ¤í…œ ê´€ë¦¬ì: ëª¨ë“  ìš”ì²­ ìŠ¹ì¸ ê°€ëŠ¥
    2. ì§€ì‹ê´€ë¦¬ì: ìš”ì²­ ëŒ€ìƒ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬ ë²”ìœ„ ë‚´ì— ìˆì–´ì•¼ í•¨
    """
    
    # ì‹œìŠ¤í…œ ê´€ë¦¬ì ì²´í¬
    if await is_system_admin(approver_emp_no):
        return True
    
    # ì§€ì‹ê´€ë¦¬ìì˜ ê´€ë¦¬ ë²”ìœ„ í™•ì¸
    managed_containers = await get_managed_container_ids(approver_emp_no)
    
    return request.container_id in managed_containers
```

### 12.5 ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ ê¶Œí•œ ìë™ ë¶€ì—¬

#### 12.5.1 ì‹ ê·œ ì»¨í…Œì´ë„ˆ ìƒì„± ê·œì¹™

```python
async def create_container(parent_container_id: str, container_name: str, creator_emp_no: str):
    """
    ì‹ ê·œ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ ìë™ ê¶Œí•œ ë¶€ì—¬
    """
    
    # 1. ì»¨í…Œì´ë„ˆ ìƒì„±
    new_container = await insert_container(parent_container_id, container_name)
    
    # 2. ìƒì„±ìì—ê²Œ OWNER ê¶Œí•œ ë¶€ì—¬
    await grant_permission(creator_emp_no, new_container.id, role_id='OWNER')
    
    # 3. ìƒìœ„ ì»¨í…Œì´ë„ˆ ê´€ë¦¬ìë“¤ì—ê²Œ MANAGER ê¶Œí•œ ìë™ ë¶€ì—¬
    parent_managers = await get_container_managers(parent_container_id)
    for manager in parent_managers:
        await grant_permission(manager.emp_no, new_container.id, role_id='MANAGER')
    
    # 4. í•˜ìœ„ ê´€ë¦¬ìì—ê²Œ ìƒìœ„ READ ê¶Œí•œ ë¶€ì—¬ (ì—­ë°©í–¥)
    # creator_emp_no â†’ parent_container_id, ìµœìƒìœ„ê¹Œì§€ READ ê¶Œí•œ
    current_parent = parent_container_id
    while current_parent:
        await ensure_read_permission(creator_emp_no, current_parent)
        current_parent = await get_parent_container_id(current_parent)
    
    return new_container
```

### 12.6 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] PermissionService.get_managed_container_ids() êµ¬í˜„
- [x] PermissionService.is_system_admin() êµ¬í˜„
- [x] ì‹œìŠ¤í…œ ê´€ë¦¬ì vs ì§€ì‹ê´€ë¦¬ì êµ¬ë¶„ ë¡œì§
- [x] ì‹œìŠ¤í…œ ê´€ë¦¬ì í•„í„°ë§ ì˜ˆì™¸ ì²˜ë¦¬ (ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜)
- [x] ì§€ì‹ê´€ë¦¬ì ë²”ìœ„ í•„í„°ë§ (ê´€ë¦¬ ì»¨í…Œì´ë„ˆ + í•˜ìœ„)
- [ ] **ìƒí–¥ READ ê¶Œí•œ ìë™ ë¶€ì—¬ ë¡œì§** (TODO)
- [ ] **í•˜ìœ„ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ ê¶Œí•œ ìë™ ìƒì†** (TODO)
- [ ] ê¶Œí•œ í™•ì¸ ìš°ì„ ìˆœìœ„ ì•Œê³ ë¦¬ì¦˜ ì ìš©
- [x] ë°±ì—”ë“œ API í•„í„°ë§ ì ìš© (list_all_permissions, get_pending_requests)
- [x] í”„ë¡ íŠ¸ì—”ë“œ ë²”ìœ„ ì œí•œ ì ìš©

### 12.7 êµ¬í˜„ ì˜ˆì‹œ

#### ì˜ˆì‹œ 1: ì‹œìŠ¤í…œ ê´€ë¦¬ì (ê¹€ê´€ë¦¬ì, ADMIN001)

```python
# ê¹€ê´€ë¦¬ì ê¶Œí•œ ì¡°íšŒ
allowed_ids = await get_managed_container_ids("ADMIN001")
# ë°˜í™˜: [] (ë¹ˆ ë¦¬ìŠ¤íŠ¸ = ì‹œìŠ¤í…œ ê´€ë¦¬ì, í•„í„°ë§ ì—†ìŒ)

# API í˜¸ì¶œ ì‹œ
GET /api/v1/permissions/all-user-permissions
# ì‘ë‹µ: ëª¨ë“  ì»¨í…Œì´ë„ˆì˜ ëª¨ë“  ê¶Œí•œ (í•„í„°ë§ ì—†ìŒ)
```

#### ì˜ˆì‹œ 2: ì§€ì‹ê´€ë¦¬ì (ì •MS, MSì„œë¹„ìŠ¤íŒ€ ê´€ë¦¬ì)

```python
# ì •MS ê¶Œí•œ ì¡°íšŒ
allowed_ids = await get_managed_container_ids("ì •MS")
# ë°˜í™˜: ["MSì„œë¹„ìŠ¤íŒ€", "MSì„œë¹„ìŠ¤íŒ€_í•˜ìœ„1", "MSì„œë¹„ìŠ¤íŒ€_í•˜ìœ„2", ...]

# API í˜¸ì¶œ ì‹œ
GET /api/v1/permissions/all-user-permissions
# ì‘ë‹µ: MSì„œë¹„ìŠ¤íŒ€ ë° í•˜ìœ„ ì»¨í…Œì´ë„ˆì˜ ê¶Œí•œë§Œ ë°˜í™˜

# ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸
POST /api/v1/permission-requests/{request_id}/approve
# ì¡°ê±´: request.container_idê°€ allowed_ids ì•ˆì— ìˆì–´ì•¼ ìŠ¹ì¸ ê°€ëŠ¥
```

#### ì˜ˆì‹œ 3: ì •MSì˜ ìƒìœ„ ì»¨í…Œì´ë„ˆ ì½ê¸° ê¶Œí•œ (ìë™ ë¶€ì—¬ ì˜ˆì •)

```sql
-- í˜„ì¬ êµ¬í˜„: ëª…ì‹œì  ê¶Œí•œ í•„ìš”
INSERT INTO tb_user_permissions (user_emp_no, container_id, role_id)
VALUES ('ì •MS', 'MSì„œë¹„ìŠ¤íŒ€', 'MANAGER');

-- TODO: ìë™ ìƒí–¥ READ ê¶Œí•œ ë¶€ì—¬
INSERT INTO tb_user_permissions (user_emp_no, container_id, role_id, is_inherited)
VALUES 
  ('ì •MS', 'í´ë¼ìš°ë“œì‚¬ì—…ë³¸ë¶€', 'READ', 'Y'),  -- ìƒìœ„ ì»¨í…Œì´ë„ˆ
  ('ì •MS', 'CEOì§ì†', 'READ', 'Y');            -- ë£¨íŠ¸ ì»¨í…Œì´ë„ˆ
```

---

**ë¬¸ì„œ ë²„ì „**: v3.3  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-04  
**ì‘ì„±ì**: WKMS ê°œë°œíŒ€  
**ê²€í† ì**: ì‹œìŠ¤í…œ ì•„í‚¤í…íŠ¸

## 13. ìµœì‹  êµ¬í˜„ ì—…ë°ì´íŠ¸ (2025-11-04)

### 13.1 ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± ë° ê¶Œí•œ ê´€ë¦¬

#### 13.1.1 ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± ê¸°ëŠ¥ êµ¬í˜„

**ëª©ì **: ì¼ë°˜ ì‚¬ìš©ìê°€ ìì‹ ì˜ ê°œì¸ ì§€ì‹ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

**êµ¬í˜„ ë‚´ìš©**:

1. **ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸**:
   - `POST /api/v1/containers/user/create`: ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„±
   - `DELETE /api/v1/containers/user/{container_id}`: ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ì‚­ì œ

2. **ì»¨í…Œì´ë„ˆ ìƒì„± ê·œì¹™**:
   ```python
   # ì»¨í…Œì´ë„ˆ ID íŒ¨í„´: USER_{emp_no}_{UUID}
   # ì˜ˆ: USER_77107791_9408CC51
   
   container_id = f"USER_{emp_no}_{uuid.uuid4().hex[:8].upper()}"
   ```

3. **ìë™ ê¶Œí•œ ë¶€ì—¬**:
   ```python
   async def create_user_container(parent_container_id, container_name, user_emp_no):
       """
       ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ ìë™ ê¶Œí•œ ë¶€ì—¬
       
       ìë™ìœ¼ë¡œ ë¶€ì—¬ë˜ëŠ” ê¶Œí•œ:
       1. ìƒì„±ì(ì‚¬ìš©ì): OWNER ê¶Œí•œ
       2. ì‹œìŠ¤í…œê´€ë¦¬ì(ADMIN001): ADMIN ê¶Œí•œ
       """
       
       # 1. ì»¨í…Œì´ë„ˆ ìƒì„±
       new_container = await create_container(
           parent_container_id=parent_container_id,
           container_name=container_name,
           container_type='PERSONAL',
           owner_emp_no=user_emp_no
       )
       
       # 2. ìƒì„±ìì—ê²Œ OWNER ê¶Œí•œ ë¶€ì—¬
       await create_permission(
           container_id=new_container.container_id,
           user_emp_no=user_emp_no,
           role_id='OWNER',
           granted_by='SYSTEM'
       )
       
       # 3. ì‹œìŠ¤í…œê´€ë¦¬ìì—ê²Œ ADMIN ê¶Œí•œ ë¶€ì—¬
       await create_permission(
           container_id=new_container.container_id,
           user_emp_no='ADMIN001',
           role_id='ADMIN',
           granted_by='SYSTEM'
       )
       
       return new_container
   ```

4. **ì»¨í…Œì´ë„ˆ ì‚­ì œ ê²€ì¦**:
   ```python
   async def delete_user_container(container_id, user_emp_no):
       """
       ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ì‚­ì œ ê²€ì¦
       
       ì‚­ì œ ê°€ëŠ¥ ì¡°ê±´:
       1. USER_ë¡œ ì‹œì‘í•˜ëŠ” PERSONAL ì»¨í…Œì´ë„ˆ
       2. ì‚¬ìš©ìê°€ OWNER ê¶Œí•œ ë³´ìœ 
       3. ë¬¸ì„œê°€ ì—†ëŠ” ë¹ˆ ì»¨í…Œì´ë„ˆ
       """
       
       # 1. PERSONAL ì»¨í…Œì´ë„ˆ í™•ì¸
       if not container_id.startswith('USER_'):
           raise PermissionError("PERSONAL ì»¨í…Œì´ë„ˆë§Œ ì‚­ì œ ê°€ëŠ¥")
       
       # 2. OWNER ê¶Œí•œ í™•ì¸
       permission = await check_permission(user_emp_no, container_id)
       if permission.role_id != 'OWNER':
           raise PermissionError("OWNER ê¶Œí•œ í•„ìš”")
       
       # 3. ë¹ˆ ì»¨í…Œì´ë„ˆ í™•ì¸
       if container.document_count > 0:
           raise ValueError("ë¬¸ì„œê°€ ìˆëŠ” ì»¨í…Œì´ë„ˆëŠ” ì‚­ì œ ë¶ˆê°€")
       
       await delete_container(container_id)
   ```

#### 13.1.2 í”„ë¡ íŠ¸ì—”ë“œ UI êµ¬í˜„

**íŒŒì¼**: `frontend/src/pages/user/MyKnowledge.tsx`

**ê¸°ëŠ¥**:
1. "ì»¨í…Œì´ë„ˆ ì¶”ê°€" ë²„íŠ¼: ì„ íƒëœ ë¶€ëª¨ ì»¨í…Œì´ë„ˆ í•˜ìœ„ì— ìƒˆ ì»¨í…Œì´ë„ˆ ìƒì„±
2. "ì»¨í…Œì´ë„ˆ ì‚­ì œ" ë²„íŠ¼: ë¹ˆ PERSONAL ì»¨í…Œì´ë„ˆ ì‚­ì œ
3. ìë™ í¬ì»¤ìŠ¤: ìƒì„±/ì‚­ì œ í›„ ìë™ìœ¼ë¡œ í•´ë‹¹ ìœ„ì¹˜ë¡œ í¬ì»¤ìŠ¤ ì´ë™
4. íŠ¸ë¦¬ í™•ì¥: ìƒì„±ëœ ì»¨í…Œì´ë„ˆê¹Œì§€ì˜ ì „ì²´ ê²½ë¡œ ìë™ í™•ì¥

**ì»´í¬ë„ŒíŠ¸**: `frontend/src/pages/user/my-knowledge/components/ContainerCreateModal.tsx`

```typescript
interface ContainerCreateModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (name: string) => Promise<void>;
  parentContainerName: string;
}

// ì‚¬ìš© ì˜ˆì‹œ
<ContainerCreateModal
  isOpen={isCreateModalOpen}
  onClose={() => setIsCreateModalOpen(false)}
  onSubmit={handleContainerCreate}
  parentContainerName={selectedContainer?.name || ''}
/>
```

### 13.2 ê¶Œí•œ ì‹œìŠ¤í…œ ê°œì„ 

#### 13.2.1 OWNER ì—­í•  ì—…ë¡œë“œ ê¶Œí•œ ì¶”ê°€

**ë¬¸ì œ**: ì‚¬ìš©ìê°€ ìì‹ ì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í–ˆì§€ë§Œ ë¬¸ì„œ ì—…ë¡œë“œ ì‹œ ê¶Œí•œ ì˜¤ë¥˜ ë°œìƒ

**ì›ì¸**: `check_upload_permission`ì—ì„œ OWNER ì—­í• ì„ í—ˆìš© ëª©ë¡ì— í¬í•¨í•˜ì§€ ì•ŠìŒ

**ìˆ˜ì • ë‚´ìš©**:
```python
# backend/app/services/auth/permission_service.py

async def check_upload_permission(
    self,
    user_emp_no: str,
    container_id: str
) -> Tuple[bool, str]:
    """
    ì»¨í…Œì´ë„ˆ ì—…ë¡œë“œ ê¶Œí•œ í™•ì¸
    
    ì—…ë¡œë“œ í—ˆìš© ê¶Œí•œ:
    - OWNER: ì»¨í…Œì´ë„ˆ ì†Œìœ ì
    - ADMIN: ì‹œìŠ¤í…œ ê´€ë¦¬ì
    - MANAGER: ì§€ì‹ ê´€ë¦¬ì
    - EDITOR: í¸ì§‘ì
    - CONTRIBUTOR: ê¸°ì—¬ì
    - MEMBER_DEPT: ë¶€ì„œ ë©¤ë²„
    """
    
    permission_level = await service.get_user_permission_level(user_emp_no, container_id)
    
    # OWNERë¥¼ ìµœìš°ì„  ê¶Œí•œìœ¼ë¡œ ì¶”ê°€
    upload_allowed_levels = ["OWNER", "ADMIN", "MANAGER", "EDITOR", "CONTRIBUTOR", "MEMBER_DEPT"]
    can_upload = permission_level in upload_allowed_levels
    
    if not can_upload:
        return False, f"ì—…ë¡œë“œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. í˜„ì¬ ê¶Œí•œ: {permission_level}"
    
    return True, permission_level
```

#### 13.2.2 ì‹œìŠ¤í…œ ê´€ë¦¬ì ë° ì§€ì‹ ê´€ë¦¬ì ê¶Œí•œ ìë™ ë¶€ì—¬

**êµ¬í˜„ ìŠ¤í¬ë¦½íŠ¸**: `add_admin_permissions_to_user_containers.py`

**ëª©ì **: ê¸°ì¡´ ì‚¬ìš©ì ì»¨í…Œì´ë„ˆì— ì‹œìŠ¤í…œ ê´€ë¦¬ì ê¶Œí•œ ìë™ ì¶”ê°€

```python
async def add_admin_permissions():
    """
    ëª¨ë“  USER_ ì»¨í…Œì´ë„ˆì— ADMIN001ì—ê²Œ ADMIN ê¶Œí•œ ë¶€ì—¬
    
    ì²˜ë¦¬ ë‚´ìš©:
    - USER_ë¡œ ì‹œì‘í•˜ëŠ” PERSONAL ì»¨í…Œì´ë„ˆ ì¡°íšŒ
    - ê° ì»¨í…Œì´ë„ˆì— ADMIN001 ADMIN ê¶Œí•œ í™•ì¸
    - ì—†ìœ¼ë©´ ìë™ ìƒì„±
    """
    
    user_containers = await get_user_containers()
    
    for container in user_containers:
        # ê¸°ì¡´ ADMIN ê¶Œí•œ í™•ì¸
        existing = await check_admin_permission(container.container_id)
        
        if not existing:
            # ADMIN ê¶Œí•œ ìƒì„±
            await create_permission(
                container_id=container.container_id,
                user_emp_no='ADMIN001',
                role_id='ADMIN',
                permission_type='DIRECT',
                access_scope='FULL',
                permission_source='SYSTEM_AUTO',
                granted_by='SYSTEM'
            )
```

**ì‹¤í–‰ ê²°ê³¼**:
```
âœ… ì»¨í…Œì´ë„ˆ: USER_77107791_CB46AC5B - ADMIN ê¶Œí•œ ì¶”ê°€
âœ… ì»¨í…Œì´ë„ˆ: USER_77107791_5877FEA6 - ADMIN ê¶Œí•œ ì¶”ê°€
âœ… ì»¨í…Œì´ë„ˆ: USER_77107791_D4600368 - ADMIN ê¶Œí•œ ì¶”ê°€
âœ… ì»¨í…Œì´ë„ˆ: USER_77107791_9408CC51 - ADMIN ê¶Œí•œ ì¶”ê°€
âœ… ì»¨í…Œì´ë„ˆ: USER_77107791_0627BBC2 - ADMIN ê¶Œí•œ ì¶”ê°€

ì´ 5ê°œ ì»¨í…Œì´ë„ˆì— ADMIN ê¶Œí•œ ì¶”ê°€ ì™„ë£Œ
```

### 13.3 MSì„œë¹„ìŠ¤íŒ€ ê¶Œí•œ ì²´ê³„ ìˆ˜ì •

#### 13.3.1 ë¬¸ì œ ìƒí™©

**ì •MS (MSS001) ì‚¬ìš©ì**:
- ì—­í• : MSì„œë¹„ìŠ¤íŒ€ íŒ€ì¥
- ê¸°ëŒ€ ê¶Œí•œ:
  - WJ_MS_SERVICE ì»¨í…Œì´ë„ˆ: OWNER ê¶Œí•œ
  - í•˜ìœ„ myMSì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë“¤: VIEWER ê¶Œí•œ

**ë°œê²¬ëœ ë¬¸ì œ**:
1. WJ_MS_SERVICEì— OWNER_DEPT ê¶Œí•œë§Œ ìˆìŒ â†’ OWNERë¡œ ë³€ê²½ í•„ìš”
2. í•˜ìœ„ USER_ ì»¨í…Œì´ë„ˆì— ê¶Œí•œ ì—†ìŒ â†’ VIEWER ê¶Œí•œ ì¶”ê°€ í•„ìš”

#### 13.3.2 ê¶Œí•œ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `check_ms_permissions.py`

```python
async def fix_ms_permissions():
    """
    MSì„œë¹„ìŠ¤íŒ€ ê¶Œí•œ ìˆ˜ì •
    
    ì²˜ë¦¬ ë‚´ìš©:
    1. WJ_MS_SERVICE: MSS001ì—ê²Œ OWNER ê¶Œí•œ ë¶€ì—¬
    2. í•˜ìœ„ myMSì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë“¤: MSS001ì—ê²Œ VIEWER ê¶Œí•œ ë¶€ì—¬
    """
    
    # 1. WJ_MS_SERVICE OWNER ê¶Œí•œ ì—…ë°ì´íŠ¸
    existing_perm = await get_permission('MSS001', 'WJ_MS_SERVICE')
    if existing_perm.role_id != 'OWNER':
        await update_permission(
            permission_id=existing_perm.permission_id,
            role_id='OWNER'
        )
    
    # 2. í•˜ìœ„ ì»¨í…Œì´ë„ˆ VIEWER ê¶Œí•œ ì¶”ê°€
    child_containers = await get_child_containers('WJ_MS_SERVICE', prefix='USER_')
    for container in child_containers:
        await create_permission(
            container_id=container.container_id,
            user_emp_no='MSS001',
            role_id='VIEWER',
            granted_by='SYSTEM'
        )
```

**ì‹¤í–‰ ê²°ê³¼**:
```
âœ… WJ_MS_SERVICE: OWNER_DEPT â†’ OWNER ê¶Œí•œìœ¼ë¡œ ì—…ë°ì´íŠ¸
âœ… USER_77107791_5877FEA6 (myMSì„œë¹„ìŠ¤): VIEWER ê¶Œí•œ ì¶”ê°€
âœ… USER_77107791_D4600368 (myMSì„œë¹„ìŠ¤): VIEWER ê¶Œí•œ ì¶”ê°€
âœ… USER_77107791_9408CC51 (myMSì„œë¹„ìŠ¤): VIEWER ê¶Œí•œ ì¶”ê°€
âœ… USER_77107791_0627BBC2 (myMSì„œë¹„ìŠ¤): VIEWER ê¶Œí•œ ì¶”ê°€

ê¶Œí•œ ìˆ˜ì • ì™„ë£Œ!
```

### 13.4 ë¬¸ì„œ ì²˜ë¦¬ ìƒíƒœ ê´€ë¦¬ ê°œì„ 

#### 13.4.1 chunk_count ì—…ë°ì´íŠ¸ ëˆ„ë½ ë¬¸ì œ

**ë¬¸ì œ**: 
- Celery íƒœìŠ¤í¬ê°€ ë¬¸ì„œ ì²˜ë¦¬ë¥¼ ì™„ë£Œí–ˆì§€ë§Œ `chunk_count`ê°€ 0ìœ¼ë¡œ ìœ ì§€
- `processing_status`ëŠ” 'completed'ì¸ë° ì‹¤ì œ ê²€ìƒ‰ ë¶ˆê°€ëŠ¥

**ì›ì¸**:
- `_process_document_multimodal` í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬ ì™„ë£Œ ì‹œ `chunk_count` ë¯¸ì—…ë°ì´íŠ¸
- `TbFileBssInfo.chunk_count` í•„ë“œê°€ DBì— ë°˜ì˜ë˜ì§€ ì•ŠìŒ

#### 13.4.2 ìˆ˜ì • ë‚´ìš©

**íŒŒì¼**: `backend/app/tasks/document_tasks.py`

```python
async def _process_document_multimodal(document_id, file_path, ...):
    """
    ë©€í‹°ëª¨ë‹¬ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ í›„ chunk_count ì—…ë°ì´íŠ¸
    """
    
    pipeline_result = await PipelineRouter.process_document(...)
    
    if pipeline_result.get('success'):
        stats = pipeline_result.get('statistics', {})
        chunks_count = stats.get('total_chunks', 0)
        
        # ğŸ†• TbFileBssInfoì˜ chunk_count ì—…ë°ì´íŠ¸
        from sqlalchemy import update
        try:
            update_stmt = (
                update(TbFileBssInfo)
                .where(TbFileBssInfo.file_bss_info_sno == document_id)
                .values(chunk_count=chunks_count)
            )
            await session.execute(update_stmt)
            await session.commit()
            logger.info(f"âœ… [CHUNK-COUNT] chunk_count ì—…ë°ì´íŠ¸ ì™„ë£Œ: doc_id={document_id}, count={chunks_count}")
        except Exception as e:
            logger.error(f"âŒ [CHUNK-COUNT] chunk_count ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: {e}")
            await session.rollback()
        
        return {
            'success': True,
            'chunks_count': chunks_count,
            'embeddings_count': stats.get('total_embeddings', 0),
            ...
        }
```

#### 13.4.3 ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼**: `fix_chunk_counts.py`

```python
async def fix_chunk_counts():
    """
    chunk_count=0ì´ì§€ë§Œ ì‹¤ì œ ì²­í¬ê°€ ìˆëŠ” íŒŒì¼ ìˆ˜ì •
    """
    
    # chunk_countê°€ 0ì¸ completed íŒŒì¼ ì¡°íšŒ
    files = await get_completed_files_with_zero_chunks()
    
    for file in files:
        # ì‹¤ì œ ì²­í¬ ê°œìˆ˜ í™•ì¸
        actual_count = await count_chunks(file.file_bss_info_sno)
        
        if actual_count > 0:
            # chunk_count ì—…ë°ì´íŠ¸
            await update_chunk_count(file.file_bss_info_sno, actual_count)
            print(f"âœ… {file.file_lgc_nm}: chunk_count ì—…ë°ì´íŠ¸ 0 â†’ {actual_count}")
```

**ì‹¤í–‰ ê²°ê³¼**:
```
ğŸ“„ íŒŒì¼: í† í”½ ëª¨ë¸ë§ì„ í™œìš©í•œ êµ­ë‚´ ìë™ì°¨ íŠ¹í—ˆê¸°ë°˜ ê¸°ìˆ ê°œë°œ ë™í–¥ ë¶„ì„.pdf
   ID: 4
   DB chunk_count: 0
   ì‹¤ì œ chunk ê°œìˆ˜: 64
   âœ… chunk_count ì—…ë°ì´íŠ¸: 0 â†’ 64

ğŸ“„ íŒŒì¼: í† í”½ ëª¨ë¸ë§ì„ í™œìš©í•œ êµ­ë‚´ ìë™ì°¨ íŠ¹í—ˆê¸°ë°˜ ê¸°ìˆ ê°œë°œ ë™í–¥ ë¶„ì„.pdf
   ID: 3
   DB chunk_count: 0
   ì‹¤ì œ chunk ê°œìˆ˜: 64
   âœ… chunk_count ì—…ë°ì´íŠ¸: 0 â†’ 64

ğŸ“„ íŒŒì¼: Ambidextrous Leadership and Innovative Work Behavior...
   ID: 2
   DB chunk_count: 0
   ì‹¤ì œ chunk ê°œìˆ˜: 77
   âœ… chunk_count ì—…ë°ì´íŠ¸: 0 â†’ 77

====================================================================================================
âœ… ì‘ì—… ì™„ë£Œ
   ì—…ë°ì´íŠ¸ëœ íŒŒì¼: 3ê°œ
   ì²­í¬ê°€ ì—†ëŠ” íŒŒì¼: 0ê°œ
====================================================================================================
```

### 13.5 Azure Blob íŒŒì¼ ë·°ì–´ í•œê¸€ íŒŒì¼ëª… ì²˜ë¦¬

#### 13.5.1 ë¬¸ì œ

**ì¦ìƒ**: í•œê¸€ íŒŒì¼ëª…ì´ í¬í•¨ëœ PDF íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ ë•Œ Azure Blob ì—ëŸ¬ ë°œìƒ

**ì—ëŸ¬ ë©”ì‹œì§€**:
```
InvalidQueryParameterValue: Value for one of the query parameters specified in the request URI is invalid.
query parameter values contain invalid characters
```

#### 13.5.2 ì›ì¸ ë¶„ì„

1. **SAS URL ìƒì„± ì‹œ blob_nameì´ í•œê¸€ ê·¸ëŒ€ë¡œ ì „ë‹¬**
   - `generate_blob_sas(blob_name="raw/.../í† í”½ ëª¨ë¸ë§...pdf")`
   - Azure SDKê°€ blob_nameì„ ì¸ì½”ë”©í•˜ì§€ ì•Šê³  ì„œëª… ìƒì„±
   - ì„œëª…ê³¼ URLì˜ ê²½ë¡œê°€ ë¶ˆì¼ì¹˜

2. **content_disposition í—¤ë”ì— í•œê¸€ í¬í•¨**
   - `content_disposition = f'inline; filename="í† í”½ ëª¨ë¸ë§...pdf"'`
   - Azure Blob SASëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ASCIIë§Œ í—ˆìš©

#### 13.5.3 ìˆ˜ì • ë‚´ìš©

**íŒŒì¼ 1**: `backend/app/services/core/azure_blob_service.py`

```python
def generate_sas_url(
    self,
    blob_path: str,
    purpose: str = 'raw',
    expiry_seconds: Optional[int] = None,
    content_disposition: Optional[str] = None,
    content_type: Optional[str] = None,
) -> str:
    """
    Azure Blob SAS URL ìƒì„±
    
    ìˆ˜ì • ì‚¬í•­:
    1. SAS ì„œëª… ìƒì„±: ì›ë³¸ blob_name ì‚¬ìš© (í•œê¸€ ê·¸ëŒ€ë¡œ)
    2. URL ìƒì„±: ì¸ì½”ë”©ëœ ê²½ë¡œ ì‚¬ìš©
    """
    
    # SAS ì„œëª… ìƒì„±: ì›ë³¸ blob_name ì‚¬ìš© (í•œê¸€ ê·¸ëŒ€ë¡œ)
    sas = generate_blob_sas(
        account_name=self.account_name,
        account_key=self.account_key,
        container_name=container,
        blob_name=blob_path,  # ì›ë³¸ ê²½ë¡œ (í•œê¸€ í¬í•¨)
        permission=BlobSasPermissions(read=True),
        expiry=expiry,
        content_disposition=content_disposition,
        content_type=content_type
    )
    
    # URL ìƒì„±: ì¸ì½”ë”©ëœ ê²½ë¡œ ì‚¬ìš©
    safe_blob_path = quote(blob_path, safe="/")
    base_url = f"https://{self.account_name}.blob.core.windows.net/{container}/{safe_blob_path}"
    return f"{base_url}?{sas}"
```

**íŒŒì¼ 2**: `backend/app/api/v1/files.py`

```python
# iframe íŒŒì¼ ë·°ì–´ ì—”ë“œí¬ì¸íŠ¸
if storage_backend == 'azure_blob':
    filename = file_info.get("file_logical_name", f"file_{file_id}")
    mime_type, _ = mimetypes.guess_type(filename)
    
    # Azure Blob SASëŠ” content_dispositionì— ASCIIë§Œ í—ˆìš©
    # filenameì—ëŠ” ì•ˆì „í•œ ASCII ëŒ€ì²´ê°’, filename*ì—ë§Œ UTF-8 ì¸ì½”ë”©ëœ ì‹¤ì œ íŒŒì¼ëª… ì‚¬ìš©
    encoded_filename = urllib.parse.quote(filename)
    safe_ascii_filename = f"document_{file_id}.{file_info.get('file_extension', 'pdf')}"
    content_disposition = f"inline; filename=\"{safe_ascii_filename}\"; filename*=UTF-8''{encoded_filename}"
    
    sas_url = azure_blob.generate_sas_url(
        blob_path=file_path,
        purpose='raw',
        expiry_seconds=3600,
        content_disposition=content_disposition,
        content_type=mime_type
    )
    return RedirectResponse(sas_url, status_code=307)
```

**ìˆ˜ì • ê²°ê³¼**:
- âœ… í•œê¸€ íŒŒì¼ëª… PDF ì •ìƒ í‘œì‹œ
- âœ… ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ ë·°ì–´ ì •ìƒ ì‘ë™
- âœ… Azure Blob ì—ëŸ¬ í•´ê²°

### 13.6 API í”„ë¡ì‹œ ì„¤ì • ìˆ˜ì •

#### 13.6.1 ë¬¸ì œ

**ì¦ìƒ**: AI ì§€ì‹ìƒì„± ì±„íŒ… ë©”ë‰´ì—ì„œ ë©”ì‹œì§€ ì „ì†¡ ì‹œ ì—°ê²° ì˜¤ë¥˜

**ì—ëŸ¬**:
```
POST http://127.0.0.1:8000/api/v1/chat/stream net::ERR_CONNECTION_REFUSED
```

#### 13.6.2 ì›ì¸

**íŒŒì¼**: `frontend/.env`

```properties
# ë¬¸ì œ: ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ì§ì ‘ ë°±ì—”ë“œ í¬íŠ¸ë¡œ ìš”ì²­
REACT_APP_API_URL=http://127.0.0.1:8000
```

í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ ë°±ì—”ë“œ í¬íŠ¸(8000)ë¡œ ìš”ì²­í•˜ì—¬ ì—°ê²° ì‹¤íŒ¨

#### 13.6.3 ìˆ˜ì • ë‚´ìš©

```properties
# frontend/.env

# ë°±ì—”ë“œ API ì„œë²„ (ë¡œì»¬ ê°œë°œìš©)
# ë¡œì»¬ ê°œë°œ ì‹œ í”„ë¡ì‹œ ì‚¬ìš©ì„ ìœ„í•´ ì£¼ì„ ì²˜ë¦¬
# setupProxy.jsê°€ /api ê²½ë¡œë¥¼ ë°±ì—”ë“œë¡œ í”„ë¡ì‹œí•©ë‹ˆë‹¤
# REACT_APP_API_URL=http://localhost:8000
# REACT_APP_API_URL=http://127.0.0.1:8000

# í™˜ê²½ ì‹ë³„ì
REACT_APP_ENV=development
```

**ë™ì‘ ë°©ì‹**:
1. `REACT_APP_API_URL`ì´ ì„¤ì •ë˜ì§€ ì•ŠìŒ
2. `getApiUrl()` â†’ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
3. `/api/v1/chat/stream` ìš”ì²­
4. `setupProxy.js`ê°€ `/api` ê²½ë¡œë¥¼ `http://localhost:8000`ìœ¼ë¡œ í”„ë¡ì‹œ
5. ì •ìƒ ì‘ë™

### 13.7 êµ¬í˜„ ìš”ì•½

#### 13.7.1 ê¶Œí•œ ê´€ë¦¬ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± | âœ… ì™„ë£Œ | USER_{emp_no}_{UUID} íŒ¨í„´ |
| ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ì‚­ì œ | âœ… ì™„ë£Œ | ë¹ˆ ì»¨í…Œì´ë„ˆë§Œ ì‚­ì œ ê°€ëŠ¥ |
| OWNER ê¶Œí•œ ìë™ ë¶€ì—¬ | âœ… ì™„ë£Œ | ìƒì„±ìì—ê²Œ OWNER ê¶Œí•œ |
| ADMIN ê¶Œí•œ ìë™ ë¶€ì—¬ | âœ… ì™„ë£Œ | ADMIN001ì—ê²Œ ADMIN ê¶Œí•œ |
| OWNER ì—…ë¡œë“œ ê¶Œí•œ | âœ… ì™„ë£Œ | upload_allowed_levelsì— ì¶”ê°€ |
| ì§€ì‹ê´€ë¦¬ì ê¶Œí•œ ì²´ê³„ | âœ… ì™„ë£Œ | MSì„œë¹„ìŠ¤íŒ€ ê¶Œí•œ ìˆ˜ì • |
| í•˜ìœ„ ì»¨í…Œì´ë„ˆ VIEWER ê¶Œí•œ | âœ… ì™„ë£Œ | ìƒìœ„ ê´€ë¦¬ìì˜ í•˜ìœ„ ì»¨í…Œì´ë„ˆ ì¡°íšŒ |

#### 13.7.2 ë¬¸ì„œ ì²˜ë¦¬ ê°œì„ 

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| chunk_count ìë™ ì—…ë°ì´íŠ¸ | âœ… ì™„ë£Œ | íŒŒì´í”„ë¼ì¸ ì™„ë£Œ ì‹œ ìë™ ë°˜ì˜ |
| ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • | âœ… ì™„ë£Œ | 3ê°œ íŒŒì¼ chunk_count ìˆ˜ì • |
| ì²˜ë¦¬ ìƒíƒœ ì •í™•ì„± | âœ… ì™„ë£Œ | completed + chunk_count > 0 |

#### 13.7.3 íŒŒì¼ ë·°ì–´ ê°œì„ 

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| í•œê¸€ íŒŒì¼ëª… ì§€ì› | âœ… ì™„ë£Œ | Azure Blob SAS URL ì¸ì½”ë”© |
| content_disposition ASCII | âœ… ì™„ë£Œ | ASCII ì•ˆì „ íŒŒì¼ëª… ì‚¬ìš© |
| ë¸Œë¼ìš°ì € í˜¸í™˜ì„± | âœ… ì™„ë£Œ | filename* UTF-8 ì¸ì½”ë”© |

#### 13.7.4 ê°œë°œ í™˜ê²½ ì„¤ì •

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| API í”„ë¡ì‹œ ì„¤ì • | âœ… ì™„ë£Œ | setupProxy.js ì‚¬ìš© |
| í™˜ê²½ë³€ìˆ˜ ì •ë¦¬ | âœ… ì™„ë£Œ | REACT_APP_API_URL ì£¼ì„ |
| ë¡œì»¬ ê°œë°œ í™˜ê²½ | âœ… ì™„ë£Œ | í”„ë¡ì‹œ í†µí•œ ë°±ì—”ë“œ ì—°ê²° |

### 13.8 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

#### 13.8.1 ì‚¬ìš©ì ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œë‚˜ë¦¬ì˜¤

```
1. ì‚¬ìš©ì "í™ê¸¸ë™"ì´ "MSì„œë¹„ìŠ¤íŒ€" ì„ íƒ í›„ "ì»¨í…Œì´ë„ˆ ì¶”ê°€" í´ë¦­
2. ëª¨ë‹¬ì—ì„œ "myMSì„œë¹„ìŠ¤" ì…ë ¥
3. ì„œë²„ì—ì„œ ì»¨í…Œì´ë„ˆ ìƒì„±:
   - container_id: USER_77107791_9408CC51
   - parent_container_id: WJ_MS_SERVICE
   - container_type: PERSONAL
   - owner_emp_no: 77107791

4. ìë™ ê¶Œí•œ ë¶€ì—¬:
   - í™ê¸¸ë™(77107791): OWNER ê¶Œí•œ
   - ì‹œìŠ¤í…œê´€ë¦¬ì(ADMIN001): ADMIN ê¶Œí•œ

5. UI ì—…ë°ì´íŠ¸:
   - íŠ¸ë¦¬ë·° ìë™ í™•ì¥
   - ìƒì„±ëœ ì»¨í…Œì´ë„ˆë¡œ í¬ì»¤ìŠ¤ ì´ë™

âœ… ê²°ê³¼: ì‚¬ìš©ìê°€ ìì‹ ì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
```

#### 13.8.2 ë¬¸ì„œ ì—…ë¡œë“œ ê¶Œí•œ í™•ì¸

```
1. ì‚¬ìš©ì "í™ê¸¸ë™"ì´ ìì‹ ì˜ ì»¨í…Œì´ë„ˆì— ë¬¸ì„œ ì—…ë¡œë“œ
2. check_upload_permission í˜¸ì¶œ:
   - user_emp_no: 77107791
   - container_id: USER_77107791_9408CC51

3. ê¶Œí•œ í™•ì¸:
   - permission_level = 'OWNER'
   - upload_allowed_levels = ['OWNER', 'ADMIN', 'MANAGER', ...]
   - can_upload = True âœ…

4. ë¬¸ì„œ ì²˜ë¦¬:
   - Celery íƒœìŠ¤í¬ ì‹¤í–‰
   - ë©€í‹°ëª¨ë‹¬ íŒŒì´í”„ë¼ì¸ ì²˜ë¦¬
   - chunk_count ìë™ ì—…ë°ì´íŠ¸

âœ… ê²°ê³¼: OWNER ê¶Œí•œìœ¼ë¡œ ì—…ë¡œë“œ ë° ì²˜ë¦¬ ì„±ê³µ
```

#### 13.8.3 ì§€ì‹ê´€ë¦¬ì ê¶Œí•œ í™•ì¸

```
1. ì •MS(MSS001)ê°€ MSì„œë¹„ìŠ¤íŒ€ í•˜ìœ„ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
2. ê¶Œí•œ í™•ì¸:
   - WJ_MS_SERVICE: OWNER
   - USER_77107791_5877FEA6: VIEWER
   - USER_77107791_D4600368: VIEWER
   - USER_77107791_9408CC51: VIEWER
   - USER_77107791_0627BBC2: VIEWER

3. UI í‘œì‹œ:
   - MSì„œë¹„ìŠ¤íŒ€ ë° ëª¨ë“  í•˜ìœ„ ì»¨í…Œì´ë„ˆ í‘œì‹œ
   - ê° ì»¨í…Œì´ë„ˆì˜ ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ ê°€ëŠ¥

âœ… ê²°ê³¼: ì§€ì‹ê´€ë¦¬ìê°€ ê´€ë¦¬ ë²”ìœ„ ë‚´ ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¡°íšŒ ê°€ëŠ¥
```

---

**ë¬¸ì„œ ë²„ì „**: v3.3  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-04  
**ì‘ì„±ì**: WKMS ê°œë°œíŒ€  
**ê²€í† ì**: ì‹œìŠ¤í…œ ì•„í‚¤í…íŠ¸

## 14. ì§€ì‹ì»¨í…Œì´ë„ˆ ì ‘ê·¼ê¶Œí•œ ìš”ì²­ ë° ìŠ¹ì¸ ì‹œìŠ¤í…œ

### 14.1 ê°œìš”

ì‚¬ìš©ìê°€ ì ‘ê·¼ ê¶Œí•œì´ ì—†ëŠ” ì§€ì‹ ì»¨í…Œì´ë„ˆì— ëŒ€í•´ ê¶Œí•œì„ ìš”ì²­í•˜ê³ , í•´ë‹¹ ì»¨í…Œì´ë„ˆì˜ ê´€ë¦¬ìê°€ ìŠ¹ì¸/ê±°ë¶€í•  ìˆ˜ ìˆëŠ” ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### 14.2 ê¶Œí•œ ìš”ì²­ í”„ë¡œì„¸ìŠ¤

#### 14.2.1 ê¶Œí•œ ìš”ì²­ íë¦„ (ë‹¨ê³„ ìš”ì•½)

1. ì‚¬ìš©ìê°€ ì»¨í…Œì´ë„ˆì— ì ‘ê·¼ ì‹œë„
2. ê¶Œí•œ ì—†ìŒ í™•ì¸ í›„ "ê¶Œí•œ ìš”ì²­" ë²„íŠ¼ ë…¸ì¶œ
3. ìš”ì²­ ëª¨ë‹¬ì—ì„œ ì •ë³´ ì…ë ¥ (ìš”ì²­ ë ˆë²¨, ì‚¬ìœ (í•„ìˆ˜ 10ì ì´ìƒ), ì—…ë¬´ í•„ìš”ì„±, ì‚¬ìš© ê¸°ê°„, ê¸´ê¸‰ë„)
4. ìš”ì²­ ìƒì„± í›„ DB(`tb_permission_requests`) ì €ì¥
5. ìŠ¹ì¸ ëŒ€ìƒ ê´€ë¦¬ì(ADMIN/MANAGER/OWNER) ìë™ ì‹ë³„ ë° ì•Œë¦¼ ì¤€ë¹„
6. ê´€ë¦¬ìê°€ ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ì—ì„œ ìš”ì²­ ê²€í† 
7. ìŠ¹ì¸ ë˜ëŠ” ê±°ë¶€ ê²°ì • (ì½”ë©˜íŠ¸/ì‚¬ìœ  ê¸°ë¡)
8. ìš”ì²­ìì—ê²Œ ê²°ê³¼ í†µë³´
9. ì™„ë£Œ í›„ ì ‘ê·¼ ê¶Œí•œ ê°±ì‹  ë°˜ì˜

#### 14.2.2 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

**ê¶Œí•œ ìš”ì²­ í…Œì´ë¸” (tb_permission_requests)**

| í•„ë“œ | íƒ€ì… | ì„¤ëª… | ë¹„ê³  |
|------|------|------|------|
| request_id | SERIAL (PK) | ìš”ì²­ ì‹ë³„ì | ìë™ ì¦ê°€ |
| requester_emp_no | VARCHAR(20) | ìš”ì²­ì ì‚¬ë²ˆ | HR ì •ë³´ ì°¸ì¡° |
| container_id | VARCHAR(50) | ëŒ€ìƒ ì»¨í…Œì´ë„ˆ | ì»¨í…Œì´ë„ˆ í…Œì´ë¸” ì°¸ì¡° |
| requested_permission | VARCHAR(20) | ìš”ì²­ ê¶Œí•œ ë ˆë²¨ | VIEWER/EDITOR ë“± |
| current_permission | VARCHAR(20) | ê¸°ì¡´ ê¶Œí•œ(ìˆì„ ê²½ìš°) | NULL ê°€ëŠ¥ |
| justification | TEXT | ìš”ì²­ ì‚¬ìœ  (í•„ìˆ˜ 10ì ì´ìƒ) | í•„ìˆ˜ ì…ë ¥ |
| business_need | TEXT | ì—…ë¬´ í•„ìš”ì„± ìƒì„¸ | ì„ íƒ |
| requested_duration | VARCHAR(50) | ì‚¬ìš© ì˜ˆì • ê¸°ê°„ | ì˜ˆ: 1ê°œì›” |
| temp_end_date | TIMESTAMP TZ | ì„ì‹œ ê¶Œí•œ ì¢…ë£Œ ì˜ˆì •ì¼ | ê¸°ê°„ì„± ìš”ì²­ ì‹œ |
| request_status | VARCHAR(20) | ìš”ì²­ ìƒíƒœ | ê¸°ë³¸ê°’ pending |
| priority_level | VARCHAR(10) | ê¸´ê¸‰ë„ | normal / high ë“± |
| approver_emp_no | VARCHAR(20) | ì‹¤ì œ ìŠ¹ì¸ì ì‚¬ë²ˆ | NULL: ë¯¸ìŠ¹ì¸ |
| approval_date | TIMESTAMP TZ | ìŠ¹ì¸ ì²˜ë¦¬ ì¼ì‹œ | ìŠ¹ì¸ ì‹œ ê¸°ë¡ |
| approval_comment | TEXT | ìŠ¹ì¸ ì½”ë©˜íŠ¸ | ì„ íƒ |
| rejection_reason | TEXT | ê±°ë¶€ ì‚¬ìœ  | ê±°ë¶€ ì‹œ í•„ìˆ˜ |
| auto_approved | BOOLEAN | ìë™ ìŠ¹ì¸ ì—¬ë¶€ | ì •ì±… ì¶©ì¡± ì‹œ true |
| notification_sent | BOOLEAN | ì•Œë¦¼ ë°œì†¡ ì—¬ë¶€ | ì¤‘ë³µ ë°œì†¡ ë°©ì§€ |
| created_date | TIMESTAMP TZ | ìƒì„± ì¼ì‹œ | NOW() ê¸°ë³¸ |
| last_modified_date | TIMESTAMP TZ | ìˆ˜ì • ì¼ì‹œ | ìƒíƒœ ë³€ê²½ë§ˆë‹¤ |

ì„¤ê³„ í¬ì¸íŠ¸: ìš”ì²­/ìŠ¹ì¸/ê±°ë¶€ ì „ ê³¼ì •ì„ ë‹¨ì¼ í–‰ì—ì„œ ì¶”ì , ìë™ ìŠ¹ì¸ ë¶„ê¸°ì™€ ì•Œë¦¼ ë°œì†¡ ì—¬ë¶€ë¥¼ ë¶„ë¦¬í•´ ì¬ì²˜ë¦¬ ë°©ì§€.

### 14.3 ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

#### 14.3.1 ê¶Œí•œ ìš”ì²­ ìƒì„±

**Endpoint**: `POST /api/v1/permission-requests`

ìš”ì²­ ë³¸ë¬¸ í•„ë“œ ì •ì˜:

| í•„ë“œ | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|------|
| container_id | âœ… | ëŒ€ìƒ ì»¨í…Œì´ë„ˆ ID | WJ_INFRA_CONSULT |
| requested_permission_level | âœ… | ìš”ì²­ ê¶Œí•œ ë ˆë²¨ | VIEWER |
| request_reason | âœ… | ì ‘ê·¼ ì‚¬ìœ  (10ì ì´ìƒ) | í”„ë¡œì íŠ¸ ì°¸ê³  ìë£Œ ì—´ëŒ í•„ìš” |
| business_justification | ì„ íƒ | ì—…ë¬´ì  í™œìš© ëª©ì  | ê³ ê°ì‚¬ ì œì•ˆì„œ ì‘ì„± |
| expected_usage_period | ì„ íƒ | ì˜ˆìƒ ì‚¬ìš© ê¸°ê°„ | 1ê°œì›” |
| urgency_level | ì„ íƒ | ê¸´ê¸‰ë„(normal/high) | normal |

ì‘ë‹µ ê°œìš”:

| í‚¤ | ì„¤ëª… | ì˜ˆì‹œ |
|----|------|------|
| success | ì²˜ë¦¬ ì„±ê³µ ì—¬ë¶€ | true |
| message | ì•ˆë‚´ ë¬¸êµ¬ | ì»¨í…Œì´ë„ˆ ê´€ë¦¬ìì˜ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤ (ìš”ì²­ ID: 3) |
| request_id | ìƒì„±ëœ ìš”ì²­ ì‹ë³„ì | 3 |
| auto_approved | ìë™ ìŠ¹ì¸ ì—¬ë¶€ | false |

**Response**:
```json
{
  "success": true,
  "message": "ì»¨í…Œì´ë„ˆ ê´€ë¦¬ìì˜ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤ (ìš”ì²­ ID: 3)",
  "request_id": "3",
  "auto_approved": false
}
```

#### 14.3.2 ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ ì¡°íšŒ

**Endpoint**: `GET /api/v1/permission-requests/pending`

ì‘ë‹µ í•„ë“œ:

| í•„ë“œ | ì„¤ëª… | ë¹„ê³  |
|------|------|------|
| requests[] | ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ ë°°ì—´ | í•„í„°ë§ëœ ìš”ì²­ë“¤ |
| request_id | ê°œë³„ ìš”ì²­ ID | ë¬¸ìì—´ ë˜ëŠ” ìˆ«ì í‘œí˜„ |
| requester_name | ìš”ì²­ì ì´ë¦„ | HR ì°¸ì¡° |
| requester_department | ìš”ì²­ì ì†Œì† | ì¡°ì§ëª… |
| container_name | ëŒ€ìƒ ì»¨í…Œì´ë„ˆ ì´ë¦„ | ì‚¬ìš©ì ì¹œí™” ëª…ì¹­ |
| requested_permission_level | ì‹ ì²­ ê¶Œí•œ | VIEWER ë“± |
| request_reason | ì‚¬ìœ  | ì…ë ¥ ì›ë¬¸ |
| status | í˜„ì¬ ìƒíƒœ | pending/approved/rejected |
| requested_at | ìƒì„± ì‹œê° | ISO8601 |
| total_count | ì´ ê°œìˆ˜ | í˜ì´ì§€ë„¤ì´ì…˜ ëŒ€ë¹„ |

#### 14.3.3 ìŠ¹ì¸ ì²˜ë¦¬

**Endpoint**: `POST /api/v1/permission-requests/{request_id}/approve`

ìš”ì²­ ë³¸ë¬¸: ìŠ¹ì¸ ì½”ë©˜íŠ¸(ì„ íƒ) ì „ë‹¬ â†’ ê¶Œí•œ ìƒì„± + ìƒíƒœ approvedë¡œ ê°±ì‹ .

| í•„ë“œ | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|
| approval_comment | ì„ íƒ | ìŠ¹ì¸ ì‚¬ìœ  ë˜ëŠ” ë©”ëª¨ |

#### 14.3.4 ê±°ë¶€ ì²˜ë¦¬

**Endpoint**: `POST /api/v1/permission-requests/{request_id}/reject`

ê±°ë¶€ ì²˜ë¦¬ ì‹œ í•„ìˆ˜ ì…ë ¥:

| í•„ë“œ | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|
| rejection_reason | âœ… | ê±°ë¶€ ì‚¬ìœ  (ì‚¬ìš©ì ì•ˆë‚´ìš©) |

### 14.4 ì£¼ìš” ì´ìŠˆ ë° í•´ê²°

#### 14.4.1 íƒ€ì… ë³€í™˜ ì˜¤ë¥˜ ìˆ˜ì •

**ë¬¸ì œ**: PostgreSQLì—ì„œ ì •ìˆ˜í˜• ë¹„êµ ì‹œ ë¬¸ìì—´ íŒŒë¼ë¯¸í„° ì „ë‹¬ë¡œ ì—°ì‚°ì ë¶ˆì¼ì¹˜ ë°œìƒ (`integer = character varying`).

**ì›ì¸**: FastAPI ê²½ë¡œ íŒŒë¼ë¯¸í„°ëŠ” ê¸°ë³¸ ë¬¸ìì—´, ë‚´ë¶€ ì„œë¹„ìŠ¤ ë¡œì§ì€ ì •ìˆ˜ ê¸°ëŒ€.

**í•´ê²° ì ˆì°¨**:
1. ëª¨ë“  ìŠ¹ì¸/ê±°ë¶€/ì¡°íšŒ ì—”ë“œí¬ì¸íŠ¸ì—ì„œ `request_id` ëª…ì‹œì  int ë³€í™˜
2. ì„œë¹„ìŠ¤ ê³„ì¸µ ì…ë ¥ ê²€ì¦ ì¶”ê°€ (ìˆ«ì í˜•ì‹ ë¯¸ì¼ì¹˜ ì‹œ 400 ë°˜í™˜)
3. ë³€í™˜ í›„ SQL ì¡°ê±´ì—ì„œ íƒ€ì… ì¼ê´€ì„± í™•ë³´ â†’ ì˜¤ë¥˜ ì œê±°

#### 14.4.2 ê´€ê³„ ë°ì´í„° ë¡œë”© ìµœì í™”

**ë¬¸ì œ**: ìš”ì²­ ëª©ë¡ì—ì„œ ìš”ì²­ì/ì»¨í…Œì´ë„ˆ/ìŠ¹ì¸ì ì •ë³´ê°€ `None` í‘œì‹œ â†’ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì°¸ì¡° ë¯¸ë¡œë”©.

**í•´ê²° ì „ëµ**:
1. ëª©ë¡ ì¡°íšŒ ì¿¼ë¦¬ì— ê´€ê³„ ë¡œë”© ì˜µì…˜ ì¶”ê°€ (`selectinload`)ë¡œ N+1 ìµœì†Œí™”
2. í•„ìš”í•œ ì°¸ì¡° (requester, knowledge_container, approver) ëª…ì‹œì  ì‚¬ì „ ë¡œë”©
3. ì§ë ¬í™” ë‹¨ê³„ì—ì„œ ê°’ ëˆ„ë½ ì—†ì´ DTO ìƒì„± ê°€ëŠ¥
4. ê²°ê³¼: í‘œì‹œ í•„ë“œ ì•ˆì •í™” ë° ì¿¼ë¦¬ ìˆ˜ ê°ì†Œ

#### 14.4.3 í”„ë¡ íŠ¸ì—”ë“œ í•„ë“œ ë§¤í•‘

**ë¬¸ì œ**: ë°±ì—”ë“œ í•„ë“œëª… ê°œí¸ í›„ í”„ë¡ íŠ¸ì—”ë“œ ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ê°€ êµ¬ í•„ë“œëª…(`user_name`, `reason`)ì— ì˜ì¡´ â†’ UI ê³µë°± ë°œìƒ.

**í•´ê²° ë°©ì‹ (ë§¤í•‘ ê³„ì¸µ ì ìš©)**:
| í•­ëª© | ì²˜ë¦¬ ë¡œì§ | ê¸°ë³¸ê°’ |
|------|-----------|--------|
| ì‚¬ìš©ìëª… | `requester_name` ìš°ì„ , ì—†ìœ¼ë©´ `user_name` | 'ì•Œ ìˆ˜ ì—†ìŒ' |
| ë¶€ì„œ | `requester_department` ìš°ì„ , ì—†ìœ¼ë©´ `user_department` | ë¹ˆ ë¬¸ìì—´ |
| ìš”ì²­ì‚¬ìœ  | `request_reason` ìš°ì„ , ì—†ìœ¼ë©´ `reason` | ë¹ˆ ë¬¸ìì—´ |

ê²°ê³¼: ë°±ì—”ë“œ/í”„ë¡ íŠ¸ í•„ë“œ ì „í™˜ ê¸°ê°„ ë™ì•ˆ í•˜ìœ„ í˜¸í™˜ ìœ ì§€.

### 14.5 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### 14.5.1 ê¶Œí•œ ìš”ì²­ ìƒì„± í…ŒìŠ¤íŠ¸

1. ì‚¬ìš©ì "í™ê¸¸ë™"ì´ ëŒ€ìƒ ì»¨í…Œì´ë„ˆ `WJ_INFRA_CONSULT` ì„ íƒ
2. "ê¶Œí•œ ìš”ì²­" ë²„íŠ¼ í´ë¦­ í›„ ëª¨ë‹¬ í‘œì‹œ
3. ì‚¬ìœ  10ì ì´ìƒ ì…ë ¥ ë° í•„ìš” ì‹œ ì¶”ê°€ í•­ëª© ì‘ì„±
4. ìš”ì²­ ìƒì„± ì„±ê³µ â†’ `request_id = 3`, ìƒíƒœ `pending`, ìŠ¹ì¸ì ìë™ ì‹ë³„ `INF001`

#### 14.5.2 ìŠ¹ì¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

1. ê´€ë¦¬ì `INF001` ë¡œê·¸ì¸
2. ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ì—ì„œ í•´ë‹¹ ìš”ì²­ ìƒì„¸ í™•ì¸ (ìš”ì²­ì/ë¶€ì„œ/ì‚¬ìœ  ëª¨ë‘ ë¡œë”©)
3. ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­ í›„ ì½”ë©˜íŠ¸(ì„ íƒ) ì…ë ¥
4. ì²˜ë¦¬ ì„±ê³µ: `tb_user_permissions` ë ˆì½”ë“œ ìƒì„±, ìƒíƒœ `approved`, ì¦‰ì‹œ ì ‘ê·¼ ê°€ëŠ¥

### 14.6 êµ¬í˜„ ìš”ì•½

| ê¸°ëŠ¥ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| ê¶Œí•œ ìš”ì²­ ìƒì„± | âœ… ì™„ë£Œ | ì‚¬ìš©ìê°€ ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ê¶Œí•œ ìš”ì²­ |
| ìš”ì²­ ì‚¬ìœ  ì…ë ¥ | âœ… ì™„ë£Œ | ìµœì†Œ 10ì ì´ìƒ í•„ìˆ˜ ì…ë ¥ |
| ìŠ¹ì¸ì ìë™ ì‹ë³„ | âœ… ì™„ë£Œ | ADMIN/MANAGER/OWNER ìë™ ì‹ë³„ |
| ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ | âœ… ì™„ë£Œ | ê´€ë¦¬ìë³„ ê´€ë¦¬ ë²”ìœ„ í•„í„°ë§ |
| ê´€ê³„ ë°ì´í„° ë¡œë”© | âœ… ì™„ë£Œ | ìš”ì²­ì/ì»¨í…Œì´ë„ˆ ì •ë³´ í‘œì‹œ |
| ìŠ¹ì¸ ì²˜ë¦¬ | âœ… ì™„ë£Œ | ê¶Œí•œ ë¶€ì—¬ ë° ìƒíƒœ ì—…ë°ì´íŠ¸ |
| ê±°ë¶€ ì²˜ë¦¬ | âœ… ì™„ë£Œ | ê±°ë¶€ ì‚¬ìœ ì™€ í•¨ê»˜ ìƒíƒœ ì—…ë°ì´íŠ¸ |
| íƒ€ì… ë³€í™˜ ìˆ˜ì • | âœ… ì™„ë£Œ | request_id stringâ†’int ë³€í™˜ |
| í•„ë“œ ë§¤í•‘ ìˆ˜ì • | âœ… ì™„ë£Œ | ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ í•„ë“œ í˜¸í™˜ |

### 14.7 í–¥í›„ ê°œë°œ ê³„íš

| ê¸°ëŠ¥ | ìš°ì„ ìˆœìœ„ | ì„¤ëª… |
|------|---------|------|
| ì•Œë¦¼ ì‹œìŠ¤í…œ | ë†’ìŒ | ìš”ì²­/ìŠ¹ì¸/ê±°ë¶€ ì‹œ ì´ë©”ì¼/í‘¸ì‹œ ì•Œë¦¼ |
| ìë™ ìŠ¹ì¸ ê·œì¹™ | ì¤‘ê°„ | íŠ¹ì • ì¡°ê±´ ì¶©ì¡± ì‹œ ìë™ ìŠ¹ì¸ |
| ìš”ì²­ ë§Œë£Œ ì²˜ë¦¬ | ì¤‘ê°„ | ì¼ì • ê¸°ê°„ ë¯¸ì²˜ë¦¬ ì‹œ ìë™ ë§Œë£Œ |
| ì¼ê´„ ìŠ¹ì¸/ê±°ë¶€ | ì¤‘ê°„ | ì—¬ëŸ¬ ìš”ì²­ ë™ì‹œ ì²˜ë¦¬ |
| ìš”ì²­ íˆìŠ¤í† ë¦¬ | ë‚®ìŒ | ìŠ¹ì¸/ê±°ë¶€ ì´ë ¥ ì¡°íšŒ |


## 15. ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ ì„¤ì • UI ê´€ë¦¬ì²´ê³„ (ì‚¬ìš©ì/ì§€ì‹ê´€ë¦¬ì ëª¨ë‹¬)

### 15.1 ê°œìš”

ë¬¸ì„œ ë‹¨ìœ„ ì„¸ë¶„ê¶Œí•œ ì„¤ì •ì„ ìœ„í•´ ë‘ ì¢…ë¥˜ì˜ ì ‘ê·¼ ê¶Œí•œ ì„¤ì • ëª¨ë‹¬ì„ ì œê³µí•©ë‹ˆë‹¤.

| êµ¬ë¶„ | íŒŒì¼ ê²½ë¡œ | ëŒ€ìƒ ì‚¬ìš©ì | ëª©ì  | íŠ¹ì§• |
|------|-----------|-------------|------|------|
| ì‚¬ìš©ì ëª¨ë‹¬ | `frontend/src/pages/user/my-knowledge/components/DocumentAccessModal.tsx` | ì¼ë°˜ ì‚¬ìš©ì(ë¬¸ì„œ ì†Œìœ /ì—…ë¡œë”) | ë‹¨ì¼ ê·œì¹™ ê¸°ë°˜ ì‹ ì† ì„¤ì • | ë‹¨ì¼ Restricted ê·œì¹™ë§Œ ì €ì¥, ì§ì ‘ ì…ë ¥ ë°©ì‹ |
| ì§€ì‹ê´€ë¦¬ì ëª¨ë‹¬ | `frontend/src/pages/manager/document-access-management/components/AccessControlModal.tsx` | ì§€ì‹ê´€ë¦¬ì / ì‹œìŠ¤í…œ ê´€ë¦¬ì | ë³µìˆ˜ ê·œì¹™ ê´€ë¦¬/ê°ì‚¬ | ë‹¤ì¤‘ Restricted ê·œì¹™, ê²€ìƒ‰/ê²€ì¦, ë³€ê²½ì‚¬í•­ ì¶”ì  |

ë‘ ëª¨ë‹¬ì€ ê³µí†µì ìœ¼ë¡œ `access_level`ì„ ì¤‘ì‹¬ìœ¼ë¡œ ìƒíƒœë¥¼ êµ¬ì„±í•˜ë©° ì €ì¥ ì‹œ "ê¸°ì¡´ ê·œì¹™ ì „ì²´ ì‚­ì œ í›„ ì‹ ê·œ ê·œì¹™ ì¼ê´„ ì¬ì‚½ì…" ë°©ì‹ìœ¼ë¡œ ì›ìì  ì¹˜í™˜ì„ ìˆ˜í–‰í•˜ì—¬ ê·œì¹™ ì •í•©ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.

### 15.2 ì ‘ê·¼ ë ˆë²¨ ì •ì˜

| UI í‘œì‹œ | ë‚´ë¶€ ê°’(access_level) | ì ìš© ë²”ìœ„ | DB ë ˆì½”ë“œ êµ¬ì„± | ê¶Œí•œ íš¨ê³¼ | ë¹„ê³  |
|---------|----------------------|-----------|----------------|-----------|------|
| ê³µê°œ | `public` | ì»¨í…Œì´ë„ˆ ì ‘ê·¼ ê°€ëŠ¥í•œ ëª¨ë“  ì‚¬ìš©ì | 1ê±´ (access_level=public) | ì¡°íšŒ(ê²€ìƒ‰ ê²°ê³¼ í¬í•¨) | ë¬¸ì„œ ê¸°ë³¸ ê³µê°œ ì •ì±… |
| ì œí•œ ê³µê°œ | `restricted` | ì§€ì •ëœ ì‚¬ìš©ì/ë¶€ì„œ ì§‘í•© | â‰¥1ê±´ (ê° ëŒ€ìƒë³„ ë ˆì½”ë“œ) | ë ˆì½”ë“œë³„ permission_level ë¶€ì—¬ | ì‚¬ìš©ì ëª¨ë‹¬ì€ ë‹¨ì¼, ê´€ë¦¬ì ëª¨ë‹¬ì€ ë‹¤ì¤‘ ê°€ëŠ¥ |
| ë¹„ê³µê°œ | `private` | ë¬¸ì„œ ì†Œìœ ì + ì»¨í…Œì´ë„ˆ ê´€ë¦¬ì/ì‹œìŠ¤í…œ ê´€ë¦¬ì | 1ê±´ (access_level=private) | ë‚˜ì—´ëœ ê´€ë¦¬ì ì™¸ ì ‘ê·¼ ì°¨ë‹¨ | ìƒìœ„ ê´€ë¦¬ì ê°ì‚¬ìš© ì¡°íšŒ í—ˆìš© |

`restricted` ìƒíƒœì—ì„œ ê°ê°ì˜ ë ˆì½”ë“œëŠ” ë‹¤ìŒ ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤:

| í•„ë“œ | ì˜ë¯¸ | ê°’ ì˜ˆì‹œ | ê´€ë¦¬ ì£¼ì²´ | ë¹„ê³  |
|------|------|---------|----------|------|
| `rule_id` | ê·œì¹™ PK | 128 | ì‹œìŠ¤í…œ | ì‚­ì œ/ì¹˜í™˜ ê¸°ì¤€ |
| `file_bss_info_sno` | ëŒ€ìƒ ë¬¸ì„œ ì‹ë³„ | 4521 | ì‹œìŠ¤í…œ | ë‚´ë¶€ ì‹ë³„ì |
| `access_level` | ì ‘ê·¼ ë ˆë²¨ | restricted | UI/ë°±ì—”ë“œ | ì œí•œ ë ˆì½”ë“œ ê³µí†µ ì§€ì • |
| `rule_type` | ëŒ€ìƒ ìœ í˜• | user / department | ì„¤ì •ì | ì‚¬ìš©ì ê°œë³„ / ë¶€ì„œ ì „ì²´ |
| `target_id` | ëŒ€ìƒ ì‹ë³„ì | MSS001 / MSì„œë¹„ìŠ¤íŒ€ | ì„¤ì •ì | ë¶€ì„œëª… ë˜ëŠ” ì‚¬ë²ˆ |
| `permission_level` | ì„¸ë¶€ ê¶Œí•œ | view / download / edit | ì„¤ì •ì | í™•ì¥ ê³„íš: comment ë“± |
| `is_inherited` | ìƒì† ì—¬ë¶€ | 'N' | ì‹œìŠ¤í…œ | í˜„ì¬ ë¬¸ì„œ ë‹¨ìœ„ ì§ì ‘ ì§€ì •ë§Œ ì§€ì› |
| `created_by` | ìƒì„±ì | EMP001 | ì‹œìŠ¤í…œ | ê°ì‚¬ ì¶”ì  |
| `created_date` | ìƒì„± ì‹œê° | 2025-11-04T.. | ì‹œìŠ¤í…œ | ISO8601 |

### 15.3 ì‚¬ìš©ì ëª¨ë‹¬ (DocumentAccessModal) ë™ì‘

| í•­ëª© | ì„¤ëª… |
|------|------|
| ì´ˆê¸° ë¡œë“œ | ì²« API í˜¸ì¶œ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ì²« ê·œì¹™ì„ í¼ ìƒíƒœì— ë§¤í•‘ (ëŒ€ë¬¸ìâ†’ì†Œë¬¸ì ì •ê·œí™”) |
| ìƒíƒœ ë³€ìˆ˜ | `accessLevel`, `ruleType`, `targetId`, `permissionLevel`, `currentRules`, `isInitialLoad` |
| ì €ì¥ ë¡œì§ | 1) ê¸°ì¡´ ê·œì¹™ ì „ì²´ ì‚­ì œ â†’ 2) ì„ íƒëœ accessLevel ê¸°ì¤€ ì‹ ê·œ ê·œì¹™ 1ê±´ ìƒì„± (`restricted` ì‹œ ëŒ€ìƒ í•„ìˆ˜) |
| ì œí•œ ê³µê°œ ì…ë ¥ | ëŒ€ìƒ ìœ í˜•(user/department) ë²„íŠ¼ í† ê¸€ + ë‹¨ì¼ `targetId` ìˆ˜ê¸° ì…ë ¥ |
| ê¶Œí•œ ë ˆë²¨ | view / download / edit ì„ íƒ (ë‹¨ì¼ ì„ íƒ) |
| ê²€ì¦ | `restricted`ì—ì„œ `targetId` ë¯¸ì…ë ¥ ì‹œ ì €ì¥ ì¤‘ë‹¨ ë° ì•Œë¦¼ |
| ì ‘ê·¼ ì•ˆë‚´ | ëª¨ë‹¬ í•˜ë‹¨ ì•ˆë‚´ ë¸”ë¡: ê³µê°œ/ì œí•œ/ë¹„ê³µê°œ ì„¤ëª… ì œê³µ |
| ì‚¬ìš©ì„± ìµœì í™” | ìµœì´ˆ ë¡œë“œ ì´í›„ ì‚¬ìš©ì ìˆ˜ë™ ë³€ê²½ ë‚´ìš©ì€ ì¬í˜¸ì¶œë¡œ ë®ì–´ì“°ì§€ ì•ŠìŒ (`isInitialLoad` í”Œë˜ê·¸) |

ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ (ì˜ˆ):
1. ë¬¸ì„œ ì—…ë¡œë”ê°€ "ë¬¸ì„œ ì ‘ê·¼ ê¶Œí•œ ì„¤ì •" ì—´ê¸°
2. ê¸°ë³¸ê°’ ê³µê°œ â†’ ì œí•œ ê³µê°œë¡œ ë³€ê²½
3. ëŒ€ìƒ ìœ í˜• 'user' ì„ íƒ í›„ ì‚¬ë²ˆ ì…ë ¥ (ì˜ˆ: MSS001)
4. ê¶Œí•œ ë ˆë²¨ 'download' ì„ íƒ
5. ì €ì¥ ì‹œ ê¸°ì¡´ ê·œì¹™ ì œê±° í›„ ì œí•œ ê·œì¹™ 1ê±´ ì¬ìƒì„±
6. ì„±ê³µ ì•Œë¦¼ í›„ ëª¨ë‹¬ ë‹«í˜

### 15.4 ì§€ì‹ê´€ë¦¬ì ëª¨ë‹¬ (AccessControlModal) ë™ì‘

| í•­ëª© | ì„¤ëª… |
|------|------|
| ì´ˆê¸° ë¡œë“œ | ë¬¸ì„œë³„ ì ‘ê·¼ ê·œì¹™ ì „ì²´ ì¡°íšŒ í›„ ì²« ê·œì¹™ì˜ `access_level`ì„ í˜„ì¬/ì›ë³¸ ìƒíƒœë¡œ ì„¤ì • |
| ìƒíƒœ ë³€ìˆ˜ | `accessLevel`, `originalAccessLevel`, `rules`, `hasChanges`, `showAddRule`, `ruleType`, `searchQuery`, `searchResults`, `selectedTarget`, `departmentInput`, `permissionLevel` |
| ë³€ê²½ ì¶”ì  | ë¡œì»¬ ìƒíƒœ ë³€ê²½ ì‹œ `hasChanges=true` í‘œì‹œ (í‘¸í„° ê²½ê³  ë°°ì§€) |
| ì €ì¥ ë¡œì§ | â‘  ëª¨ë“  ê¸°ì¡´ ê·œì¹™ ì‚­ì œ â‘¡ `public`/`private`ë©´ ë‹¨ì¼ ê·œì¹™ ì¬ìƒì„± â‘¢ `restricted`ë©´ 1ê°œ ì´ìƒ ì œí•œ ë ˆì½”ë“œ ì¡´ì¬ í•„ìˆ˜ (ì—†ìœ¼ë©´ ì—ëŸ¬) |
| ë‹¤ì¤‘ ê·œì¹™ | ì‚¬ìš©ì + ë¶€ì„œ í˜¼í•© ê°€ëŠ¥, ê¶Œí•œ ë ˆë²¨ ê°ê° ë…ë¦½ (view/download/edit) |
| ì‚¬ìš©ì ê²€ìƒ‰ | 2ì ì´ìƒ ì…ë ¥ ì‹œ API ê²€ìƒ‰ â†’ ì‚¬ë²ˆ/ì´ë¦„ ë§¤í•‘ í›„ ì„ íƒ ì‹œ `selectedTarget` ì„¤ì • |
| ë¶€ì„œ ì…ë ¥ | ìˆ˜ê¸° í…ìŠ¤íŠ¸ë¡œ ë¶€ì„œëª… ì…ë ¥ (í–¥í›„ ìë™ì™„ì„± í™•ì¥ ì˜ˆì •) |
| ê·œì¹™ ì¶”ê°€ | `createDocumentAccessRule` í˜¸ì¶œë¡œ ì¦‰ì‹œ ì„œë²„ ë°˜ì˜ í›„ ëª©ë¡ ì¬ì¡°íšŒ (Optimistic UI ìµœì†Œí™”, ì¼ê´€ì„± ìœ ì§€) |
| ê·œì¹™ ì‚­ì œ | ê°œë³„ ë ˆì½”ë“œ ì‚­ì œ í›„ ì¬ì¡°íšŒ, ë³€ê²½ì‚¬í•­ í”Œë˜ê·¸ ìœ ì§€ |
| ê²€ì¦ | Restricted ì €ì¥ ì‹œ ì œí•œ ë ˆì½”ë“œ 0ê±´ â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ, ì €ì¥ ì°¨ë‹¨ |
| ì ‘ê·¼ ìˆ˜ì¤€ ì „í™˜ | Restricted â†’ Public/Private ë³€ê²½ ì‹œ ê¸°ì¡´ ì œí•œ ë ˆì½”ë“œ ì‚­ì œ ì˜ˆê³ (ì €ì¥í•´ì•¼ í™•ì •) |

ê´€ë¦¬ì ì‹œë‚˜ë¦¬ì˜¤ (ì˜ˆ):
1. ë¬¸ì„œ ì ‘ê·¼ ëª¨ë‹¬ ì—´ê¸° â†’ ê¸°ì¡´ `restricted` ê·œì¹™ 3ê±´ ë¡œë“œ
2. ì¶”ê°€ë¡œ ì™¸ë¶€ í˜‘ì—…ì ì‚¬ë²ˆ ê²€ìƒ‰ í›„ ì¡°íšŒ ê¶Œí•œ(view) ë ˆì½”ë“œ ì¶”ê°€
3. íŠ¹ì • ë¶€ì„œ ê¶Œí•œì„ download â†’ editë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ ê¸°ì¡´ ë ˆì½”ë“œ ì‚­ì œ í›„ ì¬ì¶”ê°€
4. ë³€ê²½ ë°°ì§€(âš ï¸) í™•ì¸ í›„ ì €ì¥ í´ë¦­ â†’ ì „ì²´ ê·œì¹™ ì›ì ì¹˜í™˜
5. ì €ì¥ ì™„ë£Œ í›„ ëª¨ë‹¬ ë‹«í˜ ë° ìƒìœ„ ë¦¬ìŠ¤íŠ¸ ë¦¬í”„ë ˆì‹œ

### 15.5 ì‚¬ìš©ì vs ì§€ì‹ê´€ë¦¬ì ê¸°ëŠ¥ ë¹„êµ

| ê¸°ëŠ¥ | ì‚¬ìš©ì ëª¨ë‹¬ | ì§€ì‹ê´€ë¦¬ì ëª¨ë‹¬ | ì„¤ëª… |
|------|------------|----------------|------|
| ì ‘ê·¼ ë ˆë²¨ ì„ íƒ | O | O | ë™ì¼ 3ë‹¨ê³„ (ê³µê°œ/ì œí•œ/ë¹„ê³µê°œ) |
| ì œí•œ ê·œì¹™ ìˆ˜ | 1ê±´ ê³ ì • | ì—¬ëŸ¬ ê±´ | ê´€ë¦¬ì ë‹¤ì¤‘ ëŒ€ìƒ ê´€ë¦¬ |
| ì‚¬ìš©ì ê²€ìƒ‰ | ì§ì ‘ ì…ë ¥ | ì´ë¦„/ì‚¬ë²ˆ ê²€ìƒ‰ ì§€ì› | ì •í™•ë„/í¸ì˜ì„± í–¥ìƒ |
| ë¶€ì„œ ëŒ€ìƒ | ë¬¸ìì—´ ì…ë ¥ | ë¬¸ìì—´ ì…ë ¥ | í–¥í›„ ì½”ë“œ í‘œì¤€í™” ì˜ˆì • |
| ê¶Œí•œ ë ˆë²¨ ë‹¤ì–‘ì„± | view/download/edit | view/download/edit | ë™ì¼ ì˜µì…˜ |
| ë³€ê²½ì‚¬í•­ ê²½ê³  | X | O | ì €ì¥ ì „ `hasChanges` í‘œì‹œ |
| ë¹ˆ Restricted ì €ì¥ ë°©ì§€ | ëŒ€ìƒ í•„ìˆ˜ ì²´í¬ | ë ˆì½”ë“œ â‰¥1 ìš”êµ¬ | ê²€ì¦ ë°©ì‹ ì°¨ì´ |
| ê·œì¹™ ì¦‰ì‹œ ì¶”ê°€/ì‚­ì œ | ì €ì¥ ì‹œ ì¹˜í™˜ | ì¶”ê°€/ì‚­ì œ ì‹œ ì¦‰ì‹œ ì„œë²„ ë°˜ì˜ | ê´€ë¦¬ì ê°ì‚¬ ì¶”ì  ê°•í™” |
| ë‹¤ì¤‘ í˜¼í•©(User+Dept) | ë¶ˆê°€ | ê°€ëŠ¥ | ê·œì¹™ ëª©ë¡ ë°˜ë³µ |

### 15.6 ê²€ì¦ ë° ì˜ˆì™¸ ì²˜ë¦¬

| ê²€ì¦ í•­ëª© | ì¡°ê±´ | ì‚¬ìš©ì ëª¨ë‹¬ ì²˜ë¦¬ | ê´€ë¦¬ì ëª¨ë‹¬ ì²˜ë¦¬ | ì‹¤íŒ¨ ê²°ê³¼ |
|-----------|------|------------------|------------------|-----------|
| ì œí•œ ëŒ€ìƒ ì…ë ¥ | Restricted ì„ íƒ ì‹œ | ë¹ˆ ê°’ â†’ ì•Œë¦¼ í›„ ì¤‘ë‹¨ | ì‚¬ìš©ì/ë¶€ì„œ ì…ë ¥ ëª¨ë‘ ë¹„ì–´ ìˆìœ¼ë©´ ì¶”ê°€ ì¤‘ë‹¨ | ì €ì¥/ì¶”ê°€ ì‹¤íŒ¨ ë©”ì‹œì§€ |
| ìµœì†Œ ê·œì¹™ ìˆ˜ | Restricted ì €ì¥ ì‹œ | ë‹¨ì¼ ê·œì¹™ ì¡´ì¬ ì—¬ë¶€ | ì œí•œ ë ˆì½”ë“œ â‰¥1 | ì €ì¥ ì°¨ë‹¨ + ì—ëŸ¬ í‘œì‹œ |
| ì¤‘ë³µ ëŒ€ìƒ | ë™ì¼ ëŒ€ìƒ ì¬ì…ë ¥ | ìƒˆ ê·œì¹™ ë®ì–´ì“°ê¸°(ë‹¨ì¼) | ì¤‘ë³µ ë ˆì½”ë“œ í—ˆìš©(í–¥í›„ ì •í•©ì„± ê²€ì¦ ì˜ˆì •) | í˜„ì¬ í—ˆìš© |
| ê¶Œí•œ ë¬¸ìì—´ | view/download/edit | ì„ íƒ UI ê°•ì œ | ì„ íƒ UI ê°•ì œ | ì˜ëª»ëœ ê°’ ì„œë²„ ê²€ì¦ ì‹¤íŒ¨ |
| ë¯¸ì €ì¥ ë³€ê²½ | accessLevel ë³€ê²½ í›„ ì €ì¥ ì•ˆ í•¨ | ì—†ìŒ | í‘¸í„° ê²½ê³  ë…¸ì¶œ | ì‚¬ìš©ì ì·¨ì†Œ ì‹œ íê¸° |

### 15.7 ì €ì¥ ë°©ì‹ (ì›ìì  ì¹˜í™˜ íŒ¨í„´)

1. í˜„ì¬ ë¬¸ì„œì˜ ê¸°ì¡´ ì ‘ê·¼ ê·œì¹™ ì „ì²´ ì¡°íšŒ
2. ì €ì¥ ì§ì „ ì „ì²´ ì‚­ì œ(ì˜¤ë¥˜ ë¬´ì‹œ/ë¡œê¹…) â†’ ì •ë¦¬ëœ ìƒíƒœ í™•ë³´
3. ìƒˆ ìƒíƒœ(access_level ë° ì œí•œ ë ˆì½”ë“œ ëª©ë¡) ê¸°ì¤€ìœ¼ë¡œ ì¬ì‚½ì…
4. ìµœì¢… ì¡°íšŒë¡œ ë°˜ì˜ í™•ì¸ í›„ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ë™ê¸°í™”

ì¥ì : ë¶€ë¶„ ì—…ë°ì´íŠ¸/ë³‘í•© ì¶©ëŒ ì œê±°, ê°„ê²°í•œ ë°±ì—”ë“œ ë¡œì§, ê°ì‚¬ ë¡œê·¸ ëª…í™•í™”.
ì£¼ì˜: ëŒ€ëŸ‰ ê·œì¹™ ë³€ê²½ ì‹œ ì¼ì‹œì  ê³µë°± ìƒíƒœ â†’ íŠ¸ëœì­ì…˜ ì§€ì› ê³ ë ¤(í–¥í›„ ê°œì„  í•­ëª©).

### 15.8 í–¥í›„ ê°œì„  ê³„íš

| ê°œì„  í•­ëª© | ìš°ì„ ìˆœìœ„ | ì„¤ëª… |
|-----------|---------|------|
| ë‹¤ì¤‘ ê·œì¹™ íŠ¸ëœì­ì…˜ ì‚½ì… | ë†’ìŒ | ì‚­ì œâ†’ì‚½ì… ì‚¬ì´ ê³µë°± ì œê±°, ì›ìì„± í™•ë³´ |
| ë¶€ì„œ ìë™ì™„ì„±/ì½”ë“œ í‘œì¤€í™” | ì¤‘ê°„ | HR ì¡°ì§ ì½”ë“œ ê¸°ë°˜ ì„ íƒ ì»´í¬ë„ŒíŠ¸ ë„ì… |
| ëŒ€ìƒ ì¤‘ë³µ ë°©ì§€ ë¡œì§ | ì¤‘ê°„ | ë™ì¼ ëŒ€ìƒ/ê¶Œí•œ ë ˆë²¨ ì¤‘ë³µ ì‚½ì… ì°¨ë‹¨ |
| ì¶”ê°€ ê¶Œí•œ íƒ€ì… | ì¤‘ê°„ | comment, share_external ë“± í™•ì¥ |
| ìƒì† í”Œë˜ê·¸ í™œìš© | ë‚®ìŒ | í–¥í›„ ìƒìœ„ ì»¨í…Œì´ë„ˆ ì •ì±… í•˜í–¥ ë°˜ì˜ í‘œì‹œ |
| ë³€ê²½ ì´ë ¥ UI | ë‚®ìŒ | ê·œì¹™ ë³€ê²½ Diff ë° íƒ€ì„ë¼ì¸ ì¡°íšŒ |

### 15.9 ìš”ì•½

ì‚¬ìš©ì ëª¨ë‹¬ì€ â€œë‹¨ìˆœ/ì‹ ì†â€ ì„¤ì •ì„ ìœ„í•œ ë‹¨ì¼ ê·œì¹™ í¸ì§‘ ì¸í„°í˜ì´ìŠ¤, ì§€ì‹ê´€ë¦¬ì ëª¨ë‹¬ì€ â€œë³µìˆ˜ ëŒ€ìƒ/ê°ì‚¬ ì¹œí™”â€ ìš´ì˜ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ë‘ ë°©ì‹ ëª¨ë‘ ì¼ê´€ëœ ì ‘ê·¼ ë ˆë²¨ ëª¨ë¸ê³¼ ì¹˜í™˜ ì €ì¥ íŒ¨í„´ì„ ì ìš©í•˜ì—¬ ì •ì±… ì •í•©ì„±ê³¼ ìœ ì§€ê´€ë¦¬ì„±ì„ í™•ë³´í•˜ì˜€ìŠµë‹ˆë‹¤.

