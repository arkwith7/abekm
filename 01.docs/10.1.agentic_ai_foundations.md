# 10.1 Agentic AI Foundations (정의·원칙·LangGraph 핵심)

> 본 문서는 ABEKM 멀티 에이전트의 공용 기반(Agentic AI 정의, LangGraph 개념, 토폴로지 선택 기준)을 제공합니다.
> 오케스트레이션/레지스트리/테스트 운영은 10.2/10.5를 참고하세요.

---

## 1. 이 프로젝트에서의 Agentic AI 정의

ABEKM에서 “에이전트(Agent)”는 단일 클래스/함수가 아니라, 아래 4요소가 결합된 **제품 단위**입니다.

- **System Prompt**: 역할/정책/제약/출력 품질 기준
- **State**: LangGraph 상태(입력/출력/메모리/메타데이터)
- **Tools/Actions**: 외부 호출 및 내부 기능 실행(계약 포함)
- **Graph**: LangGraph StateGraph(노드/엣지/조건부 라우팅/종료)

원칙: 에이전트는 `prompt + state + tools + graph`가 함께 버전업/테스트/운영될 수 있어야 합니다.

현재 구현 메모(2026-01-03):
- 프롬프트는 중앙 디렉토리로 모으지 않고, feature-pack 내부 `prompts/`에 두는 것을 기본으로 합니다.
- 공용 계약 타입은 `backend/app/core/contracts.py`를 단일 소스로 사용합니다.

---

## 2. LangGraph StateGraph 핵심 개념

- **Node**: 함수(또는 Subgraph). 상태를 읽고 업데이트를 반환
- **Edge**: 노드 간 연결
- **Conditional Edge**: 상태 기반 라우팅
- **Checkpointer**: 세션(스레드) 연속성/재시작 복원

상태는 `TypedDict`(권장) 또는 Pydantic 모델로 정의합니다.

---

## 3. 2024–2025 LangGraph 패턴(선택적 반영)

> 아래 기능들은 유용하지만, 본 프로젝트의 운영 원칙(Import-safe, 테스트 게이트)을 우선합니다.

- **`Command` 반환 타입(권장)**: 상태 업데이트와 다음 노드 이동(`goto`)를 명시적으로 표현
- **`InjectedState`(선택)**: 도구 호출에 런타임 상태를 안전하게 주입(전역 의존 최소화)
- **Memory Store(선택)**: 크로스-세션 장기 메모리(선호/이력)를 별도 저장소로 관리
- **Durable Execution(선택)**: 장애/재시작 후 중단 지점부터 재개

운영 규칙: 체크포인터/스토어/외부 클라이언트는 **import 시점이 아니라** 앱 startup 또는 노드 실행 시점에만 초기화합니다.

---

## 4. 멀티에이전트 토폴로지 선택 가이드

LangGraph 멀티에이전트 토폴로지는 크게 Supervisor/Swarm/Network로 구분됩니다.

- **Supervisor(기본 권장)**
  - 장점: 도메인 경계가 명확하고, 신규 에이전트 추가 시 운영이 단순
  - 본 프로젝트 기본값

- **Swarm(부분 도입 가능)**
  - 장점: 동적 핸드오프/연속 대화에 유리
  - 단점: 운영/디버깅 복잡도 상승

- **Network(초기 비권장)**
  - 장점: 반복 정제/협업에 유리
  - 단점: 제어/관찰/테스트 복잡도가 높아 초기 확장 단계에 비효율

결론: IP 관리 솔루션의 특성(특허/문서/SQL/웹/보고서)이 분명히 분리되므로, **Supervisor + 계층화(Team-of-Teams)**가 가장 현실적인 확장 경로입니다.

---

## 5. Import-safe(필수) 운영 원칙

- 모듈 import 시 네트워크 호출/클라이언트 초기화/백그라운드 태스크 시작 금지
- 무거운 초기화는 노드 실행 시점 또는 앱 startup 단계로 지연
- 테스트 환경에서는 LLM/외부 의존성이 누락될 수 있으므로, 폴백 정책이 명확해야 함

(변경/검증 프로세스는 10.5 참고)
