# IP 포트폴리오 구축 제안서

> **반도체 장비 업종 특화 IPC 중심 IP 관리 시스템**  
> **제안일**: 2026-01-04  
> **시스템**: IPBridge Knowledge Management System

---

## 📋 제안 요약

### 현황
- ✅ **IPC 권한 관리 시스템 개발 완료**
  - 백엔드 API: `/api/v1/admin/ipc-permissions` (CRUD)
  - 프론트엔드 UI: `/admin/ipc-permissions` (관리자 페이지)
  - 데이터베이스 모델: tb_ipc_code, tb_ipc_permissions

### 필요 작업
1. **IPC 코드 초기 데이터 적재**
2. **조직별 IPC 권한 할당**
3. **IP 포트폴리오 메뉴 구성**

---

## 🎯 제안 사항

### 1. 초기 데이터 적재 방안

#### 1.1 IPC 코드 마스터 데이터 (23개 코드)

**반도체 장비 업종 특화 IPC 코드 선정 기준**:
- 업종 특성: 반도체 제조 장비, 검사 장비, CMP, 증착 장비
- 특허 비중: H(71%), G(18%), B(7%), C(4%)
- 국제 표준: WIPO IPC 분류 체계 준수

**적재 방법**:
```bash
# CSV 파일 기반 적재 (비개발자도 수정 가능)
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_codes.py
```

**데이터 구조**:
```csv
ipc_code,ipc_section,korean_name,english_name
H,H,"전기","Electricity"
H01L,H,"반도체 소자","Semiconductor devices"
H01L21/00,H,"반도체 제조 공정","Manufacturing processes"
...
```

#### 1.2 IPC 권한 초기 할당 (12개 권한)

**조직별 권한 매핑**:

| 조직/역할 | IPC 코드 | 역할 | 설명 |
|-----------|----------|------|------|
| 시스템관리자 (admin001) | H, G, B, C | ADMIN | 전체 섹션 관리 권한 |
| 반도체팀 (tech001) | H01L, H05H | EDITOR | 제조 장비 편집 |
| 검사팀 (tech002) | G01N, G01B | EDITOR | 검사/측정 장비 편집 |
| CMP팀 (tech003) | B24B, C23C | EDITOR | 연마/증착 장비 편집 |
| 일반 사용자 (user001, user002) | H01L21/00, G01N21/95 | VIEWER | 세부 공정 조회 |

**적재 방법**:
```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_permissions.py
```

**검증**:
```bash
python scripts/verify_ipc_data.py  # 데이터 품질 검증
```

---

### 2. IP 포트폴리오 메뉴 구성 제안

#### 2.1 메뉴 구조 (3단계)

```
📊 IP 포트폴리오 (메인 메뉴)
│
├── 🗂️ 기술 분야별 특허 (IPC 트리 네비게이션)
│   ├── H (전기) - 반도체 제조 장비
│   │   ├── H01L - 반도체 소자
│   │   │   ├── H01L21/00 - 제조 공정
│   │   │   ├── H01L21/67 - 제조 장비
│   │   │   └── H01L21/683 - 처리 챔버
│   │   ├── H05H - 플라즈마 기술
│   │   └── H01J - 전자관
│   │
│   ├── G (물리학) - 검사/측정
│   │   ├── G01N - 검사 (결함 검출)
│   │   └── G01B - 측정 (CD 측정)
│   │
│   ├── B (처리 조작) - 핸들링
│   │   ├── B24B - CMP
│   │   └── B08B - 세정
│   │
│   └── C (화학) - 증착/코팅
│       └── C23C - CVD/PVD
│
├── 📈 IP 대시보드
│   ├── 기술 분야별 특허 현황 (파이 차트)
│   ├── 출원 트렌드 (연도별 막대 그래프)
│   ├── 핵심 IPC 분포 (상위 10개)
│   └── 발명자 통계 (활동 순위)
│
├── 🔍 특허 검색
│   ├── IPC 코드 검색 (자동완성)
│   ├── 키워드 검색 (AI 시맨틱)
│   ├── 발명자 검색
│   └── 출원일/등록일 범위
│
├── 📝 특허 관리
│   ├── 신규 특허 등록
│   ├── 특허 상태 업데이트
│   └── 특허 파일 업로드
│
├── 🎯 전략 분석 (AI Agent)
│   ├── 기술 백공간 분석
│   ├── 경쟁사 특허 분석
│   ├── 인용 관계 분석
│   └── 특허 가치 평가
│
└── ⚙️ 관리자
    ├── IPC 권한 관리 ✅ (구현 완료)
    ├── IPC 코드 관리
    └── 특허 메타데이터 관리
```

#### 2.2 프론트엔드 구현 우선순위

**Phase 1 (2주)**: 기본 조회 기능
- [ ] IPC 트리 네비게이션 컴포넌트
- [ ] 기술 분야별 특허 목록 (카드 뷰)
- [ ] 특허 상세 페이지
- [ ] IPC 코드별 권한 필터링

**Phase 2 (2주)**: 대시보드
- [ ] IP 대시보드 페이지
- [ ] 차트 컴포넌트 (Chart.js/Recharts)
- [ ] 통계 위젯 (총 특허 수, 출원 추세 등)

**Phase 3 (4주)**: 검색 및 관리
- [ ] 고급 특허 검색 (IPC + 키워드)
- [ ] 특허 등록/수정 폼
- [ ] 파일 업로드 (PDF, 도면)

**Phase 4 (4주+)**: AI 전략 분석
- [ ] AI Agent 통합
- [ ] 기술 백공간 분석
- [ ] 경쟁사 특허 비교

#### 2.3 라우팅 구조

**파일**: `/home/arkwith/Dev/abekm/frontend/src/App.tsx`

```typescript
// IP 포트폴리오 라우트 (신규)
<Route path="/ip-portfolio" element={<IpPortfolioLayout />}>
  {/* 기술 분야별 특허 */}
  <Route path="tech/:ipcSection" element={<TechPatentList />} />
  <Route path="tech/:ipcSection/:ipcCode" element={<PatentDetail />} />
  
  {/* IP 대시보드 */}
  <Route path="dashboard" element={<IpDashboard />} />
  
  {/* 특허 검색 */}
  <Route path="search" element={<PatentSearch />} />
  
  {/* 특허 관리 */}
  <Route path="manage" element={<PatentManagement />} />
  
  {/* 전략 분석 */}
  <Route path="analysis" element={<StrategicAnalysis />} />
</Route>
```

#### 2.4 메인 네비게이션 추가

**파일**: `/home/arkwith/Dev/abekm/frontend/src/layouts/MainLayout.tsx`

```typescript
// 메인 메뉴에 IP 포트폴리오 추가
{
  name: 'IP 포트폴리오',
  path: '/ip-portfolio/dashboard',
  icon: Shield,  // lucide-react
  badge: 'NEW',
  children: [
    { name: '기술 분야별 특허', path: '/ip-portfolio/tech/H' },
    { name: 'IP 대시보드', path: '/ip-portfolio/dashboard' },
    { name: '특허 검색', path: '/ip-portfolio/search' },
    { name: '전략 분석', path: '/ip-portfolio/analysis' }
  ]
}
```

---

### 3. 기술적 구현 방안

#### 3.1 백엔드 API (신규 추가 필요)

**파일 경로**: `/home/arkwith/Dev/abekm/backend/app/api/v1/ip_portfolio.py`

```python
# 1. IPC 권한 기반 특허 조회
@router.get("/patents")
async def get_filtered_patents(
    ipc_code: Optional[str] = None,
    current_user: User = Depends(get_current_user)
):
    """사용자 IPC 권한 기반 특허 필터링"""
    # 사용자의 IPC 권한 조회
    allowed_ipc_codes = await ipc_permission_service.get_user_ipc_permissions(
        user_emp_no=current_user.emp_no
    )
    
    # 권한이 있는 IPC 코드의 특허만 조회
    query = select(TbPatentMetadata).where(
        TbPatentMetadata.main_ipc_code.in_(allowed_ipc_codes)
    )
    
    return patents

# 2. IPC 트리 구조 조회
@router.get("/ipc-tree")
async def get_ipc_tree(
    section: Optional[str] = None,
    current_user: User = Depends(get_current_user)
):
    """IPC 코드 계층 구조 반환 (권한 필터링 포함)"""
    # 사용자 권한이 있는 IPC 코드만 트리에 표시
    
# 3. IP 대시보드 통계
@router.get("/dashboard/stats")
async def get_dashboard_stats(
    current_user: User = Depends(get_current_user)
):
    """기술 분야별 특허 통계"""
    return {
        "total_patents": 1234,
        "by_section": {"H": 850, "G": 200, "B": 100, "C": 84},
        "recent_filings": [...],
        "top_inventors": [...]
    }
```

#### 3.2 프론트엔드 컴포넌트 (신규 개발)

**1. IPC 트리 네비게이션**

**파일**: `/home/arkwith/Dev/abekm/frontend/src/components/ip/IpcTreeNavigation.tsx`

```typescript
interface IpcTreeNode {
  code: string;
  name: string;
  level: 'section' | 'class' | 'subclass' | 'group';
  children?: IpcTreeNode[];
  patentCount: number;
  hasPermission: boolean;  // 사용자 권한 여부
}

export const IpcTreeNavigation: React.FC = () => {
  const [expandedNodes, setExpandedNodes] = useState<string[]>(['H']);
  
  // 반도체 장비 IPC 트리 (권한 필터링된 데이터)
  const ipcTree = useMemo(() => {
    return buildTree(userIpcPermissions);  // 백엔드에서 조회
  }, [userIpcPermissions]);
  
  return (
    <div className="ipc-tree">
      {ipcTree.map(node => (
        <IpcTreeNode 
          key={node.code} 
          node={node}
          onSelect={(code) => navigate(`/ip-portfolio/tech/${code}`)}
        />
      ))}
    </div>
  );
};
```

**2. 특허 카드 컴포넌트**

**파일**: `/home/arkwith/Dev/abekm/frontend/src/components/ip/PatentCard.tsx`

```typescript
interface PatentCardProps {
  patent: {
    application_number: string;
    title: string;
    main_ipc_code: string;
    filing_date: string;
    status: string;
    inventors: string[];
  };
}

export const PatentCard: React.FC<PatentCardProps> = ({ patent }) => {
  return (
    <div className="patent-card">
      <div className="patent-header">
        <span className="ipc-badge">{patent.main_ipc_code}</span>
        <span className={`status-badge ${patent.status}`}>{patent.status}</span>
      </div>
      <h3>{patent.title}</h3>
      <div className="patent-meta">
        <span>출원번호: {patent.application_number}</span>
        <span>출원일: {patent.filing_date}</span>
      </div>
      <div className="inventors">
        발명자: {patent.inventors.join(', ')}
      </div>
    </div>
  );
};
```

**3. IP 대시보드**

**파일**: `/home/arkwith/Dev/abekm/frontend/src/pages/ip/IpDashboard.tsx`

```typescript
export const IpDashboard: React.FC = () => {
  const [stats, setStats] = useState<DashboardStats | null>(null);
  
  useEffect(() => {
    // 백엔드에서 통계 조회
    ipService.getDashboardStats().then(setStats);
  }, []);
  
  return (
    <div className="ip-dashboard">
      {/* 요약 위젯 */}
      <div className="summary-widgets">
        <StatWidget title="총 특허" value={stats?.total_patents} icon={FileText} />
        <StatWidget title="출원 중" value={stats?.pending} icon={Clock} />
        <StatWidget title="등록 완료" value={stats?.granted} icon={CheckCircle} />
      </div>
      
      {/* 기술 분야별 차트 */}
      <div className="charts">
        <PieChart 
          title="기술 분야별 특허 분포" 
          data={stats?.by_section} 
        />
        <BarChart 
          title="연도별 출원 추세" 
          data={stats?.yearly_trend} 
        />
      </div>
      
      {/* 최근 특허 */}
      <div className="recent-patents">
        <h3>최근 등록 특허</h3>
        {stats?.recent_patents.map(patent => (
          <PatentCard key={patent.id} patent={patent} />
        ))}
      </div>
    </div>
  );
};
```

---

### 4. 권한 기반 필터링 로직

#### 4.1 백엔드 권한 검증

```python
class IpcPermissionService:
    async def get_user_ipc_permissions(
        self, 
        user_emp_no: str,
        db: AsyncSession
    ) -> List[str]:
        """
        사용자가 접근 가능한 IPC 코드 목록 반환
        - ADMIN 역할: 해당 섹션 전체 접근
        - EDITOR/VIEWER: 명시적 IPC 코드만 접근
        """
        # 1. 사용자 권한 조회
        permissions = await db.execute(
            select(TbIpcPermissions)
            .where(TbIpcPermissions.user_emp_no == user_emp_no)
            .where(TbIpcPermissions.is_active == True)
        )
        
        allowed_codes = []
        for perm in permissions.scalars():
            if len(perm.ipc_code) == 1:  # 섹션 권한 (H, G 등)
                # 해당 섹션의 모든 IPC 코드 조회
                section_codes = await db.execute(
                    select(TbIpcCode.ipc_code)
                    .where(TbIpcCode.ipc_section == perm.ipc_code)
                )
                allowed_codes.extend(section_codes.scalars().all())
            else:
                allowed_codes.append(perm.ipc_code)
        
        return allowed_codes
    
    async def filter_patents_by_permission(
        self,
        patents: List[Patent],
        user_emp_no: str,
        db: AsyncSession
    ) -> List[Patent]:
        """특허 목록을 사용자 권한으로 필터링"""
        allowed_ipc_codes = await self.get_user_ipc_permissions(user_emp_no, db)
        
        return [
            patent for patent in patents
            if patent.main_ipc_code in allowed_ipc_codes
        ]
```

#### 4.2 프론트엔드 권한 표시

```typescript
// IPC 트리 노드에 권한 표시
const IpcTreeNode: React.FC<{node: IpcTreeNode}> = ({node}) => {
  return (
    <div className={`ipc-node ${!node.hasPermission ? 'disabled' : ''}`}>
      <span className="ipc-code">{node.code}</span>
      <span className="ipc-name">{node.name}</span>
      {!node.hasPermission && (
        <Tooltip content="접근 권한 없음">
          <Lock size={14} />
        </Tooltip>
      )}
      <span className="patent-count">({node.patentCount})</span>
    </div>
  );
};
```

---

### 5. 단계별 구축 로드맵

#### Phase 1: 초기 데이터 구축 (1일)

**작업**:
- [x] IPC 코드 마스터 데이터 적재 (23개)
- [x] IPC 권한 초기 할당 (12개)
- [x] 데이터 검증

**산출물**:
- CSV 파일: ipc_codes_semiconductor.csv
- CSV 파일: ipc_permissions_initial.csv
- 스크립트: load_ipc_codes.py, load_ipc_permissions.py, verify_ipc_data.py

#### Phase 2: 기본 조회 기능 (2주)

**작업**:
- [ ] IPC 트리 네비게이션 컴포넌트
- [ ] 기술 분야별 특허 목록 API
- [ ] 특허 카드 UI
- [ ] IPC 코드별 권한 필터링

**산출물**:
- 프론트엔드: IpcTreeNavigation.tsx, TechPatentList.tsx, PatentCard.tsx
- 백엔드: ip_portfolio.py (API 엔드포인트)

#### Phase 3: IP 대시보드 (2주)

**작업**:
- [ ] 대시보드 통계 API (기술 분야별, 연도별)
- [ ] 차트 라이브러리 통합 (Chart.js/Recharts)
- [ ] 위젯 컴포넌트 (총 특허, 출원 추세 등)

**산출물**:
- 프론트엔드: IpDashboard.tsx, StatWidget.tsx, Charts.tsx
- 백엔드: dashboard_stats API

#### Phase 4: 검색 및 관리 (4주)

**작업**:
- [ ] 고급 검색 (IPC + 키워드 + 날짜)
- [ ] 특허 등록/수정 폼
- [ ] 파일 업로드 (PDF, 도면)
- [ ] 특허 상태 관리 (출원 → 심사 → 등록)

**산출물**:
- 프론트엔드: PatentSearch.tsx, PatentForm.tsx
- 백엔드: patent_management.py

#### Phase 5: AI 전략 분석 (4주+)

**작업**:
- [ ] AI Agent 통합 (특허 분석)
- [ ] 기술 백공간 분석 (자사 vs 경쟁사)
- [ ] 인용 네트워크 그래프
- [ ] 특허 가치 평가 모델

**산출물**:
- 프론트엔드: StrategicAnalysis.tsx, CitationNetwork.tsx
- 백엔드: ai_patent_analysis.py

---

### 6. 예상 효과

#### 6.1 조직 효율성

- **권한 관리 자동화**: 조직 변경 시 권한 재할당 불필요 (기술 중심)
- **특허 검색 속도 향상**: IPC 코드 기반 인덱싱 (조직 계층 탐색 불필요)
- **접근 제어 명확화**: 기술 분야별 권한 (조직 멤버십 혼란 제거)

#### 6.2 특허 관리 품질

- **국제 표준 준수**: IPC/CPC 글로벌 특허청 공통 분류
- **경쟁사 비교 가능**: 동일 IPC 기준 벤치마킹
- **기술 포트폴리오 가시화**: 분야별 강점/약점 분석

#### 6.3 AI 분석 기반

- **자동 분류**: 특허 명세서 → IPC 코드 AI 추천
- **백공간 분석**: 자사 미보유 기술 분야 발굴
- **특허 가치 평가**: 인용 횟수, 패밀리 크기 기반 점수

---

## 📊 구현 비용 및 일정

### 리소스 소요

| 단계 | 기간 | 인력 | 비고 |
|------|------|------|------|
| Phase 1: 초기 데이터 | 1일 | Backend 1명 | CSV 적재 스크립트 |
| Phase 2: 기본 조회 | 2주 | Frontend 1명, Backend 1명 | IPC 트리, 특허 목록 |
| Phase 3: 대시보드 | 2주 | Frontend 1명, Backend 1명 | 차트, 통계 |
| Phase 4: 검색/관리 | 4주 | Frontend 1명, Backend 1명 | 검색, CRUD |
| Phase 5: AI 분석 | 4주+ | AI Engineer 1명, Backend 1명 | LangChain, RAG |

### 총 예상 기간

- **최소 기능 (Phase 1-2)**: 2주
- **핵심 기능 (Phase 1-3)**: 4주
- **완전 기능 (Phase 1-4)**: 8주
- **고급 기능 (Phase 1-5)**: 12주+

---

## 🚀 즉시 실행 가능한 액션 아이템

### 오늘 할 수 있는 작업

1. **IPC 코드 데이터 적재** (5분)
   ```bash
   cd /home/arkwith/Dev/abekm/backend
   python scripts/load_ipc_codes.py
   ```

2. **IPC 권한 할당** (5분)
   ```bash
   python scripts/load_ipc_permissions.py
   ```

3. **데이터 검증** (2분)
   ```bash
   python scripts/verify_ipc_data.py
   ```

4. **관리자 UI 테스트** (5분)
   - http://localhost:3000/admin/ipc-permissions 접속
   - IPC 권한 생성/수정/삭제 테스트

### 이번 주 작업 (선택)

- [ ] IPC 트리 네비게이션 와이어프레임 작성
- [ ] 특허 데이터 모델 설계 (tb_patent_metadata)
- [ ] IP 대시보드 요구사항 정의
- [ ] 특허 샘플 데이터 준비 (10-20건)

---

## 📚 참고 자료

### 기술 문서
- [16.ip_portfolio_ipc_management.md](./16.ip_portfolio_ipc_management.md) - 전체 시스템 설계
- [16.1.ip_portfolio_quick_start.md](./16.1.ip_portfolio_quick_start.md) - 빠른 시작 가이드
- [IP_포트폴리오_IPC_중심_전환_분석.md](./IP_포트폴리오_IPC_중심_전환_분석.md) - IPC 전환 분석

### 외부 참고
- **WIPO IPC**: https://www.wipo.int/classifications/ipc/en/
- **KIPRIS**: https://www.kipris.or.kr/
- **반도체 장비 산업**: 한국반도체산업협회

---

## ✅ 결론 및 권장 사항

### 즉시 적용 가능
1. ✅ **IPC 권한 관리 시스템 활용**
   - 이미 구현 완료 (백엔드 API + 프론트엔드 UI)
   - 초기 데이터 적재만 하면 즉시 사용 가능

2. ✅ **CSV 기반 데이터 관리**
   - 비개발자도 IPC 코드 추가/수정 가능
   - 버전 관리 용이 (Git)

3. ✅ **반도체 장비 업종 특화**
   - 23개 IPC 코드 (H, G, B, C 섹션)
   - 조직별 권한 매핑 예시 제공

### 단계별 확장 권장
1. **1주차**: 초기 데이터 + 기본 UI 테스트
2. **2-4주**: IPC 트리 네비게이션 + 특허 목록
3. **5-8주**: IP 대시보드 + 검색 기능
4. **9주 이후**: AI 분석 기능

### 핵심 가치 제안
- 🎯 **조직 독립성**: 조직 개편과 무관한 기술 중심 분류
- 🌐 **국제 표준**: IPC/CPC 글로벌 특허청 공통 사용
- 🔐 **세밀한 권한**: IPC 코드별 역할 기반 접근 제어
- 📊 **전략적 인사이트**: 기술 포트폴리오 가시화 및 AI 분석

---

**제안**: AI 시스템  
**검토 요청**: 시스템 관리팀, IT 운영팀  
**최종 승인**: CTO/CIO  
**작성일**: 2026-01-04
