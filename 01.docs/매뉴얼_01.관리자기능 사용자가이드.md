# IPBridge 시스템관리자 기능 사용자 가이드

> **AI 기반 기업 IPBridge (IPBridge)**의 시스템관리자 기능에 대한 종합 사용자 가이드입니다.

**문서 버전**: v1.0  
**작성일**: 2025-12-25  
**대상 독자**: 시스템관리자 (ADMIN 권한 보유자)

---

## 목차

1. [개요](#1-개요)
2. [관리자 화면 접근](#2-관리자-화면-접근)
3. [시스템 대시보드](#3-시스템-대시보드)
4. [시스템 모니터링](#4-시스템-모니터링)
5. [지식컨테이너 관리](#5-지식컨테이너-관리)
6. [사용자 관리](#6-사용자-관리)
7. [보안 정책](#7-보안-정책)
8. [감사 로그](#8-감사-로그)
9. [지식베이스 관리](#9-지식베이스-관리)
10. [AI 사용량 관리](#10-ai-사용량-관리)
11. [부록: API 참조](#11-부록-api-참조)

---

## 1. 개요

### 1.1 시스템관리자 역할

시스템관리자는 IPBridge 플랫폼의 전반적인 운영을 담당하며, 다음의 핵심 책임을 가집니다:

| 영역 | 책임 |
|------|------|
| **사용자 관리** | 사용자 계정 생성, 수정, 삭제, 비밀번호 리셋 |
| **권한 관리** | 지식 컨테이너별 사용자 권한 설정 및 승인 |
| **시스템 모니터링** | 서비스 상태, 저장소 사용량, 성능 지표 모니터링 |
| **보안 감사** | 사용자 활동 로그 조회, 보안 이벤트 모니터링 |
| **AI 비용 관리** | LLM API 사용량 및 비용 추적 |
| **지식베이스 관리** | 문서 처리 현황, 벡터 DB 상태 모니터링 |

### 1.2 권한 체계

IPBridge은 역할 기반 접근 제어(RBAC)를 사용합니다:

```
┌─────────────────────────────────────────────────────────────┐
│                    시스템관리자 (ADMIN)                       │
│  - 모든 기능 접근 가능                                        │
│  - 사용자 계정 관리                                          │
│  - 시스템 설정 변경                                          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    지식관리자 (MANAGER)                       │
│  - 담당 컨테이너 권한 관리                                    │
│  - 문서 업로드/삭제                                          │
│  - 일반 사용자 기능 모두 포함                                  │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    일반 사용자 (USER)                         │
│  - 권한 있는 컨테이너 문서 조회                                │
│  - AI 기반 지식 검색 및 대화                                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 관리자 화면 접근

### 2.1 접근 방법

1. **URL 접속**: `http://[시스템주소]/admin`
2. **로그인**: 시스템관리자 계정으로 로그인
3. **자동 리다이렉트**: ADMIN 권한 사용자는 로그인 시 자동으로 관리자 화면으로 이동

### 2.2 화면 구성

```
┌──────────────────────────────────────────────────────────────────┐
│ [W] IPBridge                  시스템 대시보드         👤 김관리자    │
│ 시스템관리자                                      시스템관리자    │
├────────────────┬─────────────────────────────────────────────────┤
│                │                                                 │
│ 📊 시스템 대시보드 │                                                 │
│ 📈 시스템 모니터링 │              메인 콘텐츠 영역                    │
│ 📁 지식컨테이너   │                                                 │
│ 👥 사용자 관리   │                                                 │
│ 🛡️ 보안 정책    │                                                 │
│ 📋 감사 로그    │                                                 │
│ 💾 지식베이스   │                                                 │
│ 🤖 AI 사용량   │                                                 │
│                │                                                 │
└────────────────┴─────────────────────────────────────────────────┘
```

### 2.3 사용자 화면 전환

- 우측 상단 사용자 메뉴에서 **"사용자 화면"** 클릭
- 또는 좌측 상단 로고 클릭

---

## 3. 시스템 대시보드

> **경로**: `/admin` (기본 화면)

### 3.1 주요 통계 카드

| 항목 | 설명 | 데이터 소스 |
|------|------|------------|
| **총 사용자** | 등록된 전체 사용자 수 | 사용자 테이블 |
| **활성 사용자** | 최근 30일 내 접속한 사용자 | 로그인 이력 |
| **총 문서 수** | 업로드된 전체 문서 수 | 파일 정보 테이블 |
| **지식 컨테이너** | 활성화된 컨테이너 수 | 컨테이너 테이블 |

### 3.2 시스템 상태

실시간 시스템 헬스체크 결과를 표시합니다:

- ✅ **정상**: 백엔드 API, 데이터베이스, 인증 서비스
- ⚠️ **주의**: 성능 저하 또는 부분 장애
- ❌ **장애**: 서비스 불가

### 3.3 관리 메뉴 바로가기

주요 관리 기능으로 빠르게 이동할 수 있는 바로가기 버튼을 제공합니다.

### 3.4 새로고침

- **새로고침 버튼** 클릭 시 모든 통계 데이터 갱신
- 자동 갱신은 지원하지 않음 (수동 갱신)

---

## 4. 시스템 모니터링

> **경로**: `/admin/monitoring`

### 4.1 서비스 헬스체크

시스템의 핵심 서비스 상태를 확인합니다:

| 서비스 | 확인 항목 |
|--------|----------|
| **백엔드 API** | HTTP 응답 상태 |
| **데이터베이스** | PostgreSQL 연결 상태 |
| **인증 서비스** | 토큰 발급 가능 여부 |
| **저장소** | 파일 시스템 쓰기 가능 여부 |

### 4.2 저장소 현황

| 항목 | 설명 |
|------|------|
| **사용 중** | 업로드된 파일이 차지하는 공간 |
| **전체 용량** | 할당된 스토리지 총 용량 |
| **가용 공간** | 남은 저장 공간 |
| **사용률** | 사용 중 / 전체 × 100% |

### 4.3 외부 모니터링 연동

복잡한 인프라 모니터링은 전문 도구 사용을 권장합니다:
- Prometheus + Grafana
- AWS CloudWatch
- Azure Monitor

---

## 5. 지식컨테이너 관리

> **경로**: `/admin/containers`

### 5.1 컨테이너 개념

지식 컨테이너는 문서를 조직 구조에 맞게 분류하는 논리적 단위입니다:

```
웅진 (ROOT)
├── CEO직속 (DIVISION)
├── CTI사업본부 (DIVISION)
│   ├── MS서비스팀 (DEPARTMENT)
│   └── 인프라컨설팅팀 (DEPARTMENT)
├── 클라우드사업본부 (DIVISION)
│   └── 클라우드서비스팀 (DEPARTMENT)
└── ...
```

### 5.2 컨테이너 유형

| 유형 | 설명 | 레벨 |
|------|------|------|
| `COMPANY` | 회사 (최상위) | 1 |
| `DIVISION` | 본부/사업부 | 2 |
| `DEPARTMENT` | 팀/부서 | 3 |
| `TEAM` | 세부 조직 | 4 |

### 5.3 접근 수준

| 수준 | 설명 |
|------|------|
| `PUBLIC` | 전체 공개 |
| `INTERNAL` | 사내 전체 |
| `RESTRICTED` | 권한 필요 |
| `CONFIDENTIAL` | 기밀 (특별 권한) |

### 5.4 주요 기능

- **컨테이너 목록 조회**: 전체 컨테이너 현황
- **문서 통계**: 컨테이너별 문서 수, 청크 수
- **사용자 현황**: 접근 권한 보유 사용자 수

---

## 6. 사용자 관리

> **경로**: `/admin/users`

### 6.1 사용자 목록 조회

| 기능 | 설명 |
|------|------|
| **검색** | 이름, 사번, 부서명으로 검색 |
| **필터링** | 역할(ADMIN/MANAGER/USER), 상태별 필터 |
| **정렬** | 이름, 생성일 등으로 정렬 |
| **페이징** | 페이지당 10/20/50건 표시 |

### 6.2 사용자 상세 정보

```
┌─────────────────────────────────────────────────┐
│ 사용자 정보                                      │
├─────────────────────────────────────────────────┤
│ 사번: 12345678                                  │
│ 이름: 홍길동                                     │
│ 이메일: hong@company.com                        │
│ 부서: MS서비스팀                                 │
│ 역할: USER                                      │
│ 상태: 활성                                       │
│ 가입일: 2025-01-15                              │
│ 최근 접속: 2025-12-25 09:30                     │
└─────────────────────────────────────────────────┘
```

### 6.3 사용자 생성

**필수 입력 항목**:
- 사번 (고유, 변경 불가)
- 이름
- 이메일
- 초기 비밀번호
- 역할 (USER/MANAGER/ADMIN)

### 6.4 사용자 수정

- 이름, 이메일, 부서 정보 수정
- 역할 변경 (권한 상승/하향)
- 계정 활성화/비활성화

### 6.5 비밀번호 리셋

1. 사용자 상세 화면에서 **"비밀번호 리셋"** 클릭
2. 새 임시 비밀번호 생성
3. 사용자에게 임시 비밀번호 전달
4. 사용자 첫 로그인 시 비밀번호 변경 안내

### 6.6 사용자 삭제

- **소프트 삭제**: 계정 비활성화 (데이터 보존)
- 감사 로그에 삭제 이력 기록

---

## 7. 보안 정책

> **경로**: `/admin/security`

### 7.1 현재 정책 확인

시스템에 적용된 보안 정책을 확인할 수 있습니다:

| 정책 | 설정값 | 설명 |
|------|--------|------|
| **비밀번호 최소 길이** | 8자 | 비밀번호 최소 문자 수 |
| **비밀번호 복잡도** | 활성화 | 영문+숫자+특수문자 필수 |
| **비밀번호 유효기간** | 90일 | 정기 변경 주기 |
| **계정 잠금 임계값** | 5회 | 로그인 실패 허용 횟수 |
| **세션 타임아웃** | 30분 | 비활성 시 자동 로그아웃 |

### 7.2 데이터 암호화

| 영역 | 방식 |
|------|------|
| **전송 중** | TLS 1.3 (HTTPS) |
| **저장 시** | AES-256 |
| **비밀번호** | bcrypt 해시 |

> ⚠️ **참고**: 보안 정책 변경은 현재 읽기 전용입니다. 정책 변경이 필요한 경우 시스템 설정 파일을 직접 수정해야 합니다.

---

## 8. 감사 로그

> **경로**: `/admin/audit`

### 8.1 로그 조회

시스템에서 발생하는 모든 중요 활동을 기록하고 조회합니다.

**검색 조건**:
- 기간 (시작일 ~ 종료일)
- 사용자 (사번)
- 활동 유형
- 결과 (성공/실패)

### 8.2 기록되는 활동

| 카테고리 | 활동 유형 |
|----------|----------|
| **권한 관리** | 권한 부여, 권한 회수, 권한 변경 |
| **사용자 관리** | 계정 생성, 계정 수정, 비밀번호 리셋 |
| **인증** | 로그인 성공, 로그인 실패, 로그아웃 |
| **문서 접근** | 문서 조회, 다운로드 |

### 8.3 로그 항목 상세

| 필드 | 설명 |
|------|------|
| **타임스탬프** | 활동 발생 시간 |
| **사용자** | 활동 수행자 (사번, 이름) |
| **대상** | 영향받는 대상 (사용자, 컨테이너 등) |
| **활동 유형** | 수행된 작업 종류 |
| **결과** | 성공/실패 |
| **IP 주소** | 접속 IP |
| **상세 정보** | 변경 전/후 값 등 |

### 8.4 통계

| 항목 | 설명 |
|------|------|
| **전체 로그** | 조회 기간 내 총 로그 수 |
| **성공** | 정상 처리된 활동 |
| **실패** | 오류 또는 거부된 활동 |
| **경고** | 주의가 필요한 활동 |

---

## 9. 지식베이스 관리

> **경로**: `/admin/knowledge-base`

### 9.1 문서 처리 현황

업로드된 문서의 처리 파이프라인 상태를 모니터링합니다.

#### 9.1.1 처리 상태

| 상태 | 아이콘 | 설명 |
|------|--------|------|
| `pending` | ⏳ | 처리 대기 중 |
| `processing` | 🔄 | 처리 진행 중 |
| `completed` | ✅ | 처리 완료 |
| `failed` | ❌ | 처리 실패 |

#### 9.1.2 문서 처리 파이프라인

```
문서 업로드 → 텍스트 추출 → 청킹 → 임베딩 생성 → 벡터 DB 저장
     ↓            ↓           ↓          ↓              ↓
   pending    processing  processing  processing   completed
```

#### 9.1.3 실패 문서 재처리

1. **문서 처리 현황** 탭에서 실패 문서 확인
2. 해당 문서의 **"재처리"** 버튼 클릭
3. 상태가 `pending`으로 변경되며 재처리 시작

### 9.2 벡터 DB 통계

#### 9.2.1 전체 현황

| 지표 | 설명 |
|------|------|
| **총 청크 수** | 벡터 DB에 저장된 전체 청크 |
| **평균 청크 크기** | 청크당 평균 문자 수 |

#### 9.2.2 임베딩 커버리지

| 제공자 | 차원 | 용도 |
|--------|------|------|
| **Azure** | 1536d | 텍스트 임베딩 (text-embedding-3-small) |
| **AWS** | 1024d | 텍스트 임베딩 (Titan V2) |
| **멀티모달** | 512d | 이미지 임베딩 (Marengo) |
| **레거시** | 가변 | 이전 버전 호환 |

#### 9.2.3 컨테이너별 분포

각 컨테이너의 청크 수와 문서 수를 확인하고, 전체 대비 비율을 시각화합니다.

### 9.3 컨테이너 현황

전체 지식 컨테이너의 상세 현황을 테이블 형태로 제공합니다:

| 컬럼 | 설명 |
|------|------|
| **컨테이너 ID** | 고유 식별자 |
| **이름** | 표시 이름 |
| **공개 여부** | PUBLIC / 비공개 |
| **문서 수** | 저장된 문서 개수 |
| **청크 수** | 생성된 청크 개수 |
| **사용자 수** | 접근 권한 보유자 수 |
| **생성일** | 컨테이너 생성 일자 |

---

## 10. AI 사용량 관리

> **경로**: `/admin/ai`

### 10.1 개요

LLM API 호출량과 비용을 추적하여 AI 리소스 사용을 관리합니다.

### 10.2 요약 통계

| 지표 | 설명 |
|------|------|
| **총 요청 수** | 조회 기간 내 API 호출 횟수 |
| **총 토큰 수** | 입력 + 출력 토큰 합계 |
| **예상 비용** | 모델별 단가 기준 추정 비용 (USD) |
| **평균 응답 시간** | API 응답 레이턴시 평균 |
| **성공률** | 성공 요청 / 전체 요청 × 100% |

### 10.3 제공자별 현황

| 제공자 | 설명 |
|--------|------|
| **Bedrock** | AWS Claude, Titan 모델 |
| **Azure OpenAI** | GPT-4o, GPT-4o-mini |
| **OpenAI** | 직접 API 연동 |

### 10.4 상위 사용자

토큰 사용량 기준 상위 10명의 사용자를 표시합니다.

### 10.5 모델 비용 단가

시스템에 등록된 AI 모델과 비용 정보:

| 모델 | 입력 ($/1K) | 출력 ($/1K) |
|------|-------------|-------------|
| Claude 3.5 Sonnet (Bedrock) | $0.003 | $0.015 |
| GPT-4o (Azure) | $0.005 | $0.015 |
| GPT-4o-mini (Azure) | $0.00015 | $0.0006 |
| Titan Embed V2 | $0.00002 | - |

### 10.6 조회 기간 설정

- 최근 7일
- 최근 30일 (기본값)
- 최근 90일

---

## 11. 부록: API 참조

### 11.1 관리자 API 엔드포인트

모든 API는 `/api/v1/admin` 프리픽스를 사용하며, ADMIN 권한이 필요합니다.

#### 대시보드

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | `/dashboard/stats` | 대시보드 통계 |
| GET | `/health` | 시스템 헬스체크 |
| GET | `/storage` | 저장소 사용량 |

#### 감사 로그

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | `/audit-logs` | 감사 로그 조회 |
| GET | `/audit-logs/stats` | 감사 로그 통계 |

#### 지식베이스

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | `/documents/status` | 문서 처리 현황 |
| POST | `/documents/{id}/reprocess` | 문서 재처리 |
| GET | `/vector-db/stats` | 벡터 DB 통계 |
| GET | `/containers/overview` | 컨테이너 현황 |

#### AI 사용량

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | `/ai/usage/summary` | AI 사용량 요약 |
| GET | `/ai/usage/daily` | 일별 사용량 |
| GET | `/ai/usage/top-users` | 상위 사용자 |
| GET | `/ai/models` | 모델 설정 목록 |

### 11.2 인증

모든 API 요청에는 Bearer 토큰이 필요합니다:

```http
Authorization: Bearer <access_token>
```

### 11.3 응답 형식

```json
{
  "success": true,
  "data": { ... },
  "message": "처리 완료"
}
```

에러 응답:

```json
{
  "detail": "에러 메시지"
}
```

---

## 부록: 문의 및 지원

### 기술 지원

- **이메일**: support@company.com
- **내선**: 1234

### 관련 문서

- `01.system_overview_design.md` - 시스템 설계 개요
- `별첨03_IPBridge_화면적용가이드.md` - UI/UX 가이드

---

**문서 이력**

| 날짜 | 버전 | 내용 | 작성자 |
|------|------|------|--------|
| 2025-12-25 | v1.0 | 최초 작성 - 관리자 기능 전체 가이드 | AI |

---

*© 2025 IPBridge. All rights reserved.*

