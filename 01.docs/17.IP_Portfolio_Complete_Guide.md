# IP 포트폴리오 완전 가이드

> **IPC 기반 특허 관리 시스템 - 통합 설계 문서**  
> **작성일**: 2026-01-04  
> **버전**: 2.0 (6개 문서 통합)  
> **업종**: 반도체 장비 제조

---

## 📋 문서 개요

### 목적

본 문서는 **IPC(International Patent Classification) 기반 IP 포트폴리오 관리 시스템**의 완전한 설계, 구현, 운영 가이드입니다.

**핵심 가치**:
- ✅ **조직 독립성**: IPC 표준 기반으로 조직 개편과 무관하게 특허 자산 관리
- ✅ **국제 표준 준수**: WIPO IPC 분류 체계로 글로벌 특허 검색/비교 가능
- ✅ **권한 세밀화**: IPC 코드별 사용자 권한 관리 (ADMIN/EDITOR/VIEWER)
- ✅ **확장성**: CPC 통합, AI 분류, 경쟁사 분석 등 고급 기능 추가 용이

### 적용 범위

- IPC 코드 마스터 데이터 관리
- IPC 권한 관리 시스템 (Admin API + UI)
- 특허 파일 업로드 및 자동 분류
- IP 포트폴리오 메뉴 구성
- 반도체 장비 업종 특화 IPC 코드 체계
- 초기 데이터 적재 및 검증

---

## 📚 목차

1. [시스템 아키텍처](#1-시스템-아키텍처)
2. [IPC 중심 전환 분석](#2-ipc-중심-전환-분석)
3. [데이터베이스 설계](#3-데이터베이스-설계)
4. [백엔드 API 설계](#4-백엔드-api-설계)
5. [프론트엔드 설계](#5-프론트엔드-설계)
6. [파일 업로드 및 관리](#6-파일-업로드-및-관리)
7. [반도체 업종 IPC 코드 체계](#7-반도체-업종-ipc-코드-체계)
8. [초기 데이터 구축](#8-초기-데이터-구축)
9. [빠른 시작 가이드](#9-빠른-시작-가이드)
10. [IP 포트폴리오 메뉴 구성](#10-ip-포트폴리오-메뉴-구성)
11. [권한 관리 시나리오](#11-권한-관리-시나리오)
12. [운영 및 확장 계획](#12-운영-및-확장-계획)

---

## 1. 시스템 아키텍처

### 1.1 전체 구조도

```
┌─────────────────────────────────────────────────────────────┐
│              IP 포트폴리오 시스템 (IPC 중심)                  │
├─────────────────────────────────────────────────────────────┤
│  📊 프론트엔드 (React + TypeScript)                          │
│  ├─ /admin/ipc-permissions (IPC 권한 관리) ✅               │
│  ├─ /ip-portfolio (특허 조회/검색)                          │
│  ├─ /ip-portfolio/upload (특허 파일 업로드)                 │
│  └─ /ip-portfolio/dashboard (통계 대시보드)                 │
├─────────────────────────────────────────────────────────────┤
│  🔧 백엔드 API (FastAPI + PostgreSQL)                       │
│  ├─ /api/v1/admin/ipc-permissions (CRUD) ✅                │
│  ├─ /api/v1/ip-portfolio (특허 조회)                        │
│  ├─ /api/v1/ip-portfolio/upload (파일 업로드)               │
│  └─ /api/v1/ip-portfolio/statistics (통계)                 │
├─────────────────────────────────────────────────────────────┤
│  💾 데이터베이스 (PostgreSQL)                               │
│  ├─ tb_ipc_code (IPC 코드 마스터) ✅                        │
│  ├─ tb_ipc_permissions (IPC 권한) ✅                        │
│  ├─ tb_patent_metadata (특허 메타데이터)                    │
│  └─ tb_file_bss_info (파일 정보)                           │
├─────────────────────────────────────────────────────────────┤
│  ☁️ 스토리지 (AWS S3 / Azure Blob)                         │
│  ├─ raw/ (원본 PDF/DOCX)                                   │
│  ├─ intermediate/ (OCR 결과)                               │
│  └─ derived/ (추출 데이터)                                  │
├─────────────────────────────────────────────────────────────┤
│  🤖 AI 서비스 (문서 처리 & 분류)                            │
│  ├─ Upstage Document Parse (OCR)                           │
│  ├─ AWS Bedrock (임베딩, IPC 자동 분류)                     │
│  └─ Azure Document Intelligence (대체 OCR)                 │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 기술 스택

**백엔드**:
- FastAPI (Python 3.11)
- PostgreSQL 14+
- SQLAlchemy 2.0 (AsyncSession)
- AWS Bedrock (Claude 3.5 Sonnet, Titan Embeddings)
- Upstage Document Parse / Azure DI

**프론트엔드**:
- React 18 + TypeScript
- React Router v6
- TailwindCSS
- Lucide React (아이콘)

**인프라**:
- Docker + Docker Compose
- AWS S3 (파일 스토리지)
- Redis (캐시, Celery)

---

## 2. IPC 중심 전환 분석

### 2.1 조직도 vs IPC 비교

| 구분 | 조직도 기반 (레거시) | IPC 중심 (신규) |
|------|---------------------|-----------------|
| **분류 기준** | 부서/팀 조직도 (SAP 연동) | 국제 표준 IPC 기술 분류 |
| **표준화** | ❌ 기업별 조직 구조 의존 | ✅ 글로벌 표준 (IPC/CPC) |
| **조직 변경 영향** | ❌ 조직 개편 시 재구성 필요 | ✅ 조직 변경과 무관 |
| **특허 관리 적합성** | ❌ 기술 분류 부재 | ✅ 기술 중심 분류 최적화 |
| **검색/필터링** | 조직 단위 검색 | ✅ IPC 코드, 섹션, 키워드 |
| **권한 관리** | 조직 멤버십 기반 자동 부여 | IPC 코드별 권한 부여 (명시적) |
| **대시보드 통계** | 조직별 문서 수 | ✅ 기술 분야별 특허 분포 |
| **경쟁사 비교** | ❌ 불가능 (조직 구조 다름) | ✅ 가능 (동일 IPC 기준) |
| **유지보수** | SAP RFC 연동 유지 필요 | ✅ IPC 마스터 데이터만 관리 |

### 2.2 전환 권고 사항

**✅ IPC 중심 IP 포트폴리오 전환 권장**

**이유**:
1. **특허 관리 본질에 부합**: 기술 분류가 핵심
2. **국제 표준 준수**: IPC/CPC는 전 세계 특허청에서 사용
3. **조직 독립성**: 조직 개편과 무관하게 특허 자산 유지
4. **확장성**: 향후 CPC, 인용 분석, AI 추천 등 고급 기능 추가 용이
5. **복잡도 감소**: SAP 연동, 조직도 동기화 불필요

### 2.3 레거시 처리 방안

#### Phase 1: IPC 중심 IP 포트폴리오 구축 (4주)
- IPC 기반 특허 조회 API 구현
- IPC 트리 네비게이션 UI
- 특허 카드 UI (IPC 코드 중심)

#### Phase 2: 하이브리드 운영 (4주)
- 기존 containers.py 유지 (읽기 전용)
- 신규 특허는 IPC 중심으로만 분류
- 사용자에게 점진적 전환 안내

#### Phase 3: 완전 전환 (4주)
- 기존 조직 기반 문서 → IPC 자동 분류
- containers.py 엔드포인트 deprecated 표시
- 6개월 후 완전 제거

---

## 3. 데이터베이스 설계

### 3.1 IPC 코드 마스터 테이블

```sql
-- tb_ipc_code: 국제특허분류 마스터 (WIPO 표준)
CREATE TABLE tb_ipc_code (
    ipc_code VARCHAR(50) PRIMARY KEY,           -- 예: "H01L21/00"
    ipc_section VARCHAR(10),                    -- 섹션 (A~H)
    ipc_class VARCHAR(10),                      -- 클래스 (01~99)
    ipc_subclass VARCHAR(10),                   -- 서브클래스 (A~Z)
    ipc_group VARCHAR(20),                      -- 그룹 (1/00~999/00)
    ipc_subgroup VARCHAR(30),                   -- 서브그룹 (1/01~999/999)
    korean_name TEXT,                           -- 한글 설명
    english_name TEXT,                          -- 영문 설명
    parent_code VARCHAR(50),                    -- 상위 코드 (계층 구조)
    level INTEGER,                              -- 계층 레벨 (0~5)
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT now(),
    updated_at TIMESTAMP
);

CREATE INDEX idx_ipc_section ON tb_ipc_code(ipc_section);
CREATE INDEX idx_ipc_parent ON tb_ipc_code(parent_code);
CREATE INDEX idx_ipc_active ON tb_ipc_code(is_active);
```

**예시 데이터** (반도체 장비):
```csv
ipc_code,ipc_section,korean_name,english_name,level
H,H,"전기","Electricity",0
H01L,H,"반도체 소자","Semiconductor devices",1
H01L21/00,H,"반도체 제조 공정","Manufacturing processes",2
H01L21/67,H,"반도체 장치 제조 장비","Semiconductor manufacturing apparatus",3
```

### 3.2 IPC 권한 테이블

```sql
-- tb_ipc_permissions: IPC 코드별 사용자 권한
CREATE TABLE tb_ipc_permissions (
    permission_id SERIAL PRIMARY KEY,
    user_emp_no VARCHAR(20) NOT NULL,           -- 사번
    ipc_code VARCHAR(50) NOT NULL,              -- IPC 코드
    role_id VARCHAR(20) NOT NULL,               -- ADMIN/EDITOR/VIEWER
    include_children BOOLEAN DEFAULT true,      -- 하위 IPC까지 권한 적용
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT now(),
    created_by VARCHAR(20),
    updated_at TIMESTAMP,
    updated_by VARCHAR(20),
    
    UNIQUE(user_emp_no, ipc_code),
    FOREIGN KEY (user_emp_no) REFERENCES tb_user(emp_no),
    FOREIGN KEY (ipc_code) REFERENCES tb_ipc_code(ipc_code)
);

CREATE INDEX idx_ipc_perm_user ON tb_ipc_permissions(user_emp_no);
CREATE INDEX idx_ipc_perm_code ON tb_ipc_permissions(ipc_code);
CREATE INDEX idx_ipc_perm_active ON tb_ipc_permissions(is_active);
```

**권한 계층 상속 예시**:
- 사용자 A: IPC "H" (전기) ADMIN 권한 + `include_children=true`
- → H01 (기본 전기 소자), H04 (전기 통신) 등 모든 하위 코드 자동 권한

### 3.3 특허 메타데이터 테이블

```sql
-- tb_patent_metadata: 특허 메타데이터 (IPC 중심)
CREATE TABLE tb_patent_metadata (
    metadata_id SERIAL PRIMARY KEY,
    file_bss_info_sno INTEGER,                  -- 파일 정보 FK
    
    -- 특허 기본 정보
    application_number VARCHAR(50),             -- 출원번호
    registration_number VARCHAR(50),            -- 등록번호
    publication_number VARCHAR(50),             -- 공개번호
    patent_title TEXT,                          -- 발명의 명칭
    applicant VARCHAR(200),                     -- 출원인
    inventor VARCHAR(200),                      -- 발명자
    
    -- 날짜 정보
    application_date DATE,                      -- 출원일
    registration_date DATE,                     -- 등록일
    publication_date DATE,                      -- 공개일
    
    -- IPC 분류 (핵심)
    main_ipc_code VARCHAR(50),                  -- 주 IPC 코드
    ipc_codes TEXT[],                           -- 복수 IPC 코드 (배열)
    primary_ipc_section VARCHAR(10),            -- IPC 섹션 (A~H)
    
    -- 법적상태 및 메타
    patent_status VARCHAR(30),                  -- 등록/공개/거절/소멸
    abstract TEXT,                              -- 초록
    claims TEXT,                                -- 청구항
    keywords TEXT[],                            -- 키워드 (자동 추출)
    
    -- 레거시 참조
    legacy_container_id VARCHAR(50),            -- 기존 조직 컨테이너 ID
    
    created_at TIMESTAMP DEFAULT now(),
    updated_at TIMESTAMP,
    
    FOREIGN KEY (file_bss_info_sno) REFERENCES tb_file_bss_info(file_bss_info_sno),
    FOREIGN KEY (main_ipc_code) REFERENCES tb_ipc_code(ipc_code)
);

CREATE INDEX idx_patent_main_ipc ON tb_patent_metadata(main_ipc_code);
CREATE INDEX idx_patent_ipc_section ON tb_patent_metadata(primary_ipc_section);
CREATE INDEX idx_patent_ipc_codes ON tb_patent_metadata USING gin(ipc_codes);
CREATE INDEX idx_patent_keywords ON tb_patent_metadata USING gin(keywords);
CREATE INDEX idx_patent_status ON tb_patent_metadata(patent_status);
CREATE INDEX idx_patent_app_number ON tb_patent_metadata(application_number);
```

---

## 4. 백엔드 API 설계

### 4.1 IPC 권한 관리 API (Admin)

**파일 위치**: `/home/arkwith/Dev/abekm/backend/app/api/v1/admin_ipc_permissions.py`

#### 4.1.1 권한 목록 조회

```python
GET /api/v1/admin/ipc-permissions
```

**쿼리 파라미터**:
- `page`: 페이지 번호 (기본 1)
- `page_size`: 페이지 크기 (기본 20, 최대 100)
- `user_emp_no`: 사번 필터
- `ipc_code`: IPC 코드 필터
- `role_id`: 역할 필터 (ADMIN/EDITOR/VIEWER)
- `is_active`: 활성 상태 필터

**응답 예시**:
```json
{
  "success": true,
  "data": [
    {
      "permission_id": 1,
      "user_emp_no": "admin001",
      "user_name": "시스템관리자",
      "ipc_code": "H",
      "ipc_description": "전기 (Electricity)",
      "role_id": "ADMIN",
      "is_active": true,
      "created_at": "2026-01-04T10:00:00Z"
    }
  ],
  "pagination": {
    "total_count": 12,
    "page": 1,
    "page_size": 20,
    "total_pages": 1
  }
}
```

#### 4.1.2 권한 생성

```python
POST /api/v1/admin/ipc-permissions
```

**요청 바디**:
```json
{
  "user_emp_no": "tech001",
  "ipc_code": "H01L",
  "role_id": "EDITOR",
  "include_children": true
}
```

**응답**:
```json
{
  "success": true,
  "message": "IPC 권한이 생성되었습니다.",
  "data": {
    "permission_id": 13,
    "user_emp_no": "tech001",
    "ipc_code": "H01L",
    "role_id": "EDITOR"
  }
}
```

#### 4.1.3 권한 수정

```python
PUT /api/v1/admin/ipc-permissions/{permission_id}
```

#### 4.1.4 권한 삭제

```python
DELETE /api/v1/admin/ipc-permissions/{permission_id}
```

### 4.2 IP 포트폴리오 API (사용자)

**파일 위치**: `/home/arkwith/Dev/abekm/backend/app/api/v1/ip_portfolio.py` (신규)

#### 4.2.1 IPC 트리 조회

```python
GET /api/v1/ip-portfolio/ipc-tree
```

**응답**:
```json
{
  "success": true,
  "tree": [
    {
      "code": "H",
      "name": "전기 (Electricity)",
      "level": 0,
      "patent_count": 245,
      "children": [
        {
          "code": "H01L",
          "name": "반도체 소자",
          "level": 1,
          "patent_count": 180,
          "children": [...]
        }
      ]
    }
  ]
}
```

#### 4.2.2 특허 목록 조회

```python
GET /api/v1/ip-portfolio/patents
```

**쿼리 파라미터**:
- `ipc_code`: IPC 코드 필터
- `ipc_section`: IPC 섹션 (A~H)
- `patent_status`: 법적상태 (등록/공개/거절)
- `year_from`, `year_to`: 출원연도 범위
- `keyword`: 키워드 검색
- `page`, `page_size`: 페이징

**응답**:
```json
{
  "success": true,
  "patents": [
    {
      "metadata_id": 1,
      "patent_title": "AI 기반 충전 제어 방법",
      "application_number": "10-2023-0123456",
      "applicant": "삼성전자",
      "main_ipc_code": "H02J7/00",
      "patent_status": "등록",
      "application_date": "2023-10-15",
      "thumbnail_url": "https://s3.../thumbnail.jpg"
    }
  ],
  "pagination": {...}
}
```

---

## 5. 프론트엔드 설계

### 5.1 IPC 권한 관리 페이지

**경로**: `/admin/ipc-permissions`  
**파일**: `/home/arkwith/Dev/abekm/frontend/src/pages/admin/IpcPermissionManagement.tsx`

**주요 기능**:
- ✅ IPC 권한 목록 테이블 (페이징 20개/페이지)
- ✅ 필터: 사번, IPC 코드, 역할, 활성 상태
- ✅ 권한 생성 모달 (사용자 선택, IPC 코드 입력, 역할 선택)
- ✅ 권한 수정 모달
- ✅ 권한 삭제 (확인 다이얼로그)
- ✅ 실시간 알림 (성공/에러 메시지)
- ✅ 역할별 색상 코딩 (ADMIN: 파란색, EDITOR: 녹색, VIEWER: 회색)

**UI 스크린샷**:
```
┌─────────────────────────────────────────────────────────────┐
│  IPC 권한 관리                                    [권한 생성]  │
├─────────────────────────────────────────────────────────────┤
│  필터: [사번____] [IPC 코드____] [역할_▼] [활성_▼]  [검색]   │
├──────┬─────────┬──────────┬────────┬─────────┬─────────────┤
│ 사번  │ 이름     │ IPC 코드  │ 역할   │ 활성    │ 작업         │
├──────┼─────────┼──────────┼────────┼─────────┼─────────────┤
│ admin│ 관리자   │ H        │ ADMIN  │ ✅      │ [수정][삭제] │
│ tech1│ 기술자A  │ H01L     │ EDITOR │ ✅      │ [수정][삭제] │
│ user1│ 사용자B  │ H01L21/00│ VIEWER │ ✅      │ [수정][삭제] │
└──────┴─────────┴──────────┴────────┴─────────┴─────────────┘
  [1] [2] [3] ... (페이징)
```

### 5.2 IP 포트폴리오 페이지 (신규)

**경로**: `/ip-portfolio`

**레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│  IP 포트폴리오                                     [검색] [필터] │
├──────────┬──────────────────────────────────────────────────┤
│          │  특허 리스트                                     │
│ IPC 트리  │  ┌────────────────────────────────────────────┐ │
│          │  │ 📄 AI 기반 충전 제어 방법                   │ │
│ ▼ H      │  │ 출원번호: 10-2023-0123456                 │ │
│   ▼ H04  │  │ 출원인: 삼성전자 | 상태: 등록              │ │
│     H04W │  │ IPC: H02J 7/00                            │ │
│     H04L │  │ [상세보기]                                 │ │
│   H02    │  └────────────────────────────────────────────┘ │
│     H02J │  ┌────────────────────────────────────────────┐ │
│          │  │ 📄 배터리 상태 예측 시스템                 │ │
│ ▼ G      │  │ ...                                        │ │
│   ▼ G06  │  └────────────────────────────────────────────┘ │
│     G06N │                                                  │
│          │  [1] [2] [3] ... (페이징)                      │
└──────────┴──────────────────────────────────────────────────┘
```

---

## 6. 파일 업로드 및 관리

### 6.1 파일 업로드 워크플로우

```
사용자 업로드 (PDF/DOCX)
    ↓
1. 파일 검증 (크기, 형식, 바이러스 스캔)
    ↓
2. S3 업로드 (raw/)
    ↓
3. tb_file_bss_info 레코드 생성
    ↓
4. Celery 비동기 작업 큐잉
    ↓
5. OCR 처리 (Upstage / Azure DI)
    ↓
6. 메타데이터 추출 (제목, 출원번호, 초록)
    ↓
7. IPC 자동 분류 (AI)
    ↓
8. tb_patent_metadata 생성
    ↓
9. 벡터 임베딩 (vs_document_vectors)
    ↓
10. 사용자 알림 (처리 완료)
```

### 6.2 파일 업로드 API

**엔드포인트**:
```python
POST /api/v1/ip-portfolio/upload
```

**요청** (Multipart Form Data):
```
file: [PDF/DOCX 파일]
patent_title: "AI 기반 충전 제어 방법" (선택)
application_number: "10-2023-0123456" (선택)
main_ipc_code: "H02J7/00" (선택)
```

**응답**:
```json
{
  "success": true,
  "message": "파일이 업로드되었습니다. 처리 중...",
  "data": {
    "file_bss_info_sno": 123,
    "task_id": "celery-task-uuid",
    "status": "PENDING"
  }
}
```

### 6.3 IPC 자동 분류 로직

**방법 1: 텍스트 키워드 기반 매칭**
```python
async def classify_ipc_by_keywords(text: str) -> List[str]:
    """
    초록/청구항에서 키워드 추출 → IPC 설명과 TF-IDF 유사도 계산
    """
    # 1. 한국어 형태소 분석 (Kiwi)
    tokens = korean_nlp.tokenize(text)
    
    # 2. IPC 설명과 TF-IDF 벡터 생성
    vectorizer = TfidfVectorizer()
    text_vector = vectorizer.fit_transform([text])
    ipc_vectors = vectorizer.transform(ipc_descriptions)
    
    # 3. 코사인 유사도 계산
    similarities = cosine_similarity(text_vector, ipc_vectors)
    
    # 4. 상위 3개 IPC 추천
    top_3 = similarities.argsort()[-3:][::-1]
    return [ipc_codes[i] for i in top_3]
```

**방법 2: 임베딩 기반 유사도**
```python
async def classify_ipc_by_embedding(text: str) -> List[str]:
    """
    AWS Bedrock Titan Embeddings + 코사인 유사도
    """
    # 1. 문서 임베딩
    doc_embedding = await ai_service.get_embedding(text)
    
    # 2. IPC 설명 임베딩 (사전 계산)
    ipc_embeddings = await load_ipc_embeddings()
    
    # 3. 코사인 유사도
    similarities = cosine_similarity([doc_embedding], ipc_embeddings)
    
    # 4. 상위 3개 IPC 추천
    top_3 = similarities.argsort()[-3:][::-1]
    return [ipc_codes[i] for i in top_3]
```

### 6.4 파일 관리 기능

#### 6.4.1 파일 조회

```python
GET /api/v1/ip-portfolio/files/{file_bss_info_sno}
```

**응답**:
```json
{
  "file_bss_info_sno": 123,
  "original_file_name": "특허명세서.pdf",
  "file_size": 2048576,
  "s3_key": "raw/2026/01/04/uuid-특허명세서.pdf",
  "presigned_url": "https://s3.../특허명세서.pdf?expires=...",
  "metadata": {
    "patent_title": "AI 기반 충전 제어 방법",
    "main_ipc_code": "H02J7/00",
    "application_number": "10-2023-0123456"
  }
}
```

#### 6.4.2 파일 다운로드

```python
GET /api/v1/ip-portfolio/files/{file_bss_info_sno}/download
```

**응답**: S3 Presigned URL (1시간 유효)

#### 6.4.3 파일 삭제

```python
DELETE /api/v1/ip-portfolio/files/{file_bss_info_sno}
```

**권한 확인**:
- ADMIN: 모든 파일 삭제 가능
- EDITOR: 본인 업로드 파일만 삭제 가능
- VIEWER: 삭제 불가

---

## 7. 반도체 업종 IPC 코드 체계

### 7.1 핵심 IPC 섹션

반도체 장비 제조업은 주로 다음 IPC 섹션에 특허를 보유합니다:

| IPC 섹션 | 명칭 | 비중 | 대표 기술 |
|----------|------|------|-----------|
| **H** | 전기 | 71% | 반도체 소자, 플라즈마, 전자관 |
| **G** | 물리학 | 18% | 검사, 측정, 광학 |
| **B** | 처리 조작 | 7% | 핸들링, CMP, 세정 |
| **C** | 화학 | 4% | CVD, PVD, 코팅 |

### 7.2 상세 IPC 코드 매핑 (23개)

#### H 섹션 (전기) - 11개 코드

```
H - 전기 (Electricity)
├─ H01L - 반도체 소자 (Semiconductor devices)
│  ├─ H01L21/00 - 반도체 제조 공정 (Manufacturing processes)
│  │  └─ 포토리소그래피, 에칭, 증착, 이온주입
│  ├─ H01L21/02 - 반도체 웨이퍼 제조 (Wafer fabrication)
│  ├─ H01L21/67 - 반도체 장치 제조 장비 (Semiconductor manufacturing apparatus)
│  │  └─ 웨이퍼 핸들링, 진공 챔버, 반응기
│  ├─ H01L21/677 - 웨이퍼 이동 장치 (Wafer transfer apparatus)
│  │  └─ 로봇 핸들러, 이펙터, FOUP
│  └─ H01L21/683 - 웨이퍼 처리 챔버 (Wafer processing chambers)
│     └─ 진공 챔버, 반응 챔버, 로드락
├─ H05H - 플라즈마 기술 (Plasma technique)
│  └─ H05H1/46 - 고주파 방전 플라즈마 (RF plasma discharge)
│     └─ ICP, CCP, 플라즈마 에칭/CVD
├─ H01J - 전자관 (Electric discharge tubes)
   └─ H01J37/32 - 전자빔/이온빔 장치 (Electron/ion beam apparatus)
      └─ 전자빔 리소그래피, 이온빔 에칭
```

**활용 예시**:
- **에칭 장비 팀**: H01L21/00, H05H1/46 (EDITOR)
- **증착 장비 팀**: C23C16/00, C23C14/00 (EDITOR)
- **검사 장비 팀**: G01N21/95, G01B (EDITOR)

#### G 섹션 (물리학) - 3개 코드

```
G - 물리학 (Physics)
├─ G01N - 재료 조사 (Investigation of materials)
│  └─ G01N21/95 - 반도체 웨이퍼 광학 검사 (Optical inspection of wafers)
│     └─ 결함 검출, 패턴 검사, 표면 거칠기
└─ G01B - 길이 측정 (Measurement of length)
   └─ 반도체 CD 측정, 두께 측정, 오버레이 측정
```

#### B 섹션 (처리 조작) - 3개 코드

```
B - 처리 조작 (Performing operations)
├─ B24B - 연마 (Grinding)
│  └─ B24B37/04 - CMP 장치 (Chemical Mechanical Polishing apparatus)
│     └─ 웨이퍼 연마, 슬러리, 연마 패드
└─ B08B - 세정 (Cleaning)
   └─ 반도체 웨이퍼 세정 장치 (Wafer cleaning apparatus)
```

#### C 섹션 (화학) - 3개 코드

```
C - 화학 (Chemistry)
└─ C23C - 금속 코팅 (Metal coating)
   ├─ C23C16/00 - CVD (Chemical Vapor Deposition)
   │  └─ PECVD, LPCVD, ALD
   └─ C23C14/00 - PVD (Physical Vapor Deposition)
      └─ 스퍼터링, 증발, 이온 도금
```

### 7.3 IPC 코드 확장 계획

**Phase 1 (현재)**: 23개 코드 (반도체 장비 핵심)  
**Phase 2 (2주차)**: 주요 기술 분야 100개 확장 (G06, A61, C12 등)  
**Phase 3 (4주차)**: 전체 IPC 코드 5,000개+ (WIPO 데이터 크롤링)

---

## 8. 초기 데이터 구축

### 8.1 IPC 코드 마스터 데이터 적재

**CSV 파일 위치**: `/home/arkwith/Dev/abekm/backend/data/ipc_codes_semiconductor.csv`

**데이터 구조**:
```csv
ipc_code,ipc_section,ipc_class,ipc_subclass,ipc_group,ipc_subgroup,korean_name,english_name,is_active
H,H,,,,,"전기","Electricity",true
H01L,H,01,L,,,"반도체 소자","Semiconductor devices",true
H01L21/00,H,01,L,21,00,"반도체 제조 공정","Manufacturing processes",true
...
```

**적재 스크립트**: `/home/arkwith/Dev/abekm/backend/scripts/load_ipc_codes.py`

**실행 방법**:
```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_codes.py
```

**결과**:
```
✅ IPC 코드 23개 적재 완료
├─ H 섹션: 11개
├─ G 섹션: 3개
├─ B 섹션: 3개
└─ C 섹션: 3개
```

### 8.2 IPC 권한 초기 할당

**CSV 파일 위치**: `/home/arkwith/Dev/abekm/backend/data/ipc_permissions_initial.csv`

**데이터 구조**:
```csv
user_emp_no,ipc_code,role_id,created_by
admin001,H,ADMIN,SYSTEM
admin001,G,ADMIN,SYSTEM
tech001,H01L,EDITOR,SYSTEM
tech002,G01N,EDITOR,SYSTEM
user001,H01L21/00,VIEWER,SYSTEM
...
```

**적재 스크립트**: `/home/arkwith/Dev/abekm/backend/scripts/load_ipc_permissions.py`

**실행 방법**:
```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_permissions.py
```

**결과**:
```
✅ IPC 권한 12개 적재 완료
├─ ADMIN: 4개 (admin001: H, G, B, C)
├─ EDITOR: 6개 (tech001-003: 기술 분야별)
└─ VIEWER: 2개 (user001-002: 세부 공정)
```

### 8.3 데이터 검증

**검증 스크립트**: `/home/arkwith/Dev/abekm/backend/scripts/verify_ipc_data.py`

**실행 방법**:
```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/verify_ipc_data.py
```

**검증 항목** (10개):
1. ✅ IPC 코드 수 확인 (23개 예상)
2. ✅ 섹션별 분포 (H 11개, G 3개, B 3개, C 3개)
3. ✅ 레벨별 분포 (섹션 4개, 클래스 10개, 그룹 9개)
4. ✅ IPC 권한 수 확인 (12개 예상)
5. ✅ 역할별 권한 분포 (ADMIN 4개, EDITOR 6개, VIEWER 2개)
6. ✅ 사용자별 권한 통계
7. ✅ IPC 코드별 권한 할당 현황
8. ✅ 비활성 권한 확인
9. ✅ 고아 권한 확인 (IPC 코드 미존재)
10. ✅ 중복 권한 확인

**출력 예시**:
```
📊 IPC 데이터 검증 리포트
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ IPC 코드 수: 23개
   ├─ H 섹션: 11개 (47.8%)
   ├─ G 섹션: 3개 (13.0%)
   ├─ B 섹션: 3개 (13.0%)
   └─ C 섹션: 3개 (13.0%)

✅ IPC 권한 수: 12개
   ├─ ADMIN: 4개 (33.3%)
   ├─ EDITOR: 6개 (50.0%)
   └─ VIEWER: 2개 (16.7%)

✅ 데이터 품질
   ├─ 비활성 권한: 0개
   ├─ 고아 권한: 0개
   └─ 중복 권한: 0개

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 모든 검증 통과
```

---

## 9. 빠른 시작 가이드

### 9.1 5분 안에 시작하기

#### 1단계: 데이터베이스 테이블 확인

IPC 권한 관리 테이블이 이미 생성되어 있습니다:
- ✅ `tb_ipc_code` - IPC 코드 마스터 테이블
- ✅ `tb_ipc_permissions` - IPC 권한 테이블

#### 2단계: IPC 코드 마스터 데이터 적재

```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_codes.py
```

**적재되는 데이터** (23개 IPC 코드):
- H 섹션 (전기): 11개 - 반도체 제조 장비
- G 섹션 (물리학): 3개 - 검사/측정 장비
- B 섹션 (처리 조작): 3개 - 핸들링/CMP
- C 섹션 (화학): 3개 - 증착/코팅

#### 3단계: IPC 권한 초기 데이터 적재

```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/load_ipc_permissions.py
```

**적재되는 권한** (12개):
- admin001: H, G, B, C 섹션 (ADMIN)
- tech001: H01L, H05H (EDITOR)
- tech002: G01N, G01B (EDITOR)
- tech003: B24B, C23C (EDITOR)
- user001, user002: 세부 공정 (VIEWER)

#### 4단계: 데이터 검증

```bash
cd /home/arkwith/Dev/abekm/backend
python scripts/verify_ipc_data.py
```

**검증 항목**:
- ✅ IPC 코드 수 및 분포
- ✅ 권한 할당 현황
- ✅ 역할별/사용자별 통계
- ✅ 데이터 품질 (중복, 고아 권한 등)

#### 5단계: 프론트엔드 접속

1. 브라우저에서 http://localhost:3000 접속
2. 관리자 계정으로 로그인 (admin001)
3. 좌측 메뉴: 관리자 → **IPC 권한 관리** 클릭
4. IPC 권한 목록 확인 및 관리

---

## 10. IP 포트폴리오 메뉴 구성

### 10.1 메뉴 구조 (3단계)

```
📊 IP 포트폴리오 (메인 메뉴)
│
├── 🗂️ 기술 분야별 특허 (IPC 트리 네비게이션)
│   ├── H (전기) - 반도체 제조 장비
│   │   ├── H01L - 반도체 소자
│   │   │   ├── H01L21/00 - 제조 공정
│   │   │   ├── H01L21/67 - 제조 장비
│   │   │   └── H01L21/683 - 처리 챔버
│   │   ├── H05H - 플라즈마 기술
│   │   └── H01J - 전자관
│   │
│   ├── G (물리학) - 검사/측정
│   │   ├── G01N - 검사 (결함 검출)
│   │   └── G01B - 측정 (CD 측정)
│   │
│   ├── B (처리 조작) - 핸들링
│   │   ├── B24B - CMP
│   │   └── B08B - 세정
│   │
│   └── C (화학) - 증착/코팅
│       └── C23C - CVD/PVD
│
├── 📈 IP 대시보드
│   ├── 기술 분야별 특허 현황 (파이 차트)
│   ├── 출원 트렌드 (연도별 막대 그래프)
│   ├── 핵심 IPC 분포 (상위 10개)
│   └── 발명자 통계 (활동 순위)
│
├── 🔍 특허 검색
│   ├── IPC 코드 검색 (자동완성)
│   ├── 키워드 검색 (AI 시맨틱)
│   ├── 발명자 검색
│   └── 출원일/등록일 범위
│
├── 📝 특허 관리
│   ├── 신규 특허 등록
│   ├── 특허 상태 업데이트
│   └── 특허 파일 업로드
│
├── 🎯 전략 분석 (AI Agent)
│   ├── 기술 백공간 분석
│   ├── 경쟁사 특허 분석
│   ├── 인용 관계 분석
│   └── 특허 가치 평가
│
└── ⚙️ 관리자
    ├── IPC 권한 관리 ✅ (구현 완료)
    ├── IPC 코드 관리
    └── 특허 메타데이터 관리
```

### 10.2 프론트엔드 구현 우선순위

**Phase 1 (2주)**: 기본 조회 기능
- [ ] IPC 트리 네비게이션 컴포넌트
- [ ] 기술 분야별 특허 목록 (카드 뷰)
- [ ] 특허 상세 페이지
- [ ] IPC 코드별 권한 필터링

**Phase 2 (2주)**: 대시보드
- [ ] IP 대시보드 페이지
- [ ] 차트 컴포넌트 (Chart.js/Recharts)
- [ ] 통계 위젯 (총 특허 수, 출원 추세 등)

**Phase 3 (4주)**: 검색 및 관리
- [ ] 고급 특허 검색 (IPC + 키워드)
- [ ] 특허 등록/수정 폼
- [ ] 파일 업로드 (PDF, 도면)

**Phase 4 (4주+)**: AI 전략 분석
- [ ] 기술 백공간 분석 (AI Agent)
- [ ] 경쟁사 특허 비교
- [ ] 인용 관계 시각화

---

## 11. 권한 관리 시나리오

### 11.1 시나리오 1: 신규 팀원 온보딩

**상황**: 반도체 제조팀에 신입 엔지니어(user003) 입사

**권한 할당**:
1. IPC 권한 관리 페이지 접속 (`/admin/ipc-permissions`)
2. "권한 생성" 버튼 클릭
3. 입력:
   - 사용자: user003
   - IPC 코드: H01L21/00 (제조 공정)
   - 역할: VIEWER (조회 전용)
   - 하위 포함: true
4. 저장

**결과**: user003은 H01L21/00 및 하위 공정 특허 조회 가능

### 11.2 시나리오 2: 기술 분야 변경

**상황**: tech001이 플라즈마 팀에서 검사 팀으로 이동

**권한 조정**:
1. 기존 권한 비활성화:
   - H01L (EDITOR) → 비활성화
   - H05H (EDITOR) → 비활성화
2. 신규 권한 생성:
   - G01N (EDITOR) 추가
   - G01B (EDITOR) 추가

**결과**: tech001은 검사 장비 특허만 편집 가능

### 11.3 시나리오 3: 승진 (VIEWER → EDITOR)

**상황**: user001이 우수 성과로 승진, 특허 편집 권한 필요

**권한 업그레이드**:
1. 기존 권한 수정:
   - H01L21/00 (VIEWER) → H01L21/00 (EDITOR)
2. 추가 권한 부여:
   - H01L21/67 (EDITOR) 추가 - 제조 장비

**결과**: user001은 제조 공정 및 장비 특허 편집 가능

---

## 12. 운영 및 확장 계획

### 12.1 단계별 로드맵

#### Phase 1 (현재~2주): 기본 IPC 권한 관리
- ✅ IPC 코드 마스터 데이터 구축 (23개)
- ✅ IPC 권한 관리 Admin API (CRUD)
- ✅ IPC 권한 관리 UI (페이징, 필터링)
- ✅ 초기 데이터 적재 스크립트
- [ ] IPC 트리 네비게이션 컴포넌트

#### Phase 2 (3~4주): 특허 조회 및 검색
- [ ] 특허 목록 조회 API (IPC 필터링)
- [ ] 특허 카드 UI (썸네일, IPC 태그)
- [ ] 기본 검색 (키워드, IPC 코드)
- [ ] 특허 상세 페이지

#### Phase 3 (5~8주): 파일 업로드 및 자동 분류
- [ ] 파일 업로드 API (Multipart)
- [ ] OCR 처리 (Upstage / Azure DI)
- [ ] IPC 자동 분류 (AI)
- [ ] Celery 비동기 작업 큐
- [ ] 처리 진행 상태 알림

#### Phase 4 (9~12주): IP 대시보드 및 통계
- [ ] 기술 분야별 특허 현황 (파이 차트)
- [ ] 출원 트렌드 분석 (연도별)
- [ ] 핵심 IPC 분포 (상위 10개)
- [ ] 발명자 활동 순위

#### Phase 5 (13주~): 고급 기능 및 AI 분석
- [ ] CPC 분류 통합
- [ ] 경쟁사 특허 분석
- [ ] 기술 백공간 분석 (AI Agent)
- [ ] 인용 관계 네트워크 시각화
- [ ] 특허 가치 평가 (AI 모델)

### 12.2 확장 계획

#### 단기 (1~3개월)
- IPC 코드 확장 (100개 → 5,000개)
- 권한 요청 승인 워크플로우 (MANAGER 역할 활성화)
- 특허 전문 검색 (Elasticsearch)

#### 중기 (3~6개월)
- CPC (Cooperative Patent Classification) 통합
- KIPRIS API 연동 (한국 특허 자동 동기화)
- Google Patents API 연동 (글로벌 특허)
- 특허 인용 관계 분석

#### 장기 (6~12개월)
- AI 기반 특허 자동 분류 (LLM Fine-tuning)
- 경쟁사 특허 포트폴리오 비교
- 기술 트렌드 예측 (시계열 분석)
- 특허 가치 평가 모델 (회귀/분류)
- 특허 침해 리스크 분석

### 12.3 비용 및 리소스

#### 인력
- 백엔드 개발자: 1명 (12주)
- 프론트엔드 개발자: 1명 (12주)
- AI/ML 엔지니어: 0.5명 (Phase 5 이후)

#### 클라우드 비용 (월)
- AWS S3: $50 (파일 스토리지)
- AWS Bedrock: $100 (LLM/임베딩)
- PostgreSQL RDS: $150
- **총**: $300/월

#### 기대 효과
- 특허 검색 시간: 80% 단축 (조직별 → IPC 코드별)
- 중복 출원 방지: 30% 개선
- 특허 품질 향상: AI 분류 정확도 90%+
- 경쟁사 대응 속도: 2배 향상

---

## 📚 참고 자료

### 공식 문서
- [WIPO IPC 공식 사이트](https://www.wipo.int/classifications/ipc/)
- [KIPRIS 특허정보검색](https://www.kipris.or.kr)
- [Google Patents](https://patents.google.com)

### 내부 문서
- [별첨02_ABEKM_초기데이터_설정가이드_v2.md](별첨02_ABEKM_초기데이터_설정가이드_v2.md)
- [02.document_ingestion_vectorstore.md](02.document_ingestion_vectorstore.md)
- [03.search_and_qa_service.md](03.search_and_qa_service.md)

---

## 📝 변경 이력

### v2.0 (2026-01-04)
- 6개 문서 통합 (IPC 중심 전환 분석, 개선 계획서, 연계 설계, 권한 관리, 빠른 시작, 제안서)
- 파일 업로드 및 관리 섹션 추가
- 반도체 업종 IPC 코드 체계 상세화 (23개 → 설명 강화)
- IPC 자동 분류 로직 상세 설계
- 권한 관리 시나리오 3개 추가
- 단계별 로드맵 및 비용 산정

### v1.0 (2026-01-03)
- 최초 작성 (IPC 권한 관리 시스템 설계)

---

**문서 작성자**: AI Knowledge System  
**검토자**: 개발팀장  
**승인일**: 2026-01-04
